(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var cp={exports:{}},bu={};var ME;function VI(){if(ME)return bu;ME=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return bu.Fragment=e,bu.jsx=t,bu.jsxs=t,bu}var PE;function OI(){return PE||(PE=1,cp.exports=VI()),cp.exports}var H=OI(),hp={exports:{}},Ve={};var kE;function MI(){if(kE)return Ve;kE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),w=Symbol.iterator;function j(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,te={};function ge(D,X,ae){this.props=D,this.context=X,this.refs=te,this.updater=ae||Z}ge.prototype.isReactComponent={},ge.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},ge.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Ee(){}Ee.prototype=ge.prototype;function le(D,X,ae){this.props=D,this.context=X,this.refs=te,this.updater=ae||Z}var Le=le.prototype=new Ee;Le.constructor=le,W(Le,ge.prototype),Le.isPureReactComponent=!0;var Oe=Array.isArray;function Ie(){}var R={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function x(D,X,ae){var ue=ae.ref;return{$$typeof:s,type:D,key:X,ref:ue!==void 0?ue:null,props:ae}}function O(D,X){return x(D.type,X,D.props)}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function P(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ae){return X[ae]})}var I=/\/+/g;function it(D,X){return typeof D=="object"&&D!==null&&D.key!=null?P(""+D.key):X.toString(36)}function yt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Ie,Ie):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function G(D,X,ae,ue,we){var Ce=typeof D;(Ce==="undefined"||Ce==="boolean")&&(D=null);var Fe=!1;if(D===null)Fe=!0;else switch(Ce){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(D.$$typeof){case s:case e:Fe=!0;break;case E:return Fe=D._init,G(Fe(D._payload),X,ae,ue,we)}}if(Fe)return we=we(D),Fe=ue===""?"."+it(D,0):ue,Oe(we)?(ae="",Fe!=null&&(ae=Fe.replace(I,"$&/")+"/"),G(we,X,ae,"",function(Qn){return Qn})):we!=null&&(N(we)&&(we=O(we,ae+(we.key==null||D&&D.key===we.key?"":(""+we.key).replace(I,"$&/")+"/")+Fe)),X.push(we)),1;Fe=0;var Rt=ue===""?".":ue+":";if(Oe(D))for(var mt=0;mt<D.length;mt++)ue=D[mt],Ce=Rt+it(ue,mt),Fe+=G(ue,X,ae,Ce,we);else if(mt=j(D),typeof mt=="function")for(D=mt.call(D),mt=0;!(ue=D.next()).done;)ue=ue.value,Ce=Rt+it(ue,mt++),Fe+=G(ue,X,ae,Ce,we);else if(Ce==="object"){if(typeof D.then=="function")return G(yt(D),X,ae,ue,we);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function se(D,X,ae){if(D==null)return D;var ue=[],we=0;return G(D,ue,"","",function(Ce){return X.call(ae,Ce,we++)}),ue}function _e(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=ae)},function(ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=ae)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var Be=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Ze={map:se,forEach:function(D,X,ae){se(D,function(){X.apply(this,arguments)},ae)},count:function(D){var X=0;return se(D,function(){X++}),X},toArray:function(D){return se(D,function(X){return X})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Ve.Activity=S,Ve.Children=Ze,Ve.Component=ge,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=le,Ve.StrictMode=r,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(D){return R.H.useMemoCache(D)}},Ve.cache=function(D){return function(){return D.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(D,X,ae){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ue=W({},D.props),we=D.key;if(X!=null)for(Ce in X.key!==void 0&&(we=""+X.key),X)!A.call(X,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&X.ref===void 0||(ue[Ce]=X[Ce]);var Ce=arguments.length-2;if(Ce===1)ue.children=ae;else if(1<Ce){for(var Fe=Array(Ce),Rt=0;Rt<Ce;Rt++)Fe[Rt]=arguments[Rt+2];ue.children=Fe}return x(D.type,we,ue)},Ve.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Ve.createElement=function(D,X,ae){var ue,we={},Ce=null;if(X!=null)for(ue in X.key!==void 0&&(Ce=""+X.key),X)A.call(X,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(we[ue]=X[ue]);var Fe=arguments.length-2;if(Fe===1)we.children=ae;else if(1<Fe){for(var Rt=Array(Fe),mt=0;mt<Fe;mt++)Rt[mt]=arguments[mt+2];we.children=Rt}if(D&&D.defaultProps)for(ue in Fe=D.defaultProps,Fe)we[ue]===void 0&&(we[ue]=Fe[ue]);return x(D,Ce,we)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(D){return{$$typeof:m,render:D}},Ve.isValidElement=N,Ve.lazy=function(D){return{$$typeof:E,_payload:{_status:-1,_result:D},_init:_e}},Ve.memo=function(D,X){return{$$typeof:y,type:D,compare:X===void 0?null:X}},Ve.startTransition=function(D){var X=R.T,ae={};R.T=ae;try{var ue=D(),we=R.S;we!==null&&we(ae,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Ie,Be)}catch(Ce){Be(Ce)}finally{X!==null&&ae.types!==null&&(X.types=ae.types),R.T=X}},Ve.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ve.use=function(D){return R.H.use(D)},Ve.useActionState=function(D,X,ae){return R.H.useActionState(D,X,ae)},Ve.useCallback=function(D,X){return R.H.useCallback(D,X)},Ve.useContext=function(D){return R.H.useContext(D)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(D,X){return R.H.useDeferredValue(D,X)},Ve.useEffect=function(D,X){return R.H.useEffect(D,X)},Ve.useEffectEvent=function(D){return R.H.useEffectEvent(D)},Ve.useId=function(){return R.H.useId()},Ve.useImperativeHandle=function(D,X,ae){return R.H.useImperativeHandle(D,X,ae)},Ve.useInsertionEffect=function(D,X){return R.H.useInsertionEffect(D,X)},Ve.useLayoutEffect=function(D,X){return R.H.useLayoutEffect(D,X)},Ve.useMemo=function(D,X){return R.H.useMemo(D,X)},Ve.useOptimistic=function(D,X){return R.H.useOptimistic(D,X)},Ve.useReducer=function(D,X,ae){return R.H.useReducer(D,X,ae)},Ve.useRef=function(D){return R.H.useRef(D)},Ve.useState=function(D){return R.H.useState(D)},Ve.useSyncExternalStore=function(D,X,ae){return R.H.useSyncExternalStore(D,X,ae)},Ve.useTransition=function(){return R.H.useTransition()},Ve.version="19.2.3",Ve}var LE;function fg(){return LE||(LE=1,hp.exports=MI()),hp.exports}var xe=fg(),fp={exports:{}},Su={},dp={exports:{}},mp={};var UE;function PI(){return UE||(UE=1,(function(s){function e(G,se){var _e=G.length;G.push(se);e:for(;0<_e;){var Be=_e-1>>>1,Ze=G[Be];if(0<o(Ze,se))G[Be]=se,G[_e]=Ze,_e=Be;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var se=G[0],_e=G.pop();if(_e!==se){G[0]=_e;e:for(var Be=0,Ze=G.length,D=Ze>>>1;Be<D;){var X=2*(Be+1)-1,ae=G[X],ue=X+1,we=G[ue];if(0>o(ae,_e))ue<Ze&&0>o(we,ae)?(G[Be]=we,G[ue]=_e,Be=ue):(G[Be]=ae,G[X]=_e,Be=X);else if(ue<Ze&&0>o(we,_e))G[Be]=we,G[ue]=_e,Be=ue;else break e}}return se}function o(G,se){var _e=G.sortIndex-se.sortIndex;return _e!==0?_e:G.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var p=[],y=[],E=1,S=null,w=3,j=!1,Z=!1,W=!1,te=!1,ge=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function Le(G){for(var se=t(y);se!==null;){if(se.callback===null)r(y);else if(se.startTime<=G)r(y),se.sortIndex=se.expirationTime,e(p,se);else break;se=t(y)}}function Oe(G){if(W=!1,Le(G),!Z)if(t(p)!==null)Z=!0,Ie||(Ie=!0,P());else{var se=t(y);se!==null&&yt(Oe,se.startTime-G)}}var Ie=!1,R=-1,A=5,x=-1;function O(){return te?!0:!(s.unstable_now()-x<A)}function N(){if(te=!1,Ie){var G=s.unstable_now();x=G;var se=!0;try{e:{Z=!1,W&&(W=!1,Ee(R),R=-1),j=!0;var _e=w;try{t:{for(Le(G),S=t(p);S!==null&&!(S.expirationTime>G&&O());){var Be=S.callback;if(typeof Be=="function"){S.callback=null,w=S.priorityLevel;var Ze=Be(S.expirationTime<=G);if(G=s.unstable_now(),typeof Ze=="function"){S.callback=Ze,Le(G),se=!0;break t}S===t(p)&&r(p),Le(G)}else r(p);S=t(p)}if(S!==null)se=!0;else{var D=t(y);D!==null&&yt(Oe,D.startTime-G),se=!1}}break e}finally{S=null,w=_e,j=!1}se=void 0}}finally{se?P():Ie=!1}}}var P;if(typeof le=="function")P=function(){le(N)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,it=I.port2;I.port1.onmessage=N,P=function(){it.postMessage(null)}}else P=function(){ge(N,0)};function yt(G,se){R=ge(function(){G(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(G){switch(w){case 1:case 2:case 3:var se=3;break;default:se=w}var _e=w;w=se;try{return G()}finally{w=_e}},s.unstable_requestPaint=function(){te=!0},s.unstable_runWithPriority=function(G,se){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var _e=w;w=G;try{return se()}finally{w=_e}},s.unstable_scheduleCallback=function(G,se,_e){var Be=s.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Be+_e:Be):_e=Be,G){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=_e+Ze,G={id:E++,callback:se,priorityLevel:G,startTime:_e,expirationTime:Ze,sortIndex:-1},_e>Be?(G.sortIndex=_e,e(y,G),t(p)===null&&G===t(y)&&(W?(Ee(R),R=-1):W=!0,yt(Oe,_e-Be))):(G.sortIndex=Ze,e(p,G),Z||j||(Z=!0,Ie||(Ie=!0,P()))),G},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(G){var se=w;return function(){var _e=w;w=se;try{return G.apply(this,arguments)}finally{w=_e}}}})(mp)),mp}var zE;function kI(){return zE||(zE=1,dp.exports=PI()),dp.exports}var pp={exports:{}},mn={};var BE;function LI(){if(BE)return mn;BE=1;var s=fg();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:y,implementation:E}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,mn.createPortal=function(p,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,E)},mn.flushSync=function(p){var y=c.T,E=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=y,r.p=E,r.d.f()}},mn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},mn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},mn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var E=y.as,S=m(E,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:w,fetchPriority:j}):E==="script"&&r.d.X(p,{crossOrigin:S,integrity:w,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},mn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},mn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,S=m(E,y.crossOrigin);r.d.L(p,E,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},mn.preloadModule=function(p,y){if(typeof p=="string")if(y){var E=m(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},mn.requestFormReset=function(p){r.d.r(p)},mn.unstable_batchedUpdates=function(p,y){return p(y)},mn.useFormState=function(p,y,E){return c.H.useFormState(p,y,E)},mn.useFormStatus=function(){return c.H.useHostTransitionStatus()},mn.version="19.2.3",mn}var jE;function UI(){if(jE)return pp.exports;jE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),pp.exports=LI(),pp.exports}var qE;function zI(){if(qE)return Su;qE=1;var s=kI(),e=fg(),t=UI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(u(n)!==n)throw Error(r(188))}function y(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),n;if(d===l)return p(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,T=f.child;T;){if(T===a){_=!0,a=f,l=d;break}if(T===l){_=!0,l=f,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=f;break}if(T===l){_=!0,l=d,a=f;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var S=Object.assign,w=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),Ee=Symbol.for("react.consumer"),le=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),Oe=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function it(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case W:return"Fragment";case ge:return"Profiler";case te:return"StrictMode";case Oe:return"Suspense";case Ie:return"SuspenseList";case x:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Z:return"Portal";case le:return n.displayName||"Context";case Ee:return(n._context.displayName||"Context")+".Consumer";case Le:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return i=n.displayName||null,i!==null?i:it(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return it(n(i))}catch{}}return null}var yt=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Be=[],Ze=-1;function D(n){return{current:n}}function X(n){0>Ze||(n.current=Be[Ze],Be[Ze]=null,Ze--)}function ae(n,i){Ze++,Be[Ze]=n.current,n.current=i}var ue=D(null),we=D(null),Ce=D(null),Fe=D(null);function Rt(n,i){switch(ae(Ce,i),ae(we,n),ae(ue,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?iE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=iE(i),n=rE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(ue),ae(ue,n)}function mt(){X(ue),X(we),X(Ce)}function Qn(n){n.memoizedState!==null&&ae(Fe,n);var i=ue.current,a=rE(i,n.type);i!==a&&(ae(we,n),ae(ue,a))}function wi(n){we.current===n&&(X(ue),X(we)),Fe.current===n&&(X(Fe),_u._currentValue=_e)}var Ri,Gt;function rn(n){if(Ri===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ri=i&&i[1]||"",Gt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ri+n+Gt}var Ci=!1;function xi(n,i){if(!n||Ci)return"";Ci=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(F){var B=F}Reflect.construct(n,[],$)}else{try{$.call()}catch(F){B=F}n.call($.prototype)}}else{try{throw Error()}catch(F){B=F}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(F){if(F&&B&&typeof F.stack=="string")return[F.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var C=_.split(`
`),z=T.split(`
`);for(f=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(l===C.length||f===z.length)for(l=C.length-1,f=z.length-1;1<=l&&0<=f&&C[l]!==z[f];)f--;for(;1<=l&&0<=f;l--,f--)if(C[l]!==z[f]){if(l!==1||f!==1)do if(l--,f--,0>f||C[l]!==z[f]){var Q=`
`+C[l].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=l&&0<=f);break}}}finally{Ci=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?rn(a):""}function Ur(n,i){switch(n.tag){case 26:case 27:case 5:return rn(n.type);case 16:return rn("Lazy");case 13:return n.child!==i&&i!==null?rn("Suspense Fallback"):rn("Suspense");case 19:return rn("SuspenseList");case 0:case 15:return xi(n.type,!1);case 11:return xi(n.type.render,!1);case 1:return xi(n.type,!0);case 31:return rn("Activity");default:return""}}function Me(n){try{var i="",a=null;do i+=Ur(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Et=Object.prototype.hasOwnProperty,Ct=s.unstable_scheduleCallback,Di=s.unstable_cancelCallback,bl=s.unstable_shouldYield,Ha=s.unstable_requestPaint,sn=s.unstable_now,ir=s.unstable_getCurrentPriorityLevel,zs=s.unstable_ImmediatePriority,Bs=s.unstable_UserBlockingPriority,Ni=s.unstable_NormalPriority,js=s.unstable_LowPriority,Ga=s.unstable_IdlePriority,Ka=s.log,Qa=s.unstable_setDisableYieldValue,In=null,Kt=null;function wn(n){if(typeof Ka=="function"&&Qa(n),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(In,n)}catch{}}var It=Math.clz32?Math.clz32:K,Ya=Math.log,zr=Math.LN2;function K(n){return n>>>=0,n===0?32:31-(Ya(n)/zr|0)|0}var ie=256,re=262144,de=4194304;function Te(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function he(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=Te(l):(_&=T,_!==0?f=Te(_):a||(a=T&~n,a!==0&&(f=Te(a))))):(T=l&~d,T!==0?f=Te(T):_!==0?f=Te(_):a||(a=l&~n,a!==0&&(f=Te(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function me(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function We(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rr(){var n=de;return de<<=1,(de&62914560)===0&&(de=4194304),n}function an(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function qs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function pd(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,C=n.expirationTimes,z=n.hiddenUpdates;for(a=_&~a;0<a;){var Q=31-It(a),$=1<<Q;T[Q]=0,C[Q]=-1;var B=z[Q];if(B!==null)for(z[Q]=null,Q=0;Q<B.length;Q++){var F=B[Q];F!==null&&(F.lane&=-536870913)}a&=~$}l!==0&&Fs(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Fs(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-It(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function Sl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-It(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function Al(n,i){var a=i&-i;return a=(a&42)!==0?1:Hs(a),(a&(n.suspendedLanes|i))!==0?0:a}function Hs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function sr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ic(){var n=se.p;return n!==0?n:(n=window.event,n===void 0?32:RE(n.type))}function ci(n,i){var a=se.p;try{return se.p=n,i()}finally{se.p=a}}var hi=Math.random().toString(36).slice(2),Pt="__reactFiber$"+hi,Zt="__reactProps$"+hi,Vi="__reactContainer$"+hi,Xa="__reactEvents$"+hi,gd="__reactListeners$"+hi,wc="__reactHandles$"+hi,Rc="__reactResources$"+hi,Oi="__reactMarker$"+hi;function $a(n){delete n[Pt],delete n[Zt],delete n[Xa],delete n[gd],delete n[wc]}function Mi(n){var i=n[Pt];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Vi]||a[Pt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=hE(n);n!==null;){if(a=n[Pt])return a;n=hE(n)}return i}n=a,a=n.parentNode}return null}function Yn(n){if(n=n[Pt]||n[Vi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Pn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Pi(n){var i=n[Rc];return i||(i=n[Rc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function kt(n){n[Oi]=!0}var Il=new Set,wl={};function ki(n,i){Li(n,i),Li(n+"Capture",i)}function Li(n,i){for(wl[n]=i,n=0;n<i.length;n++)Il.add(i[n])}var Rl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cl={},xl={};function Cc(n){return Et.call(xl,n)?!0:Et.call(Cl,n)?!1:Rl.test(n)?xl[n]=!0:(Cl[n]=!0,!1)}function Ja(n,i,a){if(Cc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function kn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Lt(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Wt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Br(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Dl(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function rt(n){if(!n._valueTracker){var i=Br(n)?"checked":"value";n._valueTracker=Dl(n,i,""+n[i])}}function Gs(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Br(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Ui(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ks=/[\n"\\]/g;function Rn(n){return n.replace(Ks,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Za(n,i,a,l,f,d,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Wt(i)):n.value!==""+Wt(i)&&(n.value=""+Wt(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?Nl(n,_,Wt(i)):a!=null?Nl(n,_,Wt(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Wt(T):n.removeAttribute("name")}function xc(n,i,a,l,f,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){rt(n);return}a=a!=null?""+Wt(a):"",i=i!=null?""+Wt(i):a,T||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),rt(n)}function Nl(n,i,a){i==="number"&&Ui(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function jr(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Wt(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Dc(n,i,a){if(i!=null&&(i=""+Wt(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Wt(a):""}function qr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(yt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Wt(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),rt(n)}function Cn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Nc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Nc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Ol(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Vl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Vl(n,d,i[d])}function Wa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eo(n){return Fr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function fi(){}var Ml=null;function Xn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Hr=null,zi=null;function Qs(n){var i=Yn(n);if(i&&(n=i.stateNode)){var a=n[Zt]||null;e:switch(n=i.stateNode,i.type){case"input":if(Za(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Zt]||null;if(!f)throw Error(r(90));Za(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Gs(l)}break e;case"textarea":Dc(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&jr(n,!!a.multiple,i,!1)}}}var to=!1;function Gr(n,i,a){if(to)return n(i,a);to=!0;try{var l=n(i);return l}finally{if(to=!1,(Hr!==null||zi!==null)&&(Ih(),Hr&&(i=Hr,n=zi,zi=Hr=null,Qs(i),n)))for(i=0;i<n.length;i++)Qs(n[i])}}function di(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Zt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ys=!1;if($n)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){Ys=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{Ys=!1}var Bi=null,Pl=null,Xs=null;function kl(){if(Xs)return Xs;var n,i=Pl,a=i.length,l,f="value"in Bi?Bi.value:Bi.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return Xs=f.slice(n,1<l?1-l:void 0)}function $s(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ar(){return!0}function mi(){return!1}function on(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ar:mi,this.isPropagationStopped=mi,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),i}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ji=on(or),Kr=S({},or,{view:0,detail:0}),Ll=on(Kr),Qr,no,qi,io=S({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qi&&(qi&&n.type==="mousemove"?(Qr=n.screenX-qi.screenX,no=n.screenY-qi.screenY):no=Qr=0,qi=n),Qr)},movementY:function(n){return"movementY"in n?n.movementY:no}}),Ul=on(io),Js=S({},io,{dataTransfer:0}),Oc=on(Js),Mc=S({},Kr,{relatedTarget:0}),Zs=on(Mc),zl=S({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),Pc=on(zl),ro=S({},or,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kc=on(ro),Lc=S({},or,{data:0}),Fi=on(Lc),Uc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Bc[n])?!!i[n]:!1}function Yr(){return jc}var vn=S({},Kr,{key:function(n){if(n.key){var i=Uc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=$s(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yr,charCode:function(n){return n.type==="keypress"?$s(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$s(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qc=on(vn),Fc=S({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lr=on(Fc),h=S({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yr}),g=on(h),v=S({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=on(v),L=S({},io,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),q=on(L),ne=S({},or,{newState:0,oldState:0}),Pe=on(ne),Vt=[9,13,27,32],et=$n&&"CompositionEvent"in window,Tt=null;$n&&"documentMode"in document&&(Tt=document.documentMode);var Jn=$n&&"TextEvent"in window&&!Tt,Hi=$n&&(!et||Tt&&8<Tt&&11>=Tt),pi=" ",gi=!1;function Ws(n,i){switch(n){case"keyup":return Vt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function so(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ao=!1;function nA(n,i){switch(n){case"compositionend":return so(i);case"keypress":return i.which!==32?null:(gi=!0,pi);case"textInput":return n=i.data,n===pi&&gi?null:n;default:return null}}function iA(n,i){if(ao)return n==="compositionend"||!et&&Ws(n,i)?(n=kl(),Xs=Pl=Bi=null,ao=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Hi&&i.locale!=="ko"?null:i.data;default:return null}}var rA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function my(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!rA[n.type]:i==="textarea"}function py(n,i,a,l){Hr?zi?zi.push(l):zi=[l]:Hr=l,i=Vh(i,"onChange"),0<i.length&&(a=new ji("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Bl=null,jl=null;function sA(n){Jv(n,0)}function Hc(n){var i=Pn(n);if(Gs(i))return n}function gy(n,i){if(n==="change")return i}var yy=!1;if($n){var yd;if($n){var _d="oninput"in document;if(!_d){var _y=document.createElement("div");_y.setAttribute("oninput","return;"),_d=typeof _y.oninput=="function"}yd=_d}else yd=!1;yy=yd&&(!document.documentMode||9<document.documentMode)}function vy(){Bl&&(Bl.detachEvent("onpropertychange",Ey),jl=Bl=null)}function Ey(n){if(n.propertyName==="value"&&Hc(jl)){var i=[];py(i,jl,n,Xn(n)),Gr(sA,i)}}function aA(n,i,a){n==="focusin"?(vy(),Bl=i,jl=a,Bl.attachEvent("onpropertychange",Ey)):n==="focusout"&&vy()}function oA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hc(jl)}function lA(n,i){if(n==="click")return Hc(i)}function uA(n,i){if(n==="input"||n==="change")return Hc(i)}function cA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Ln=typeof Object.is=="function"?Object.is:cA;function ql(n,i){if(Ln(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Et.call(i,f)||!Ln(n[f],i[f]))return!1}return!0}function Ty(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function by(n,i){var a=Ty(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ty(a)}}function Sy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Sy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Ay(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ui(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ui(n.document)}return i}function vd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var hA=$n&&"documentMode"in document&&11>=document.documentMode,oo=null,Ed=null,Fl=null,Td=!1;function Iy(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Td||oo==null||oo!==Ui(l)||(l=oo,"selectionStart"in l&&vd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Fl&&ql(Fl,l)||(Fl=l,l=Vh(Ed,"onSelect"),0<l.length&&(i=new ji("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=oo)))}function ea(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var lo={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionrun:ea("Transition","TransitionRun"),transitionstart:ea("Transition","TransitionStart"),transitioncancel:ea("Transition","TransitionCancel"),transitionend:ea("Transition","TransitionEnd")},bd={},wy={};$n&&(wy=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function ta(n){if(bd[n])return bd[n];if(!lo[n])return n;var i=lo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in wy)return bd[n]=i[a];return n}var Ry=ta("animationend"),Cy=ta("animationiteration"),xy=ta("animationstart"),fA=ta("transitionrun"),dA=ta("transitionstart"),mA=ta("transitioncancel"),Dy=ta("transitionend"),Ny=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function yi(n,i){Ny.set(n,i),ki(i,[n])}var Gc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Zn=[],uo=0,Ad=0;function Kc(){for(var n=uo,i=Ad=uo=0;i<n;){var a=Zn[i];Zn[i++]=null;var l=Zn[i];Zn[i++]=null;var f=Zn[i];Zn[i++]=null;var d=Zn[i];if(Zn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Vy(a,f,d)}}function Qc(n,i,a,l){Zn[uo++]=n,Zn[uo++]=i,Zn[uo++]=a,Zn[uo++]=l,Ad|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Id(n,i,a,l){return Qc(n,i,a,l),Yc(n)}function na(n,i){return Qc(n,null,null,i),Yc(n)}function Vy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-It(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Yc(n){if(50<hu)throw hu=0,Mm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var co={};function pA(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(n,i,a,l){return new pA(n,i,a,l)}function wd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ur(n,i){var a=n.alternate;return a===null?(a=Un(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Oy(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Xc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")wd(n)&&(_=1);else if(typeof n=="string")_=EI(n,a,ue.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case x:return n=Un(31,a,i,f),n.elementType=x,n.lanes=d,n;case W:return ia(a.children,f,d,i);case te:_=8,f|=24;break;case ge:return n=Un(12,a,i,f|2),n.elementType=ge,n.lanes=d,n;case Oe:return n=Un(13,a,i,f),n.elementType=Oe,n.lanes=d,n;case Ie:return n=Un(19,a,i,f),n.elementType=Ie,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case le:_=10;break e;case Ee:_=9;break e;case Le:_=11;break e;case R:_=14;break e;case A:_=16,l=null;break e}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=Un(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function ia(n,i,a,l){return n=Un(7,n,l,i),n.lanes=a,n}function Rd(n,i,a){return n=Un(6,n,null,i),n.lanes=a,n}function My(n){var i=Un(18,null,null,0);return i.stateNode=n,i}function Cd(n,i,a){return i=Un(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Py=new WeakMap;function Wn(n,i){if(typeof n=="object"&&n!==null){var a=Py.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Me(i)},Py.set(n,i),i)}return{value:n,source:i,stack:Me(i)}}var ho=[],fo=0,$c=null,Hl=0,ei=[],ti=0,Xr=null,Gi=1,Ki="";function cr(n,i){ho[fo++]=Hl,ho[fo++]=$c,$c=n,Hl=i}function ky(n,i,a){ei[ti++]=Gi,ei[ti++]=Ki,ei[ti++]=Xr,Xr=n;var l=Gi;n=Ki;var f=32-It(l)-1;l&=~(1<<f),a+=1;var d=32-It(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Gi=1<<32-It(i)+f|a<<f|l,Ki=d+n}else Gi=1<<d|a<<f|l,Ki=n}function xd(n){n.return!==null&&(cr(n,1),ky(n,1,0))}function Dd(n){for(;n===$c;)$c=ho[--fo],ho[fo]=null,Hl=ho[--fo],ho[fo]=null;for(;n===Xr;)Xr=ei[--ti],ei[ti]=null,Ki=ei[--ti],ei[ti]=null,Gi=ei[--ti],ei[ti]=null}function Ly(n,i){ei[ti++]=Gi,ei[ti++]=Ki,ei[ti++]=Xr,Gi=i.id,Ki=i.overflow,Xr=n}var ln=null,_t=null,Qe=!1,$r=null,ni=!1,Nd=Error(r(519));function Jr(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(Wn(i,n)),Nd}function Uy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Pt]=n,i[Zt]=l,a){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(a=0;a<du.length;a++)qe(du[a],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":qe("invalid",i),xc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":qe("invalid",i);break;case"textarea":qe("invalid",i),qr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||tE(i.textContent,a)?(l.popover!=null&&(qe("beforetoggle",i),qe("toggle",i)),l.onScroll!=null&&qe("scroll",i),l.onScrollEnd!=null&&qe("scrollend",i),l.onClick!=null&&(i.onclick=fi),i=!0):i=!1,i||Jr(n,!0)}function zy(n){for(ln=n.return;ln;)switch(ln.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:ln=ln.return}}function mo(n){if(n!==ln)return!1;if(!Qe)return zy(n),Qe=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Xm(n.type,n.memoizedProps)),a=!a),a&&_t&&Jr(n),zy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));_t=cE(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));_t=cE(n)}else i===27?(i=_t,hs(n.type)?(n=ep,ep=null,_t=n):_t=i):_t=ln?ri(n.stateNode.nextSibling):null;return!0}function ra(){_t=ln=null,Qe=!1}function Vd(){var n=$r;return n!==null&&(Vn===null?Vn=n:Vn.push.apply(Vn,n),$r=null),n}function Gl(n){$r===null?$r=[n]:$r.push(n)}var Od=D(null),sa=null,hr=null;function Zr(n,i,a){ae(Od,i._currentValue),i._currentValue=a}function fr(n){n._currentValue=Od.current,X(Od)}function Md(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Pd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=f;for(var C=0;C<i.length;C++)if(T.context===i[C]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Md(d.return,a,n),l||(_=null);break e}d=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Md(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function po(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=f.type;Ln(f.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(f===Fe.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(_u):n=[_u])}f=f.return}n!==null&&Pd(i,n,a,l),i.flags|=262144}function Jc(n){for(n=n.firstContext;n!==null;){if(!Ln(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function aa(n){sa=n,hr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function un(n){return By(sa,n)}function Zc(n,i){return sa===null&&aa(n),By(n,i)}function By(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},hr===null){if(n===null)throw Error(r(308));hr=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else hr=hr.next=i;return a}var gA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},yA=s.unstable_scheduleCallback,_A=s.unstable_NormalPriority,Ut={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kd(){return{controller:new gA,data:new Map,refCount:0}}function Kl(n){n.refCount--,n.refCount===0&&yA(_A,function(){n.controller.abort()})}var Ql=null,Ld=0,go=0,yo=null;function vA(n,i){if(Ql===null){var a=Ql=[];Ld=0,go=Bm(),yo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ld++,i.then(jy,jy),i}function jy(){if(--Ld===0&&Ql!==null){yo!==null&&(yo.status="fulfilled");var n=Ql;Ql=null,go=0,yo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function EA(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var qy=G.S;G.S=function(n,i){Iv=sn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&vA(n,i),qy!==null&&qy(n,i)};var oa=D(null);function Ud(){var n=oa.current;return n!==null?n:pt.pooledCache}function Wc(n,i){i===null?ae(oa,oa.current):ae(oa,i.pool)}function Fy(){var n=Ud();return n===null?null:{parent:Ut._currentValue,pool:n}}var _o=Error(r(460)),zd=Error(r(474)),eh=Error(r(542)),th={then:function(){}};function Hy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Gy(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(fi,fi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qy(n),n;default:if(typeof i.status=="string")i.then(fi,fi);else{if(n=pt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qy(n),n}throw ua=i,_o}}function la(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ua=a,_o):a}}var ua=null;function Ky(){if(ua===null)throw Error(r(459));var n=ua;return ua=null,n}function Qy(n){if(n===_o||n===eh)throw Error(r(483))}var vo=null,Yl=0;function nh(n){var i=Yl;return Yl+=1,vo===null&&(vo=[]),Gy(vo,n,i)}function Xl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function ih(n,i){throw i.$$typeof===w?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Yy(n){function i(M,V){if(n){var U=M.deletions;U===null?(M.deletions=[V],M.flags|=16):U.push(V)}}function a(M,V){if(!n)return null;for(;V!==null;)i(M,V),V=V.sibling;return null}function l(M){for(var V=new Map;M!==null;)M.key!==null?V.set(M.key,M):V.set(M.index,M),M=M.sibling;return V}function f(M,V){return M=ur(M,V),M.index=0,M.sibling=null,M}function d(M,V,U){return M.index=U,n?(U=M.alternate,U!==null?(U=U.index,U<V?(M.flags|=67108866,V):U):(M.flags|=67108866,V)):(M.flags|=1048576,V)}function _(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function T(M,V,U,Y){return V===null||V.tag!==6?(V=Rd(U,M.mode,Y),V.return=M,V):(V=f(V,U),V.return=M,V)}function C(M,V,U,Y){var be=U.type;return be===W?Q(M,V,U.props.children,Y,U.key):V!==null&&(V.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===A&&la(be)===V.type)?(V=f(V,U.props),Xl(V,U),V.return=M,V):(V=Xc(U.type,U.key,U.props,null,M.mode,Y),Xl(V,U),V.return=M,V)}function z(M,V,U,Y){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=Cd(U,M.mode,Y),V.return=M,V):(V=f(V,U.children||[]),V.return=M,V)}function Q(M,V,U,Y,be){return V===null||V.tag!==7?(V=ia(U,M.mode,Y,be),V.return=M,V):(V=f(V,U),V.return=M,V)}function $(M,V,U){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Rd(""+V,M.mode,U),V.return=M,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case j:return U=Xc(V.type,V.key,V.props,null,M.mode,U),Xl(U,V),U.return=M,U;case Z:return V=Cd(V,M.mode,U),V.return=M,V;case A:return V=la(V),$(M,V,U)}if(yt(V)||P(V))return V=ia(V,M.mode,U,null),V.return=M,V;if(typeof V.then=="function")return $(M,nh(V),U);if(V.$$typeof===le)return $(M,Zc(M,V),U);ih(M,V)}return null}function B(M,V,U,Y){var be=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return be!==null?null:T(M,V,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case j:return U.key===be?C(M,V,U,Y):null;case Z:return U.key===be?z(M,V,U,Y):null;case A:return U=la(U),B(M,V,U,Y)}if(yt(U)||P(U))return be!==null?null:Q(M,V,U,Y,null);if(typeof U.then=="function")return B(M,V,nh(U),Y);if(U.$$typeof===le)return B(M,V,Zc(M,U),Y);ih(M,U)}return null}function F(M,V,U,Y,be){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return M=M.get(U)||null,T(V,M,""+Y,be);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case j:return M=M.get(Y.key===null?U:Y.key)||null,C(V,M,Y,be);case Z:return M=M.get(Y.key===null?U:Y.key)||null,z(V,M,Y,be);case A:return Y=la(Y),F(M,V,U,Y,be)}if(yt(Y)||P(Y))return M=M.get(U)||null,Q(V,M,Y,be,null);if(typeof Y.then=="function")return F(M,V,U,nh(Y),be);if(Y.$$typeof===le)return F(M,V,U,Zc(V,Y),be);ih(V,Y)}return null}function fe(M,V,U,Y){for(var be=null,$e=null,ye=V,Ue=V=0,Ge=null;ye!==null&&Ue<U.length;Ue++){ye.index>Ue?(Ge=ye,ye=null):Ge=ye.sibling;var Je=B(M,ye,U[Ue],Y);if(Je===null){ye===null&&(ye=Ge);break}n&&ye&&Je.alternate===null&&i(M,ye),V=d(Je,V,Ue),$e===null?be=Je:$e.sibling=Je,$e=Je,ye=Ge}if(Ue===U.length)return a(M,ye),Qe&&cr(M,Ue),be;if(ye===null){for(;Ue<U.length;Ue++)ye=$(M,U[Ue],Y),ye!==null&&(V=d(ye,V,Ue),$e===null?be=ye:$e.sibling=ye,$e=ye);return Qe&&cr(M,Ue),be}for(ye=l(ye);Ue<U.length;Ue++)Ge=F(ye,M,Ue,U[Ue],Y),Ge!==null&&(n&&Ge.alternate!==null&&ye.delete(Ge.key===null?Ue:Ge.key),V=d(Ge,V,Ue),$e===null?be=Ge:$e.sibling=Ge,$e=Ge);return n&&ye.forEach(function(gs){return i(M,gs)}),Qe&&cr(M,Ue),be}function Ae(M,V,U,Y){if(U==null)throw Error(r(151));for(var be=null,$e=null,ye=V,Ue=V=0,Ge=null,Je=U.next();ye!==null&&!Je.done;Ue++,Je=U.next()){ye.index>Ue?(Ge=ye,ye=null):Ge=ye.sibling;var gs=B(M,ye,Je.value,Y);if(gs===null){ye===null&&(ye=Ge);break}n&&ye&&gs.alternate===null&&i(M,ye),V=d(gs,V,Ue),$e===null?be=gs:$e.sibling=gs,$e=gs,ye=Ge}if(Je.done)return a(M,ye),Qe&&cr(M,Ue),be;if(ye===null){for(;!Je.done;Ue++,Je=U.next())Je=$(M,Je.value,Y),Je!==null&&(V=d(Je,V,Ue),$e===null?be=Je:$e.sibling=Je,$e=Je);return Qe&&cr(M,Ue),be}for(ye=l(ye);!Je.done;Ue++,Je=U.next())Je=F(ye,M,Ue,Je.value,Y),Je!==null&&(n&&Je.alternate!==null&&ye.delete(Je.key===null?Ue:Je.key),V=d(Je,V,Ue),$e===null?be=Je:$e.sibling=Je,$e=Je);return n&&ye.forEach(function(NI){return i(M,NI)}),Qe&&cr(M,Ue),be}function ft(M,V,U,Y){if(typeof U=="object"&&U!==null&&U.type===W&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case j:e:{for(var be=U.key;V!==null;){if(V.key===be){if(be=U.type,be===W){if(V.tag===7){a(M,V.sibling),Y=f(V,U.props.children),Y.return=M,M=Y;break e}}else if(V.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===A&&la(be)===V.type){a(M,V.sibling),Y=f(V,U.props),Xl(Y,U),Y.return=M,M=Y;break e}a(M,V);break}else i(M,V);V=V.sibling}U.type===W?(Y=ia(U.props.children,M.mode,Y,U.key),Y.return=M,M=Y):(Y=Xc(U.type,U.key,U.props,null,M.mode,Y),Xl(Y,U),Y.return=M,M=Y)}return _(M);case Z:e:{for(be=U.key;V!==null;){if(V.key===be)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){a(M,V.sibling),Y=f(V,U.children||[]),Y.return=M,M=Y;break e}else{a(M,V);break}else i(M,V);V=V.sibling}Y=Cd(U,M.mode,Y),Y.return=M,M=Y}return _(M);case A:return U=la(U),ft(M,V,U,Y)}if(yt(U))return fe(M,V,U,Y);if(P(U)){if(be=P(U),typeof be!="function")throw Error(r(150));return U=be.call(U),Ae(M,V,U,Y)}if(typeof U.then=="function")return ft(M,V,nh(U),Y);if(U.$$typeof===le)return ft(M,V,Zc(M,U),Y);ih(M,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,V!==null&&V.tag===6?(a(M,V.sibling),Y=f(V,U),Y.return=M,M=Y):(a(M,V),Y=Rd(U,M.mode,Y),Y.return=M,M=Y),_(M)):a(M,V)}return function(M,V,U,Y){try{Yl=0;var be=ft(M,V,U,Y);return vo=null,be}catch(ye){if(ye===_o||ye===eh)throw ye;var $e=Un(29,ye,null,M.mode);return $e.lanes=Y,$e.return=M,$e}}}var ca=Yy(!0),Xy=Yy(!1),Wr=!1;function Bd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function es(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ts(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Yc(n),Vy(n,null,a),i}return Qc(n,l,i,a),Yc(n)}function $l(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Sl(n,a)}}function qd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Fd=!1;function Jl(){if(Fd){var n=yo;if(n!==null)throw n}}function Zl(n,i,a,l){Fd=!1;var f=n.updateQueue;Wr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var C=T,z=C.next;C.next=null,_===null?d=z:_.next=z,_=C;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==_&&(T===null?Q.firstBaseUpdate=z:T.next=z,Q.lastBaseUpdate=C))}if(d!==null){var $=f.baseState;_=0,Q=z=C=null,T=d;do{var B=T.lane&-536870913,F=B!==T.lane;if(F?(He&B)===B:(l&B)===B){B!==0&&B===go&&(Fd=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=n,Ae=T;B=i;var ft=a;switch(Ae.tag){case 1:if(fe=Ae.payload,typeof fe=="function"){$=fe.call(ft,$,B);break e}$=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Ae.payload,B=typeof fe=="function"?fe.call(ft,$,B):fe,B==null)break e;$=S({},$,B);break e;case 2:Wr=!0}}B=T.callback,B!==null&&(n.flags|=64,F&&(n.flags|=8192),F=f.callbacks,F===null?f.callbacks=[B]:F.push(B))}else F={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(z=Q=F,C=$):Q=Q.next=F,_|=B;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;F=T,T=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);Q===null&&(C=$),f.baseState=C,f.firstBaseUpdate=z,f.lastBaseUpdate=Q,d===null&&(f.shared.lanes=0),as|=_,n.lanes=_,n.memoizedState=$}}function $y(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Jy(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)$y(a[n],i)}var Eo=D(null),rh=D(0);function Zy(n,i){n=Tr,ae(rh,n),ae(Eo,i),Tr=n|i.baseLanes}function Hd(){ae(rh,Tr),ae(Eo,Eo.current)}function Gd(){Tr=rh.current,X(Eo),X(rh)}var zn=D(null),ii=null;function ns(n){var i=n.alternate;ae(Ot,Ot.current&1),ae(zn,n),ii===null&&(i===null||Eo.current!==null||i.memoizedState!==null)&&(ii=n)}function Kd(n){ae(Ot,Ot.current),ae(zn,n),ii===null&&(ii=n)}function Wy(n){n.tag===22?(ae(Ot,Ot.current),ae(zn,n),ii===null&&(ii=n)):is()}function is(){ae(Ot,Ot.current),ae(zn,zn.current)}function Bn(n){X(zn),ii===n&&(ii=null),X(Ot)}var Ot=D(0);function sh(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Zm(a)||Wm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var dr=0,ke=null,ct=null,zt=null,ah=!1,To=!1,ha=!1,oh=0,Wl=0,bo=null,TA=0;function xt(){throw Error(r(321))}function Qd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Ln(n[a],i[a]))return!1;return!0}function Yd(n,i,a,l,f,d){return dr=d,ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=n===null||n.memoizedState===null?k_:um,ha=!1,d=a(l,f),ha=!1,To&&(d=t_(i,a,l,f)),e_(n),d}function e_(n){G.H=nu;var i=ct!==null&&ct.next!==null;if(dr=0,zt=ct=ke=null,ah=!1,Wl=0,bo=null,i)throw Error(r(300));n===null||Bt||(n=n.dependencies,n!==null&&Jc(n)&&(Bt=!0))}function t_(n,i,a,l){ke=n;var f=0;do{if(To&&(bo=null),Wl=0,To=!1,25<=f)throw Error(r(301));if(f+=1,zt=ct=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=L_,d=i(a,l)}while(To);return d}function bA(){var n=G.H,i=n.useState()[0];return i=typeof i.then=="function"?eu(i):i,n=n.useState()[0],(ct!==null?ct.memoizedState:null)!==n&&(ke.flags|=1024),i}function Xd(){var n=oh!==0;return oh=0,n}function $d(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Jd(n){if(ah){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ah=!1}dr=0,zt=ct=ke=null,To=!1,Wl=oh=0,bo=null}function En(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?ke.memoizedState=zt=n:zt=zt.next=n,zt}function Mt(){if(ct===null){var n=ke.alternate;n=n!==null?n.memoizedState:null}else n=ct.next;var i=zt===null?ke.memoizedState:zt.next;if(i!==null)zt=i,ct=n;else{if(n===null)throw ke.alternate===null?Error(r(467)):Error(r(310));ct=n,n={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},zt===null?ke.memoizedState=zt=n:zt=zt.next=n}return zt}function lh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eu(n){var i=Wl;return Wl+=1,bo===null&&(bo=[]),n=Gy(bo,n,i),i=ke,(zt===null?i.memoizedState:zt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?k_:um),n}function uh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return eu(n);if(n.$$typeof===le)return un(n)}throw Error(r(438,String(n)))}function Zd(n){var i=null,a=ke.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=lh(),ke.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=O;return i.index++,a}function mr(n,i){return typeof i=="function"?i(n):i}function ch(n){var i=Mt();return Wd(i,ct,n)}function Wd(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var T=_=null,C=null,z=i,Q=!1;do{var $=z.lane&-536870913;if($!==z.lane?(He&$)===$:(dr&$)===$){var B=z.revertLane;if(B===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),$===go&&(Q=!0);else if((dr&B)===B){z=z.next,B===go&&(Q=!0);continue}else $={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(T=C=$,_=d):C=C.next=$,ke.lanes|=B,as|=B;$=z.action,ha&&a(d,$),d=z.hasEagerState?z.eagerState:a(d,$)}else B={lane:$,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(T=C=B,_=d):C=C.next=B,ke.lanes|=$,as|=$;z=z.next}while(z!==null&&z!==i);if(C===null?_=d:C.next=T,!Ln(d,n.memoizedState)&&(Bt=!0,Q&&(a=yo,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=C,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function em(n){var i=Mt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Ln(d,i.memoizedState)||(Bt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function n_(n,i,a){var l=ke,f=Mt(),d=Qe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Ln((ct||f).memoizedState,a);if(_&&(f.memoizedState=a,Bt=!0),f=f.queue,im(s_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||zt!==null&&zt.memoizedState.tag&1){if(l.flags|=2048,So(9,{destroy:void 0},r_.bind(null,l,f,a,i),null),pt===null)throw Error(r(349));d||(dr&127)!==0||i_(l,i,a)}return a}function i_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=ke.updateQueue,i===null?(i=lh(),ke.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function r_(n,i,a,l){i.value=a,i.getSnapshot=l,a_(i)&&o_(n)}function s_(n,i,a){return a(function(){a_(i)&&o_(n)})}function a_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Ln(n,a)}catch{return!0}}function o_(n){var i=na(n,2);i!==null&&On(i,n,2)}function tm(n){var i=En();if(typeof n=="function"){var a=n;if(n=a(),ha){wn(!0);try{a()}finally{wn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:n},i}function l_(n,i,a,l){return n.baseState=a,Wd(n,ct,typeof l=="function"?l:mr)}function SA(n,i,a,l,f){if(dh(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};G.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,u_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function u_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=G.T,_={};G.T=_;try{var T=a(f,l),C=G.S;C!==null&&C(_,T),c_(n,i,T)}catch(z){nm(n,i,z)}finally{d!==null&&_.types!==null&&(d.types=_.types),G.T=d}}else try{d=a(f,l),c_(n,i,d)}catch(z){nm(n,i,z)}}function c_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){h_(n,i,l)},function(l){return nm(n,i,l)}):h_(n,i,a)}function h_(n,i,a){i.status="fulfilled",i.value=a,f_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,u_(n,a)))}function nm(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,f_(i),i=i.next;while(i!==l)}n.action=null}function f_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function d_(n,i){return i}function m_(n,i){if(Qe){var a=pt.formState;if(a!==null){e:{var l=ke;if(Qe){if(_t){t:{for(var f=_t,d=ni;f.nodeType!==8;){if(!d){f=null;break t}if(f=ri(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){_t=ri(f.nextSibling),l=f.data==="F!";break e}}Jr(l)}l=!1}l&&(i=a[0])}}return a=En(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d_,lastRenderedState:i},a.queue=l,a=O_.bind(null,ke,l),l.dispatch=a,l=tm(!1),d=lm.bind(null,ke,!1,l.queue),l=En(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=SA.bind(null,ke,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function p_(n){var i=Mt();return g_(i,ct,n)}function g_(n,i,a){if(i=Wd(n,i,d_)[0],n=ch(mr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=eu(i)}catch(_){throw _===_o?eh:_}else l=i;i=Mt();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(ke.flags|=2048,So(9,{destroy:void 0},AA.bind(null,f,a),null)),[l,d,n]}function AA(n,i){n.action=i}function y_(n){var i=Mt(),a=ct;if(a!==null)return g_(i,a,n);Mt(),i=i.memoizedState,a=Mt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function So(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=ke.updateQueue,i===null&&(i=lh(),ke.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function __(){return Mt().memoizedState}function hh(n,i,a,l){var f=En();ke.flags|=n,f.memoizedState=So(1|i,{destroy:void 0},a,l===void 0?null:l)}function fh(n,i,a,l){var f=Mt();l=l===void 0?null:l;var d=f.memoizedState.inst;ct!==null&&l!==null&&Qd(l,ct.memoizedState.deps)?f.memoizedState=So(i,d,a,l):(ke.flags|=n,f.memoizedState=So(1|i,d,a,l))}function v_(n,i){hh(8390656,8,n,i)}function im(n,i){fh(2048,8,n,i)}function IA(n){ke.flags|=4;var i=ke.updateQueue;if(i===null)i=lh(),ke.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function E_(n){var i=Mt().memoizedState;return IA({ref:i,nextImpl:n}),function(){if((tt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function T_(n,i){return fh(4,2,n,i)}function b_(n,i){return fh(4,4,n,i)}function S_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function A_(n,i,a){a=a!=null?a.concat([n]):null,fh(4,4,S_.bind(null,i,n),a)}function rm(){}function I_(n,i){var a=Mt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Qd(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function w_(n,i){var a=Mt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Qd(i,l[1]))return l[0];if(l=n(),ha){wn(!0);try{n()}finally{wn(!1)}}return a.memoizedState=[l,i],l}function sm(n,i,a){return a===void 0||(dr&1073741824)!==0&&(He&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=Rv(),ke.lanes|=n,as|=n,a)}function R_(n,i,a,l){return Ln(a,i)?a:Eo.current!==null?(n=sm(n,a,l),Ln(n,i)||(Bt=!0),n):(dr&42)===0||(dr&1073741824)!==0&&(He&261930)===0?(Bt=!0,n.memoizedState=a):(n=Rv(),ke.lanes|=n,as|=n,i)}function C_(n,i,a,l,f){var d=se.p;se.p=d!==0&&8>d?d:8;var _=G.T,T={};G.T=T,lm(n,!1,i,a);try{var C=f(),z=G.S;if(z!==null&&z(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Q=EA(C,l);tu(n,i,Q,Fn(n))}else tu(n,i,l,Fn(n))}catch($){tu(n,i,{then:function(){},status:"rejected",reason:$},Fn())}finally{se.p=d,_!==null&&T.types!==null&&(_.types=T.types),G.T=_}}function wA(){}function am(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=x_(n).queue;C_(n,f,i,_e,a===null?wA:function(){return D_(n),a(l)})}function x_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:_e},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function D_(n){var i=x_(n);i.next===null&&(i=n.alternate.memoizedState),tu(n,i.next.queue,{},Fn())}function om(){return un(_u)}function N_(){return Mt().memoizedState}function V_(){return Mt().memoizedState}function RA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Fn();n=es(a);var l=ts(i,n,a);l!==null&&(On(l,i,a),$l(l,i,a)),i={cache:kd()},n.payload=i;return}i=i.return}}function CA(n,i,a){var l=Fn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},dh(n)?M_(i,a):(a=Id(n,i,a,l),a!==null&&(On(a,n,l),P_(a,i,l)))}function O_(n,i,a){var l=Fn();tu(n,i,a,l)}function tu(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(dh(n))M_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,T=d(_,a);if(f.hasEagerState=!0,f.eagerState=T,Ln(T,_))return Qc(n,i,f,0),pt===null&&Kc(),!1}catch{}if(a=Id(n,i,f,l),a!==null)return On(a,n,l),P_(a,i,l),!0}return!1}function lm(n,i,a,l){if(l={lane:2,revertLane:Bm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},dh(n)){if(i)throw Error(r(479))}else i=Id(n,a,l,2),i!==null&&On(i,n,2)}function dh(n){var i=n.alternate;return n===ke||i!==null&&i===ke}function M_(n,i){To=ah=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function P_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Sl(n,a)}}var nu={readContext:un,use:uh,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};nu.useEffectEvent=xt;var k_={readContext:un,use:uh,useCallback:function(n,i){return En().memoizedState=[n,i===void 0?null:i],n},useContext:un,useEffect:v_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,hh(4194308,4,S_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return hh(4194308,4,n,i)},useInsertionEffect:function(n,i){hh(4,2,n,i)},useMemo:function(n,i){var a=En();i=i===void 0?null:i;var l=n();if(ha){wn(!0);try{n()}finally{wn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=En();if(a!==void 0){var f=a(i);if(ha){wn(!0);try{a(i)}finally{wn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=CA.bind(null,ke,n),[l.memoizedState,n]},useRef:function(n){var i=En();return n={current:n},i.memoizedState=n},useState:function(n){n=tm(n);var i=n.queue,a=O_.bind(null,ke,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:rm,useDeferredValue:function(n,i){var a=En();return sm(a,n,i)},useTransition:function(){var n=tm(!1);return n=C_.bind(null,ke,n.queue,!0,!1),En().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=ke,f=En();if(Qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),pt===null)throw Error(r(349));(He&127)!==0||i_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,v_(s_.bind(null,l,d,n),[n]),l.flags|=2048,So(9,{destroy:void 0},r_.bind(null,l,d,a,i),null),a},useId:function(){var n=En(),i=pt.identifierPrefix;if(Qe){var a=Ki,l=Gi;a=(l&~(1<<32-It(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=oh++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=TA++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:om,useFormState:m_,useActionState:m_,useOptimistic:function(n){var i=En();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=lm.bind(null,ke,!0,a),a.dispatch=i,[n,i]},useMemoCache:Zd,useCacheRefresh:function(){return En().memoizedState=RA.bind(null,ke)},useEffectEvent:function(n){var i=En(),a={impl:n};return i.memoizedState=a,function(){if((tt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},um={readContext:un,use:uh,useCallback:I_,useContext:un,useEffect:im,useImperativeHandle:A_,useInsertionEffect:T_,useLayoutEffect:b_,useMemo:w_,useReducer:ch,useRef:__,useState:function(){return ch(mr)},useDebugValue:rm,useDeferredValue:function(n,i){var a=Mt();return R_(a,ct.memoizedState,n,i)},useTransition:function(){var n=ch(mr)[0],i=Mt().memoizedState;return[typeof n=="boolean"?n:eu(n),i]},useSyncExternalStore:n_,useId:N_,useHostTransitionStatus:om,useFormState:p_,useActionState:p_,useOptimistic:function(n,i){var a=Mt();return l_(a,ct,n,i)},useMemoCache:Zd,useCacheRefresh:V_};um.useEffectEvent=E_;var L_={readContext:un,use:uh,useCallback:I_,useContext:un,useEffect:im,useImperativeHandle:A_,useInsertionEffect:T_,useLayoutEffect:b_,useMemo:w_,useReducer:em,useRef:__,useState:function(){return em(mr)},useDebugValue:rm,useDeferredValue:function(n,i){var a=Mt();return ct===null?sm(a,n,i):R_(a,ct.memoizedState,n,i)},useTransition:function(){var n=em(mr)[0],i=Mt().memoizedState;return[typeof n=="boolean"?n:eu(n),i]},useSyncExternalStore:n_,useId:N_,useHostTransitionStatus:om,useFormState:y_,useActionState:y_,useOptimistic:function(n,i){var a=Mt();return ct!==null?l_(a,ct,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Zd,useCacheRefresh:V_};L_.useEffectEvent=E_;function cm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:S({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var hm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Fn(),f=es(l);f.payload=i,a!=null&&(f.callback=a),i=ts(n,f,l),i!==null&&(On(i,n,l),$l(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Fn(),f=es(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=ts(n,f,l),i!==null&&(On(i,n,l),$l(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Fn(),l=es(a);l.tag=2,i!=null&&(l.callback=i),i=ts(n,l,a),i!==null&&(On(i,n,a),$l(i,n,a))}};function U_(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!ql(a,l)||!ql(f,d):!0}function z_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&hm.enqueueReplaceState(i,i.state,null)}function fa(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=S({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function B_(n){Gc(n)}function j_(n){console.error(n)}function q_(n){Gc(n)}function mh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function F_(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function fm(n,i,a){return a=es(a),a.tag=3,a.payload={element:null},a.callback=function(){mh(n,i)},a}function H_(n){return n=es(n),n.tag=3,n}function G_(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){F_(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){F_(i,a,l),typeof f!="function"&&(os===null?os=new Set([this]):os.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function xA(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&po(i,a,f,!0),a=zn.current,a!==null){switch(a.tag){case 31:case 13:return ii===null?wh():a.alternate===null&&Dt===0&&(Dt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===th?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Lm(n,l,f)),!1;case 22:return a.flags|=65536,l===th?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Lm(n,l,f)),!1}throw Error(r(435,a.tag))}return Lm(n,l,f),wh(),!1}if(Qe)return i=zn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Nd&&(n=Error(r(422),{cause:l}),Gl(Wn(n,a)))):(l!==Nd&&(i=Error(r(423),{cause:l}),Gl(Wn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Wn(l,a),f=fm(n.stateNode,l,f),qd(n,f),Dt!==4&&(Dt=2)),!1;var d=Error(r(520),{cause:l});if(d=Wn(d,a),cu===null?cu=[d]:cu.push(d),Dt!==4&&(Dt=2),i===null)return!0;l=Wn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=fm(a.stateNode,l,n),qd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(os===null||!os.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=H_(f),G_(f,n,a,l),qd(a,f),!1}a=a.return}while(a!==null);return!1}var dm=Error(r(461)),Bt=!1;function cn(n,i,a,l){i.child=n===null?Xy(i,null,a,l):ca(i,n.child,a,l)}function K_(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return aa(i),l=Yd(n,i,a,_,d,f),T=Xd(),n!==null&&!Bt?($d(n,i,f),pr(n,i,f)):(Qe&&T&&xd(i),i.flags|=1,cn(n,i,l,f),i.child)}function Q_(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!wd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Y_(n,i,d,l,f)):(n=Xc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Tm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:ql,a(_,l)&&n.ref===i.ref)return pr(n,i,f)}return i.flags|=1,n=ur(d,l),n.ref=i.ref,n.return=i,i.child=n}function Y_(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(ql(d,l)&&n.ref===i.ref)if(Bt=!1,i.pendingProps=l=d,Tm(n,f))(n.flags&131072)!==0&&(Bt=!0);else return i.lanes=n.lanes,pr(n,i,f)}return mm(n,i,a,l,f)}function X_(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return $_(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Wc(i,d!==null?d.cachePool:null),d!==null?Zy(i,d):Hd(),Wy(i);else return l=i.lanes=536870912,$_(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Wc(i,d.cachePool),Zy(i,d),is(),i.memoizedState=null):(n!==null&&Wc(i,null),Hd(),is());return cn(n,i,f,a),i.child}function iu(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function $_(n,i,a,l,f){var d=Ud();return d=d===null?null:{parent:Ut._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Wc(i,null),Hd(),Wy(i),n!==null&&po(n,i,l,!0),i.childLanes=f,null}function ph(n,i){return i=yh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function J_(n,i,a){return ca(i,n.child,null,a),n=ph(i,i.pendingProps),n.flags|=2,Bn(i),i.memoizedState=null,n}function DA(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Qe){if(l.mode==="hidden")return n=ph(i,l),i.lanes=536870912,iu(null,n);if(Kd(i),(n=_t)?(n=uE(n,ni),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Xr!==null?{id:Gi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},a=My(n),a.return=i,i.child=a,ln=i,_t=null)):n=null,n===null)throw Jr(i);return i.lanes=536870912,null}return ph(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(Kd(i),f)if(i.flags&256)i.flags&=-257,i=J_(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Bt||po(n,i,a,!1),f=(a&n.childLanes)!==0,Bt||f){if(l=pt,l!==null&&(_=Al(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,na(n,_),On(l,n,_),dm;wh(),i=J_(n,i,a)}else n=d.treeContext,_t=ri(_.nextSibling),ln=i,Qe=!0,$r=null,ni=!1,n!==null&&Ly(i,n),i=ph(i,l),i.flags|=4096;return i}return n=ur(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function gh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function mm(n,i,a,l,f){return aa(i),a=Yd(n,i,a,l,void 0,f),l=Xd(),n!==null&&!Bt?($d(n,i,f),pr(n,i,f)):(Qe&&l&&xd(i),i.flags|=1,cn(n,i,a,f),i.child)}function Z_(n,i,a,l,f,d){return aa(i),i.updateQueue=null,a=t_(i,l,a,f),e_(n),l=Xd(),n!==null&&!Bt?($d(n,i,d),pr(n,i,d)):(Qe&&l&&xd(i),i.flags|=1,cn(n,i,a,d),i.child)}function W_(n,i,a,l,f){if(aa(i),i.stateNode===null){var d=co,_=a.contextType;typeof _=="object"&&_!==null&&(d=un(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=hm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Bd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?un(_):co,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(cm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&hm.enqueueReplaceState(d,d.state,null),Zl(i,l,d,f),Jl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var T=i.memoizedProps,C=fa(a,T);d.props=C;var z=d.context,Q=a.contextType;_=co,typeof Q=="object"&&Q!==null&&(_=un(Q));var $=a.getDerivedStateFromProps;Q=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||z!==_)&&z_(i,d,l,_),Wr=!1;var B=i.memoizedState;d.state=B,Zl(i,l,d,f),Jl(),z=i.memoizedState,T||B!==z||Wr?(typeof $=="function"&&(cm(i,a,$,l),z=i.memoizedState),(C=Wr||U_(i,a,C,l,B,z,_))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=_,l=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,jd(n,i),_=i.memoizedProps,Q=fa(a,_),d.props=Q,$=i.pendingProps,B=d.context,z=a.contextType,C=co,typeof z=="object"&&z!==null&&(C=un(z)),T=a.getDerivedStateFromProps,(z=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==$||B!==C)&&z_(i,d,l,C),Wr=!1,B=i.memoizedState,d.state=B,Zl(i,l,d,f),Jl();var F=i.memoizedState;_!==$||B!==F||Wr||n!==null&&n.dependencies!==null&&Jc(n.dependencies)?(typeof T=="function"&&(cm(i,a,T,l),F=i.memoizedState),(Q=Wr||U_(i,a,Q,l,B,F,C)||n!==null&&n.dependencies!==null&&Jc(n.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&B===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&B===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=C,l=Q):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&B===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&B===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,gh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=ca(i,n.child,null,f),i.child=ca(i,null,a,f)):cn(n,i,a,f),i.memoizedState=d.state,n=i.child):n=pr(n,i,f),n}function ev(n,i,a,l){return ra(),i.flags|=256,cn(n,i,a,l),i.child}var pm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gm(n){return{baseLanes:n,cachePool:Fy()}}function ym(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=qn),n}function tv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(Ot.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Qe){if(f?ns(i):is(),(n=_t)?(n=uE(n,ni),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Xr!==null?{id:Gi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},a=My(n),a.return=i,i.child=a,ln=i,_t=null)):n=null,n===null)throw Jr(i);return Wm(n)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(is(),f=i.mode,T=yh({mode:"hidden",children:T},f),l=ia(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=gm(a),l.childLanes=ym(n,_,a),i.memoizedState=pm,iu(null,l)):(ns(i),_m(i,T))}var C=n.memoizedState;if(C!==null&&(T=C.dehydrated,T!==null)){if(d)i.flags&256?(ns(i),i.flags&=-257,i=vm(n,i,a)):i.memoizedState!==null?(is(),i.child=n.child,i.flags|=128,i=null):(is(),T=l.fallback,f=i.mode,l=yh({mode:"visible",children:l.children},f),T=ia(T,f,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,ca(i,n.child,null,a),l=i.child,l.memoizedState=gm(a),l.childLanes=ym(n,_,a),i.memoizedState=pm,i=iu(null,l));else if(ns(i),Wm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var z=_.dgst;_=z,l=Error(r(419)),l.stack="",l.digest=_,Gl({value:l,source:null,stack:null}),i=vm(n,i,a)}else if(Bt||po(n,i,a,!1),_=(a&n.childLanes)!==0,Bt||_){if(_=pt,_!==null&&(l=Al(_,a),l!==0&&l!==C.retryLane))throw C.retryLane=l,na(n,l),On(_,n,l),dm;Zm(T)||wh(),i=vm(n,i,a)}else Zm(T)?(i.flags|=192,i.child=n.child,i=null):(n=C.treeContext,_t=ri(T.nextSibling),ln=i,Qe=!0,$r=null,ni=!1,n!==null&&Ly(i,n),i=_m(i,l.children),i.flags|=4096);return i}return f?(is(),T=l.fallback,f=i.mode,C=n.child,z=C.sibling,l=ur(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,z!==null?T=ur(z,T):(T=ia(T,f,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,iu(null,l),l=i.child,T=n.child.memoizedState,T===null?T=gm(a):(f=T.cachePool,f!==null?(C=Ut._currentValue,f=f.parent!==C?{parent:C,pool:C}:f):f=Fy(),T={baseLanes:T.baseLanes|a,cachePool:f}),l.memoizedState=T,l.childLanes=ym(n,_,a),i.memoizedState=pm,iu(n.child,l)):(ns(i),a=n.child,n=a.sibling,a=ur(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function _m(n,i){return i=yh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function yh(n,i){return n=Un(22,n,null,i),n.lanes=0,n}function vm(n,i,a){return ca(i,n.child,null,a),n=_m(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function nv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Md(n.return,i,a)}function Em(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function iv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Ot.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,ae(Ot,_),cn(n,i,l,a),l=Qe?Hl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&nv(n,a,i);else if(n.tag===19)nv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&sh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Em(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&sh(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Em(i,!0,a,null,d,l);break;case"together":Em(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function pr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),as|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(po(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=ur(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ur(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Tm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Jc(n)))}function NA(n,i,a){switch(i.tag){case 3:Rt(i,i.stateNode.containerInfo),Zr(i,Ut,n.memoizedState.cache),ra();break;case 27:case 5:Qn(i);break;case 4:Rt(i,i.stateNode.containerInfo);break;case 10:Zr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Kd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(ns(i),i.flags|=128,null):(a&i.child.childLanes)!==0?tv(n,i,a):(ns(i),n=pr(n,i,a),n!==null?n.sibling:null);ns(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(po(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return iv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(Ot,Ot.current),l)break;return null;case 22:return i.lanes=0,X_(n,i,a,i.pendingProps);case 24:Zr(i,Ut,n.memoizedState.cache)}return pr(n,i,a)}function rv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Bt=!0;else{if(!Tm(n,a)&&(i.flags&128)===0)return Bt=!1,NA(n,i,a);Bt=(n.flags&131072)!==0}else Bt=!1,Qe&&(i.flags&1048576)!==0&&ky(i,Hl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(n=la(i.elementType),i.type=n,typeof n=="function")wd(n)?(l=fa(n,l),i.tag=1,i=W_(null,i,n,l,a)):(i.tag=0,i=mm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===Le){i.tag=11,i=K_(null,i,n,l,a);break e}else if(f===R){i.tag=14,i=Q_(null,i,n,l,a);break e}}throw i=it(n)||n,Error(r(306,i,""))}}return i;case 0:return mm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=fa(l,i.pendingProps),W_(n,i,l,f,a);case 3:e:{if(Rt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,jd(n,i),Zl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Zr(i,Ut,l),l!==d.cache&&Pd(i,[Ut],a,!0),Jl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=ev(n,i,l,a);break e}else if(l!==f){f=Wn(Error(r(424)),i),Gl(f),i=ev(n,i,l,a);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,_t=ri(n.firstChild),ln=i,Qe=!0,$r=null,ni=!0,a=Xy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ra(),l===f){i=pr(n,i,a);break e}cn(n,i,l,a)}i=i.child}return i;case 26:return gh(n,i),n===null?(a=pE(i.type,null,i.pendingProps,null))?i.memoizedState=a:Qe||(a=i.type,n=i.pendingProps,l=Oh(Ce.current).createElement(a),l[Pt]=i,l[Zt]=n,hn(l,a,n),kt(l),i.stateNode=l):i.memoizedState=pE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Qn(i),n===null&&Qe&&(l=i.stateNode=fE(i.type,i.pendingProps,Ce.current),ln=i,ni=!0,f=_t,hs(i.type)?(ep=f,_t=ri(l.firstChild)):_t=f),cn(n,i,i.pendingProps.children,a),gh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Qe&&((f=l=_t)&&(l=oI(l,i.type,i.pendingProps,ni),l!==null?(i.stateNode=l,ln=i,_t=ri(l.firstChild),ni=!1,f=!0):f=!1),f||Jr(i)),Qn(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,Xm(f,d)?l=null:_!==null&&Xm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Yd(n,i,bA,null,null,a),_u._currentValue=f),gh(n,i),cn(n,i,l,a),i.child;case 6:return n===null&&Qe&&((n=a=_t)&&(a=lI(a,i.pendingProps,ni),a!==null?(i.stateNode=a,ln=i,_t=null,n=!0):n=!1),n||Jr(i)),null;case 13:return tv(n,i,a);case 4:return Rt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=ca(i,null,l,a):cn(n,i,l,a),i.child;case 11:return K_(n,i,i.type,i.pendingProps,a);case 7:return cn(n,i,i.pendingProps,a),i.child;case 8:return cn(n,i,i.pendingProps.children,a),i.child;case 12:return cn(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Zr(i,i.type,l.value),cn(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,aa(i),f=un(f),l=l(f),i.flags|=1,cn(n,i,l,a),i.child;case 14:return Q_(n,i,i.type,i.pendingProps,a);case 15:return Y_(n,i,i.type,i.pendingProps,a);case 19:return iv(n,i,a);case 31:return DA(n,i,a);case 22:return X_(n,i,a,i.pendingProps);case 24:return aa(i),l=un(Ut),n===null?(f=Ud(),f===null&&(f=pt,d=kd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Bd(i),Zr(i,Ut,f)):((n.lanes&a)!==0&&(jd(n,i),Zl(i,null,null,a),Jl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Zr(i,Ut,l)):(l=d.cache,Zr(i,Ut,l),l!==f.cache&&Pd(i,[Ut],a,!0))),cn(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function gr(n){n.flags|=4}function bm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Nv())n.flags|=8192;else throw ua=th,zd}else n.flags&=-16777217}function sv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!EE(i))if(Nv())n.flags|=8192;else throw ua=th,zd}function _h(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?rr():536870912,n.lanes|=i,Ro|=i)}function ru(n,i){if(!Qe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function vt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function VA(n,i,a){var l=i.pendingProps;switch(Dd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(i),null;case 1:return vt(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),fr(Ut),mt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(mo(i)?gr(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vd())),vt(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(gr(i),d!==null?(vt(i),sv(i,d)):(vt(i),bm(i,f,null,l,a))):d?d!==n.memoizedState?(gr(i),vt(i),sv(i,d)):(vt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&gr(i),vt(i),bm(i,f,n,l,a)),null;case 27:if(wi(i),a=Ce.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&gr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return vt(i),null}n=ue.current,mo(i)?Uy(i):(n=fE(f,l,a),i.stateNode=n,gr(i))}return vt(i),null;case 5:if(wi(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&gr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return vt(i),null}if(d=ue.current,mo(i))Uy(i);else{var _=Oh(Ce.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Pt]=i,d[Zt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(hn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&gr(i)}}return vt(i),bm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&gr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ce.current,mo(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=ln,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Pt]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||tE(n.nodeValue,a)),n||Jr(i,!0)}else n=Oh(n).createTextNode(l),n[Pt]=i,i.stateNode=n}return vt(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=mo(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Pt]=i}else ra(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;vt(i),n=!1}else a=Vd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(Bn(i),i):(Bn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return vt(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=mo(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Pt]=i}else ra(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;vt(i),f=!1}else f=Vd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Bn(i),i):(Bn(i),null)}return Bn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),_h(i,i.updateQueue),vt(i),null);case 4:return mt(),n===null&&Hm(i.stateNode.containerInfo),vt(i),null;case 10:return fr(i.type),vt(i),null;case 19:if(X(Ot),l=i.memoizedState,l===null)return vt(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)ru(l,!1);else{if(Dt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=sh(n),d!==null){for(i.flags|=128,ru(l,!1),n=d.updateQueue,i.updateQueue=n,_h(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Oy(a,n),a=a.sibling;return ae(Ot,Ot.current&1|2),Qe&&cr(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&sn()>Sh&&(i.flags|=128,f=!0,ru(l,!1),i.lanes=4194304)}else{if(!f)if(n=sh(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,_h(i,n),ru(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Qe)return vt(i),null}else 2*sn()-l.renderingStartTime>Sh&&a!==536870912&&(i.flags|=128,f=!0,ru(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=sn(),n.sibling=null,a=Ot.current,ae(Ot,f?a&1|2:a&1),Qe&&cr(i,l.treeForkCount),n):(vt(i),null);case 22:case 23:return Bn(i),Gd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(vt(i),i.subtreeFlags&6&&(i.flags|=8192)):vt(i),a=i.updateQueue,a!==null&&_h(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&X(oa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),fr(Ut),vt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function OA(n,i){switch(Dd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return fr(Ut),mt(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return wi(i),null;case 31:if(i.memoizedState!==null){if(Bn(i),i.alternate===null)throw Error(r(340));ra()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Bn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));ra()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return X(Ot),null;case 4:return mt(),null;case 10:return fr(i.type),null;case 22:case 23:return Bn(i),Gd(),n!==null&&X(oa),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return fr(Ut),null;case 25:return null;default:return null}}function av(n,i){switch(Dd(i),i.tag){case 3:fr(Ut),mt();break;case 26:case 27:case 5:wi(i);break;case 4:mt();break;case 31:i.memoizedState!==null&&Bn(i);break;case 13:Bn(i);break;case 19:X(Ot);break;case 10:fr(i.type);break;case 22:case 23:Bn(i),Gd(),n!==null&&X(oa);break;case 24:fr(Ut)}}function su(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(T){at(i,i.return,T)}}function rs(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var C=a,z=T;try{z()}catch(Q){at(f,C,Q)}}}l=l.next}while(l!==d)}}catch(Q){at(i,i.return,Q)}}function ov(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Jy(i,a)}catch(l){at(n,n.return,l)}}}function lv(n,i,a){a.props=fa(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){at(n,i,l)}}function au(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){at(n,i,f)}}function Qi(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){at(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){at(n,i,f)}else a.current=null}function uv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){at(n,n.return,f)}}function Sm(n,i,a){try{var l=n.stateNode;tI(l,n.type,a,i),l[Zt]=i}catch(f){at(n,n.return,f)}}function cv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&hs(n.type)||n.tag===4}function Am(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&hs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Im(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=fi));else if(l!==4&&(l===27&&hs(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(Im(n,i,a),n=n.sibling;n!==null;)Im(n,i,a),n=n.sibling}function vh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&hs(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(vh(n,i,a),n=n.sibling;n!==null;)vh(n,i,a),n=n.sibling}function hv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);hn(i,l,a),i[Pt]=n,i[Zt]=a}catch(d){at(n,n.return,d)}}var yr=!1,jt=!1,wm=!1,fv=typeof WeakSet=="function"?WeakSet:Set,en=null;function MA(n,i){if(n=n.containerInfo,Qm=Bh,n=Ay(n),vd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,T=-1,C=-1,z=0,Q=0,$=n,B=null;t:for(;;){for(var F;$!==a||f!==0&&$.nodeType!==3||(T=_+f),$!==d||l!==0&&$.nodeType!==3||(C=_+l),$.nodeType===3&&(_+=$.nodeValue.length),(F=$.firstChild)!==null;)B=$,$=F;for(;;){if($===n)break t;if(B===a&&++z===f&&(T=_),B===d&&++Q===l&&(C=_),(F=$.nextSibling)!==null)break;$=B,B=$.parentNode}$=F}a=T===-1||C===-1?null:{start:T,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ym={focusedElem:n,selectionRange:a},Bh=!1,en=i;en!==null;)if(i=en,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,en=n;else for(;en!==null;){switch(i=en,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var fe=fa(a.type,f);n=l.getSnapshotBeforeUpdate(fe,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){at(a,a.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Jm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Jm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,en=n;break}en=i.return}}function dv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:vr(n,a),l&4&&su(5,a);break;case 1:if(vr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){at(a,a.return,_)}else{var f=fa(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){at(a,a.return,_)}}l&64&&ov(a),l&512&&au(a,a.return);break;case 3:if(vr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Jy(n,i)}catch(_){at(a,a.return,_)}}break;case 27:i===null&&l&4&&hv(a);case 26:case 5:vr(n,a),i===null&&l&4&&uv(a),l&512&&au(a,a.return);break;case 12:vr(n,a);break;case 31:vr(n,a),l&4&&gv(n,a);break;case 13:vr(n,a),l&4&&yv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=FA.bind(null,a),uI(n,a))));break;case 22:if(l=a.memoizedState!==null||yr,!l){i=i!==null&&i.memoizedState!==null||jt,f=yr;var d=jt;yr=l,(jt=i)&&!d?Er(n,a,(a.subtreeFlags&8772)!==0):vr(n,a),yr=f,jt=d}break;case 30:break;default:vr(n,a)}}function mv(n){var i=n.alternate;i!==null&&(n.alternate=null,mv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&$a(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var bt=null,xn=!1;function _r(n,i,a){for(a=a.child;a!==null;)pv(n,i,a),a=a.sibling}function pv(n,i,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(In,a)}catch{}switch(a.tag){case 26:jt||Qi(a,i),_r(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:jt||Qi(a,i);var l=bt,f=xn;hs(a.type)&&(bt=a.stateNode,xn=!1),_r(n,i,a),pu(a.stateNode),bt=l,xn=f;break;case 5:jt||Qi(a,i);case 6:if(l=bt,f=xn,bt=null,_r(n,i,a),bt=l,xn=f,bt!==null)if(xn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(a.stateNode)}catch(d){at(a,i,d)}else try{bt.removeChild(a.stateNode)}catch(d){at(a,i,d)}break;case 18:bt!==null&&(xn?(n=bt,oE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Po(n)):oE(bt,a.stateNode));break;case 4:l=bt,f=xn,bt=a.stateNode.containerInfo,xn=!0,_r(n,i,a),bt=l,xn=f;break;case 0:case 11:case 14:case 15:rs(2,a,i),jt||rs(4,a,i),_r(n,i,a);break;case 1:jt||(Qi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&lv(a,i,l)),_r(n,i,a);break;case 21:_r(n,i,a);break;case 22:jt=(l=jt)||a.memoizedState!==null,_r(n,i,a),jt=l;break;default:_r(n,i,a)}}function gv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Po(n)}catch(a){at(i,i.return,a)}}}function yv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Po(n)}catch(a){at(i,i.return,a)}}function PA(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new fv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new fv),i;default:throw Error(r(435,n.tag))}}function Eh(n,i){var a=PA(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=HA.bind(null,n,l);l.then(f,f)}})}function Dn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(hs(T.type)){bt=T.stateNode,xn=!1;break e}break;case 5:bt=T.stateNode,xn=!1;break e;case 3:case 4:bt=T.stateNode.containerInfo,xn=!0;break e}T=T.return}if(bt===null)throw Error(r(160));pv(d,_,f),bt=null,xn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)_v(i,n),i=i.sibling}var _i=null;function _v(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Dn(i,n),Nn(n),l&4&&(rs(3,n,n.return),su(3,n),rs(5,n,n.return));break;case 1:Dn(i,n),Nn(n),l&512&&(jt||a===null||Qi(a,a.return)),l&64&&yr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=_i;if(Dn(i,n),Nn(n),l&512&&(jt||a===null||Qi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Oi]||d[Pt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),hn(d,l,a),d[Pt]=n,kt(d),l=d;break e;case"link":var _=_E("link","href",f).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}d=f.createElement(l),hn(d,l,a),f.head.appendChild(d);break;case"meta":if(_=_E("meta","content",f).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}d=f.createElement(l),hn(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Pt]=n,kt(d),l=d}n.stateNode=l}else vE(f,n.type,n.stateNode);else n.stateNode=yE(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?vE(f,n.type,n.stateNode):yE(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Sm(n,n.memoizedProps,a.memoizedProps)}break;case 27:Dn(i,n),Nn(n),l&512&&(jt||a===null||Qi(a,a.return)),a!==null&&l&4&&Sm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Dn(i,n),Nn(n),l&512&&(jt||a===null||Qi(a,a.return)),n.flags&32){f=n.stateNode;try{Cn(f,"")}catch(fe){at(n,n.return,fe)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Sm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(wm=!0);break;case 6:if(Dn(i,n),Nn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(fe){at(n,n.return,fe)}}break;case 3:if(kh=null,f=_i,_i=Mh(i.containerInfo),Dn(i,n),_i=f,Nn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Po(i.containerInfo)}catch(fe){at(n,n.return,fe)}wm&&(wm=!1,vv(n));break;case 4:l=_i,_i=Mh(n.stateNode.containerInfo),Dn(i,n),Nn(n),_i=l;break;case 12:Dn(i,n),Nn(n);break;case 31:Dn(i,n),Nn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Eh(n,l)));break;case 13:Dn(i,n),Nn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(bh=sn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Eh(n,l)));break;case 22:f=n.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,z=yr,Q=jt;if(yr=z||f,jt=Q||C,Dn(i,n),jt=Q,yr=z,Nn(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||C||yr||jt||da(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(d=C.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=C.stateNode;var $=C.memoizedProps.style,B=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(fe){at(C,C.return,fe)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(fe){at(C,C.return,fe)}}}else if(i.tag===18){if(a===null){C=i;try{var F=C.stateNode;f?lE(F,!0):lE(C.stateNode,!1)}catch(fe){at(C,C.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Eh(n,a))));break;case 19:Dn(i,n),Nn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Eh(n,l)));break;case 30:break;case 21:break;default:Dn(i,n),Nn(n)}}function Nn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(cv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Am(n);vh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(Cn(_,""),a.flags&=-33);var T=Am(n);vh(n,T,_);break;case 3:case 4:var C=a.stateNode.containerInfo,z=Am(n);Im(n,z,C);break;default:throw Error(r(161))}}catch(Q){at(n,n.return,Q)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function vv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;vv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function vr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)dv(n,i.alternate,i),i=i.sibling}function da(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:rs(4,i,i.return),da(i);break;case 1:Qi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&lv(i,i.return,a),da(i);break;case 27:pu(i.stateNode);case 26:case 5:Qi(i,i.return),da(i);break;case 22:i.memoizedState===null&&da(i);break;case 30:da(i);break;default:da(i)}n=n.sibling}}function Er(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:Er(f,d,a),su(4,d);break;case 1:if(Er(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){at(l,l.return,z)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)$y(C[f],T)}catch(z){at(l,l.return,z)}}a&&_&64&&ov(d),au(d,d.return);break;case 27:hv(d);case 26:case 5:Er(f,d,a),a&&l===null&&_&4&&uv(d),au(d,d.return);break;case 12:Er(f,d,a);break;case 31:Er(f,d,a),a&&_&4&&gv(f,d);break;case 13:Er(f,d,a),a&&_&4&&yv(f,d);break;case 22:d.memoizedState===null&&Er(f,d,a),au(d,d.return);break;case 30:break;default:Er(f,d,a)}i=i.sibling}}function Rm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Kl(a))}function Cm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Kl(n))}function vi(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ev(n,i,a,l),i=i.sibling}function Ev(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:vi(n,i,a,l),f&2048&&su(9,i);break;case 1:vi(n,i,a,l);break;case 3:vi(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Kl(n)));break;case 12:if(f&2048){vi(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){at(i,i.return,C)}}else vi(n,i,a,l);break;case 31:vi(n,i,a,l);break;case 13:vi(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?vi(n,i,a,l):ou(n,i):d._visibility&2?vi(n,i,a,l):(d._visibility|=2,Ao(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Rm(_,i);break;case 24:vi(n,i,a,l),f&2048&&Cm(i.alternate,i);break;default:vi(n,i,a,l)}}function Ao(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,T=a,C=l,z=_.flags;switch(_.tag){case 0:case 11:case 15:Ao(d,_,T,C,f),su(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?Ao(d,_,T,C,f):ou(d,_):(Q._visibility|=2,Ao(d,_,T,C,f)),f&&z&2048&&Rm(_.alternate,_);break;case 24:Ao(d,_,T,C,f),f&&z&2048&&Cm(_.alternate,_);break;default:Ao(d,_,T,C,f)}i=i.sibling}}function ou(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:ou(a,l),f&2048&&Rm(l.alternate,l);break;case 24:ou(a,l),f&2048&&Cm(l.alternate,l);break;default:ou(a,l)}i=i.sibling}}var lu=8192;function Io(n,i,a){if(n.subtreeFlags&lu)for(n=n.child;n!==null;)Tv(n,i,a),n=n.sibling}function Tv(n,i,a){switch(n.tag){case 26:Io(n,i,a),n.flags&lu&&n.memoizedState!==null&&TI(a,_i,n.memoizedState,n.memoizedProps);break;case 5:Io(n,i,a);break;case 3:case 4:var l=_i;_i=Mh(n.stateNode.containerInfo),Io(n,i,a),_i=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=lu,lu=16777216,Io(n,i,a),lu=l):Io(n,i,a));break;default:Io(n,i,a)}}function bv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function uu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];en=l,Av(l,n)}bv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Sv(n),n=n.sibling}function Sv(n){switch(n.tag){case 0:case 11:case 15:uu(n),n.flags&2048&&rs(9,n,n.return);break;case 3:uu(n);break;case 12:uu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Th(n)):uu(n);break;default:uu(n)}}function Th(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];en=l,Av(l,n)}bv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:rs(8,i,i.return),Th(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Th(i));break;default:Th(i)}n=n.sibling}}function Av(n,i){for(;en!==null;){var a=en;switch(a.tag){case 0:case 11:case 15:rs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Kl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,en=l;else e:for(a=n;en!==null;){l=en;var f=l.sibling,d=l.return;if(mv(l),l===a){en=null;break e}if(f!==null){f.return=d,en=f;break e}en=d}}}var kA={getCacheForType:function(n){var i=un(Ut),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return un(Ut).controller.signal}},LA=typeof WeakMap=="function"?WeakMap:Map,tt=0,pt=null,je=null,He=0,st=0,jn=null,ss=!1,wo=!1,xm=!1,Tr=0,Dt=0,as=0,ma=0,Dm=0,qn=0,Ro=0,cu=null,Vn=null,Nm=!1,bh=0,Iv=0,Sh=1/0,Ah=null,os=null,Qt=0,ls=null,Co=null,br=0,Vm=0,Om=null,wv=null,hu=0,Mm=null;function Fn(){return(tt&2)!==0&&He!==0?He&-He:G.T!==null?Bm():Ic()}function Rv(){if(qn===0)if((He&536870912)===0||Qe){var n=re;re<<=1,(re&3932160)===0&&(re=262144),qn=n}else qn=536870912;return n=zn.current,n!==null&&(n.flags|=32),qn}function On(n,i,a){(n===pt&&(st===2||st===9)||n.cancelPendingCommit!==null)&&(xo(n,0),us(n,He,qn,!1)),qs(n,a),((tt&2)===0||n!==pt)&&(n===pt&&((tt&2)===0&&(ma|=a),Dt===4&&us(n,He,qn,!1)),Yi(n))}function Cv(n,i,a){if((tt&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||me(n,i),f=l?BA(n,i):km(n,i,!0),d=l;do{if(f===0){wo&&!l&&us(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!UA(a)){f=km(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=n;f=cu;var C=T.current.memoizedState.isDehydrated;if(C&&(xo(T,_).flags|=256),_=km(T,_,!1),_!==2){if(xm&&!C){T.errorRecoveryDisabledLanes|=d,ma|=d,f=4;break e}d=Vn,Vn=f,d!==null&&(Vn===null?Vn=d:Vn.push.apply(Vn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){xo(n,0),us(n,i,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:us(l,i,qn,!ss);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=bh+300-sn(),10<f)){if(us(l,i,qn,!ss),he(l,0,!0)!==0)break e;br=i,l.timeoutHandle=sE(xv.bind(null,l,a,Vn,Ah,Nm,i,qn,ma,Ro,ss,d,"Throttled",-0,0),f);break e}xv(l,a,Vn,Ah,Nm,i,qn,ma,Ro,ss,d,null,-0,0)}}break}while(!0);Yi(n)}function xv(n,i,a,l,f,d,_,T,C,z,Q,$,B,F){if(n.timeoutHandle=-1,$=i.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fi},Tv(i,d,$);var fe=(d&62914560)===d?bh-sn():(d&4194048)===d?Iv-sn():0;if(fe=bI($,fe),fe!==null){br=d,n.cancelPendingCommit=fe(Lv.bind(null,n,i,d,a,l,f,_,T,C,Q,$,null,B,F)),us(n,d,_,!z);return}}Lv(n,i,d,a,l,f,_,T,C)}function UA(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Ln(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function us(n,i,a,l){i&=~Dm,i&=~ma,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-It(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Fs(n,a,i)}function Ih(){return(tt&6)===0?(fu(0),!1):!0}function Pm(){if(je!==null){if(st===0)var n=je.return;else n=je,hr=sa=null,Jd(n),vo=null,Yl=0,n=je;for(;n!==null;)av(n.alternate,n),n=n.return;je=null}}function xo(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,rI(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),br=0,Pm(),pt=n,je=a=ur(n.current,null),He=i,st=0,jn=null,ss=!1,wo=me(n,i),xm=!1,Ro=qn=Dm=ma=as=Dt=0,Vn=cu=null,Nm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-It(l),d=1<<f;i|=n[f],l&=~d}return Tr=i,Kc(),a}function Dv(n,i){ke=null,G.H=nu,i===_o||i===eh?(i=Ky(),st=3):i===zd?(i=Ky(),st=4):st=i===dm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,jn=i,je===null&&(Dt=1,mh(n,Wn(i,n.current)))}function Nv(){var n=zn.current;return n===null?!0:(He&4194048)===He?ii===null:(He&62914560)===He||(He&536870912)!==0?n===ii:!1}function Vv(){var n=G.H;return G.H=nu,n===null?nu:n}function Ov(){var n=G.A;return G.A=kA,n}function wh(){Dt=4,ss||(He&4194048)!==He&&zn.current!==null||(wo=!0),(as&134217727)===0&&(ma&134217727)===0||pt===null||us(pt,He,qn,!1)}function km(n,i,a){var l=tt;tt|=2;var f=Vv(),d=Ov();(pt!==n||He!==i)&&(Ah=null,xo(n,i)),i=!1;var _=Dt;e:do try{if(st!==0&&je!==null){var T=je,C=jn;switch(st){case 8:Pm(),_=6;break e;case 3:case 2:case 9:case 6:zn.current===null&&(i=!0);var z=st;if(st=0,jn=null,Do(n,T,C,z),a&&wo){_=0;break e}break;default:z=st,st=0,jn=null,Do(n,T,C,z)}}zA(),_=Dt;break}catch(Q){Dv(n,Q)}while(!0);return i&&n.shellSuspendCounter++,hr=sa=null,tt=l,G.H=f,G.A=d,je===null&&(pt=null,He=0,Kc()),_}function zA(){for(;je!==null;)Mv(je)}function BA(n,i){var a=tt;tt|=2;var l=Vv(),f=Ov();pt!==n||He!==i?(Ah=null,Sh=sn()+500,xo(n,i)):wo=me(n,i);e:do try{if(st!==0&&je!==null){i=je;var d=jn;t:switch(st){case 1:st=0,jn=null,Do(n,i,d,1);break;case 2:case 9:if(Hy(d)){st=0,jn=null,Pv(i);break}i=function(){st!==2&&st!==9||pt!==n||(st=7),Yi(n)},d.then(i,i);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Hy(d)?(st=0,jn=null,Pv(i)):(st=0,jn=null,Do(n,i,d,7));break;case 5:var _=null;switch(je.tag){case 26:_=je.memoizedState;case 5:case 27:var T=je;if(_?EE(_):T.stateNode.complete){st=0,jn=null;var C=T.sibling;if(C!==null)je=C;else{var z=T.return;z!==null?(je=z,Rh(z)):je=null}break t}}st=0,jn=null,Do(n,i,d,5);break;case 6:st=0,jn=null,Do(n,i,d,6);break;case 8:Pm(),Dt=6;break e;default:throw Error(r(462))}}jA();break}catch(Q){Dv(n,Q)}while(!0);return hr=sa=null,G.H=l,G.A=f,tt=a,je!==null?0:(pt=null,He=0,Kc(),Dt)}function jA(){for(;je!==null&&!bl();)Mv(je)}function Mv(n){var i=rv(n.alternate,n,Tr);n.memoizedProps=n.pendingProps,i===null?Rh(n):je=i}function Pv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Z_(a,i,i.pendingProps,i.type,void 0,He);break;case 11:i=Z_(a,i,i.pendingProps,i.type.render,i.ref,He);break;case 5:Jd(i);default:av(a,i),i=je=Oy(i,Tr),i=rv(a,i,Tr)}n.memoizedProps=n.pendingProps,i===null?Rh(n):je=i}function Do(n,i,a,l){hr=sa=null,Jd(i),vo=null,Yl=0;var f=i.return;try{if(xA(n,f,i,a,He)){Dt=1,mh(n,Wn(a,n.current)),je=null;return}}catch(d){if(f!==null)throw je=f,d;Dt=1,mh(n,Wn(a,n.current)),je=null;return}i.flags&32768?(Qe||l===1?n=!0:wo||(He&536870912)!==0?n=!1:(ss=n=!0,(l===2||l===9||l===3||l===6)&&(l=zn.current,l!==null&&l.tag===13&&(l.flags|=16384))),kv(i,n)):Rh(i)}function Rh(n){var i=n;do{if((i.flags&32768)!==0){kv(i,ss);return}n=i.return;var a=VA(i.alternate,i,Tr);if(a!==null){je=a;return}if(i=i.sibling,i!==null){je=i;return}je=i=n}while(i!==null);Dt===0&&(Dt=5)}function kv(n,i){do{var a=OA(n.alternate,n);if(a!==null){a.flags&=32767,je=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){je=n;return}je=n=a}while(n!==null);Dt=6,je=null}function Lv(n,i,a,l,f,d,_,T,C){n.cancelPendingCommit=null;do Ch();while(Qt!==0);if((tt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Ad,pd(n,a,d,_,T,C),n===pt&&(je=pt=null,He=0),Co=i,ls=n,br=a,Vm=d,Om=f,wv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,GA(Ni,function(){return qv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,f=se.p,se.p=2,_=tt,tt|=4;try{MA(n,i,a)}finally{tt=_,se.p=f,G.T=l}}Qt=1,Uv(),zv(),Bv()}}function Uv(){if(Qt===1){Qt=0;var n=ls,i=Co,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=se.p;se.p=2;var f=tt;tt|=4;try{_v(i,n);var d=Ym,_=Ay(n.containerInfo),T=d.focusedElem,C=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&Sy(T.ownerDocument.documentElement,T)){if(C!==null&&vd(T)){var z=C.start,Q=C.end;if(Q===void 0&&(Q=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(Q,T.value.length);else{var $=T.ownerDocument||document,B=$&&$.defaultView||window;if(B.getSelection){var F=B.getSelection(),fe=T.textContent.length,Ae=Math.min(C.start,fe),ft=C.end===void 0?Ae:Math.min(C.end,fe);!F.extend&&Ae>ft&&(_=ft,ft=Ae,Ae=_);var M=by(T,Ae),V=by(T,ft);if(M&&V&&(F.rangeCount!==1||F.anchorNode!==M.node||F.anchorOffset!==M.offset||F.focusNode!==V.node||F.focusOffset!==V.offset)){var U=$.createRange();U.setStart(M.node,M.offset),F.removeAllRanges(),Ae>ft?(F.addRange(U),F.extend(V.node,V.offset)):(U.setEnd(V.node,V.offset),F.addRange(U))}}}}for($=[],F=T;F=F.parentNode;)F.nodeType===1&&$.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var Y=$[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Bh=!!Qm,Ym=Qm=null}finally{tt=f,se.p=l,G.T=a}}n.current=i,Qt=2}}function zv(){if(Qt===2){Qt=0;var n=ls,i=Co,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=se.p;se.p=2;var f=tt;tt|=4;try{dv(n,i.alternate,i)}finally{tt=f,se.p=l,G.T=a}}Qt=3}}function Bv(){if(Qt===4||Qt===3){Qt=0,Ha();var n=ls,i=Co,a=br,l=wv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Qt=5:(Qt=0,Co=ls=null,jv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(os=null),sr(a),i=i.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(In,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=G.T,f=se.p,se.p=2,G.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{G.T=i,se.p=f}}(br&3)!==0&&Ch(),Yi(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===Mm?hu++:(hu=0,Mm=n):hu=0,fu(0)}}function jv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Kl(i)))}function Ch(){return Uv(),zv(),Bv(),qv()}function qv(){if(Qt!==5)return!1;var n=ls,i=Vm;Vm=0;var a=sr(br),l=G.T,f=se.p;try{se.p=32>a?32:a,G.T=null,a=Om,Om=null;var d=ls,_=br;if(Qt=0,Co=ls=null,br=0,(tt&6)!==0)throw Error(r(331));var T=tt;if(tt|=4,Sv(d.current),Ev(d,d.current,_,a),tt=T,fu(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(In,d)}catch{}return!0}finally{se.p=f,G.T=l,jv(n,i)}}function Fv(n,i,a){i=Wn(a,i),i=fm(n.stateNode,i,2),n=ts(n,i,2),n!==null&&(qs(n,2),Yi(n))}function at(n,i,a){if(n.tag===3)Fv(n,n,a);else for(;i!==null;){if(i.tag===3){Fv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(os===null||!os.has(l))){n=Wn(a,n),a=H_(2),l=ts(i,a,2),l!==null&&(G_(a,l,i,n),qs(l,2),Yi(l));break}}i=i.return}}function Lm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new LA;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(xm=!0,f.add(a),n=qA.bind(null,n,i,a),i.then(n,n))}function qA(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,pt===n&&(He&a)===a&&(Dt===4||Dt===3&&(He&62914560)===He&&300>sn()-bh?(tt&2)===0&&xo(n,0):Dm|=a,Ro===He&&(Ro=0)),Yi(n)}function Hv(n,i){i===0&&(i=rr()),n=na(n,i),n!==null&&(qs(n,i),Yi(n))}function FA(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Hv(n,a)}function HA(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Hv(n,a)}function GA(n,i){return Ct(n,i)}var xh=null,No=null,Um=!1,Dh=!1,zm=!1,cs=0;function Yi(n){n!==No&&n.next===null&&(No===null?xh=No=n:No=No.next=n),Dh=!0,Um||(Um=!0,QA())}function fu(n,i){if(!zm&&Dh){zm=!0;do for(var a=!1,l=xh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-It(42|n)+1)-1,d&=f&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Yv(l,d))}else d=He,d=he(l,l===pt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||me(l,d)||(a=!0,Yv(l,d));l=l.next}while(a);zm=!1}}function KA(){Gv()}function Gv(){Dh=Um=!1;var n=0;cs!==0&&iI()&&(n=cs);for(var i=sn(),a=null,l=xh;l!==null;){var f=l.next,d=Kv(l,i);d===0?(l.next=null,a===null?xh=f:a.next=f,f===null&&(No=a)):(a=l,(n!==0||(d&3)!==0)&&(Dh=!0)),l=f}Qt!==0&&Qt!==5||fu(n),cs!==0&&(cs=0)}function Kv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-It(d),T=1<<_,C=f[_];C===-1?((T&a)===0||(T&l)!==0)&&(f[_]=We(T,i)):C<=i&&(n.expiredLanes|=T),d&=~T}if(i=pt,a=He,a=he(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(st===2||st===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Di(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||me(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Di(l),sr(a)){case 2:case 8:a=Bs;break;case 32:a=Ni;break;case 268435456:a=Ga;break;default:a=Ni}return l=Qv.bind(null,n),a=Ct(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Di(l),n.callbackPriority=2,n.callbackNode=null,2}function Qv(n,i){if(Qt!==0&&Qt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Ch()&&n.callbackNode!==a)return null;var l=He;return l=he(n,n===pt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Cv(n,l,i),Kv(n,sn()),n.callbackNode!=null&&n.callbackNode===a?Qv.bind(null,n):null)}function Yv(n,i){if(Ch())return null;Cv(n,i,!0)}function QA(){sI(function(){(tt&6)!==0?Ct(zs,KA):Gv()})}function Bm(){if(cs===0){var n=go;n===0&&(n=ie,ie<<=1,(ie&261888)===0&&(ie=256)),cs=n}return cs}function Xv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:eo(""+n)}function $v(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function YA(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=Xv((f[Zt]||null).action),_=l.submitter;_&&(i=(i=_[Zt]||null)?Xv(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var T=new ji("action","action",null,l,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(cs!==0){var C=_?$v(f,_):new FormData(f);am(a,{pending:!0,data:C,method:f.method,action:d},null,C)}}else typeof d=="function"&&(T.preventDefault(),C=_?$v(f,_):new FormData(f),am(a,{pending:!0,data:C,method:f.method,action:d},d,C))},currentTarget:f}]})}}for(var jm=0;jm<Sd.length;jm++){var qm=Sd[jm],XA=qm.toLowerCase(),$A=qm[0].toUpperCase()+qm.slice(1);yi(XA,"on"+$A)}yi(Ry,"onAnimationEnd"),yi(Cy,"onAnimationIteration"),yi(xy,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(fA,"onTransitionRun"),yi(dA,"onTransitionStart"),yi(mA,"onTransitionCancel"),yi(Dy,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(du));function Jv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],C=T.instance,z=T.currentTarget;if(T=T.listener,C!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=z;try{d(f)}catch(Q){Gc(Q)}f.currentTarget=null,d=C}else for(_=0;_<l.length;_++){if(T=l[_],C=T.instance,z=T.currentTarget,T=T.listener,C!==d&&f.isPropagationStopped())break e;d=T,f.currentTarget=z;try{d(f)}catch(Q){Gc(Q)}f.currentTarget=null,d=C}}}}function qe(n,i){var a=i[Xa];a===void 0&&(a=i[Xa]=new Set);var l=n+"__bubble";a.has(l)||(Zv(i,n,2,!1),a.add(l))}function Fm(n,i,a){var l=0;i&&(l|=4),Zv(a,n,l,i)}var Nh="_reactListening"+Math.random().toString(36).slice(2);function Hm(n){if(!n[Nh]){n[Nh]=!0,Il.forEach(function(a){a!=="selectionchange"&&(JA.has(a)||Fm(a,!1,n),Fm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Nh]||(i[Nh]=!0,Fm("selectionchange",!1,i))}}function Zv(n,i,a,l){switch(RE(i)){case 2:var f=II;break;case 8:f=wI;break;default:f=sp}a=f.bind(null,i,a,n),f=void 0,!Ys||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Gm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=l.return;_!==null;){var C=_.tag;if((C===3||C===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=Mi(T),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){l=d=_;continue e}T=T.parentNode}}l=l.return}Gr(function(){var z=d,Q=Xn(a),$=[];e:{var B=Ny.get(n);if(B!==void 0){var F=ji,fe=n;switch(n){case"keypress":if($s(a)===0)break e;case"keydown":case"keyup":F=qc;break;case"focusin":fe="focus",F=Zs;break;case"focusout":fe="blur",F=Zs;break;case"beforeblur":case"afterblur":F=Zs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=g;break;case Ry:case Cy:case xy:F=Pc;break;case Dy:F=b;break;case"scroll":case"scrollend":F=Ll;break;case"wheel":F=q;break;case"copy":case"cut":case"paste":F=kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=lr;break;case"toggle":case"beforetoggle":F=Pe}var Ae=(i&4)!==0,ft=!Ae&&(n==="scroll"||n==="scrollend"),M=Ae?B!==null?B+"Capture":null:B;Ae=[];for(var V=z,U;V!==null;){var Y=V;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||M===null||(Y=di(V,M),Y!=null&&Ae.push(mu(V,Y,U))),ft)break;V=V.return}0<Ae.length&&(B=new F(B,fe,null,a,Q),$.push({event:B,listeners:Ae}))}}if((i&7)===0){e:{if(B=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",B&&a!==Ml&&(fe=a.relatedTarget||a.fromElement)&&(Mi(fe)||fe[Vi]))break e;if((F||B)&&(B=Q.window===Q?Q:(B=Q.ownerDocument)?B.defaultView||B.parentWindow:window,F?(fe=a.relatedTarget||a.toElement,F=z,fe=fe?Mi(fe):null,fe!==null&&(ft=u(fe),Ae=fe.tag,fe!==ft||Ae!==5&&Ae!==27&&Ae!==6)&&(fe=null)):(F=null,fe=z),F!==fe)){if(Ae=Ul,Y="onMouseLeave",M="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=lr,Y="onPointerLeave",M="onPointerEnter",V="pointer"),ft=F==null?B:Pn(F),U=fe==null?B:Pn(fe),B=new Ae(Y,V+"leave",F,a,Q),B.target=ft,B.relatedTarget=U,Y=null,Mi(Q)===z&&(Ae=new Ae(M,V+"enter",fe,a,Q),Ae.target=U,Ae.relatedTarget=ft,Y=Ae),ft=Y,F&&fe)t:{for(Ae=ZA,M=F,V=fe,U=0,Y=M;Y;Y=Ae(Y))U++;Y=0;for(var be=V;be;be=Ae(be))Y++;for(;0<U-Y;)M=Ae(M),U--;for(;0<Y-U;)V=Ae(V),Y--;for(;U--;){if(M===V||V!==null&&M===V.alternate){Ae=M;break t}M=Ae(M),V=Ae(V)}Ae=null}else Ae=null;F!==null&&Wv($,B,F,Ae,!1),fe!==null&&ft!==null&&Wv($,ft,fe,Ae,!0)}}e:{if(B=z?Pn(z):window,F=B.nodeName&&B.nodeName.toLowerCase(),F==="select"||F==="input"&&B.type==="file")var $e=gy;else if(my(B))if(yy)$e=uA;else{$e=oA;var ye=aA}else F=B.nodeName,!F||F.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&Wa(z.elementType)&&($e=gy):$e=lA;if($e&&($e=$e(n,z))){py($,$e,a,Q);break e}ye&&ye(n,B,z),n==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&Nl(B,"number",B.value)}switch(ye=z?Pn(z):window,n){case"focusin":(my(ye)||ye.contentEditable==="true")&&(oo=ye,Ed=z,Fl=null);break;case"focusout":Fl=Ed=oo=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Iy($,a,Q);break;case"selectionchange":if(hA)break;case"keydown":case"keyup":Iy($,a,Q)}var Ue;if(et)e:{switch(n){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else ao?Ws(n,a)&&(Ge="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ge="onCompositionStart");Ge&&(Hi&&a.locale!=="ko"&&(ao||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&ao&&(Ue=kl()):(Bi=Q,Pl="value"in Bi?Bi.value:Bi.textContent,ao=!0)),ye=Vh(z,Ge),0<ye.length&&(Ge=new Fi(Ge,n,null,a,Q),$.push({event:Ge,listeners:ye}),Ue?Ge.data=Ue:(Ue=so(a),Ue!==null&&(Ge.data=Ue)))),(Ue=Jn?nA(n,a):iA(n,a))&&(Ge=Vh(z,"onBeforeInput"),0<Ge.length&&(ye=new Fi("onBeforeInput","beforeinput",null,a,Q),$.push({event:ye,listeners:Ge}),ye.data=Ue)),YA($,n,z,a,Q)}Jv($,i)})}function mu(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Vh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=di(n,a),f!=null&&l.unshift(mu(n,f,d)),f=di(n,i),f!=null&&l.push(mu(n,f,d))),n.tag===3)return l;n=n.return}return[]}function ZA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Wv(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var T=a,C=T.alternate,z=T.stateNode;if(T=T.tag,C!==null&&C===l)break;T!==5&&T!==26&&T!==27||z===null||(C=z,f?(z=di(a,d),z!=null&&_.unshift(mu(a,z,C))):f||(z=di(a,d),z!=null&&_.push(mu(a,z,C)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var WA=/\r\n?/g,eI=/\u0000|\uFFFD/g;function eE(n){return(typeof n=="string"?n:""+n).replace(WA,`
`).replace(eI,"")}function tE(n,i){return i=eE(i),eE(n)===i}function ht(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Cn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Cn(n,""+l);break;case"className":kn(n,"class",l);break;case"tabIndex":kn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(n,a,l);break;case"style":Ol(n,l,d);break;case"data":if(i!=="object"){kn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=eo(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&ht(n,i,"name",f.name,f,null),ht(n,i,"formEncType",f.formEncType,f,null),ht(n,i,"formMethod",f.formMethod,f,null),ht(n,i,"formTarget",f.formTarget,f,null)):(ht(n,i,"encType",f.encType,f,null),ht(n,i,"method",f.method,f,null),ht(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=eo(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=fi);break;case"onScroll":l!=null&&qe("scroll",n);break;case"onScrollEnd":l!=null&&qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=eo(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":qe("beforetoggle",n),qe("toggle",n),Ja(n,"popover",l);break;case"xlinkActuate":Lt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Lt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Lt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Lt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Lt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Lt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Lt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Lt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Lt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ja(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vc.get(a)||a,Ja(n,a,l))}}function Km(n,i,a,l,f,d){switch(a){case"style":Ol(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Cn(n,l):(typeof l=="number"||typeof l=="bigint")&&Cn(n,""+l);break;case"onScroll":l!=null&&qe("scroll",n);break;case"onScrollEnd":l!=null&&qe("scrollend",n);break;case"onClick":l!=null&&(n.onclick=fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[Zt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Ja(n,a,l)}}}function hn(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",n),qe("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ht(n,i,d,_,a,null)}}f&&ht(n,i,"srcSet",a.srcSet,a,null),l&&ht(n,i,"src",a.src,a,null);return;case"input":qe("invalid",n);var T=d=_=f=null,C=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":_=Q;break;case"checked":C=Q;break;case"defaultChecked":z=Q;break;case"value":d=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:ht(n,i,l,Q,a,null)}}xc(n,d,T,C,z,_,f,!1);return;case"select":qe("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:ht(n,i,f,T,a,null)}i=d,a=_,n.multiple=!!l,i!=null?jr(n,!!l,i,!1):a!=null&&jr(n,!!l,a,!0);return;case"textarea":qe("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:ht(n,i,_,T,a,null)}qr(n,l,f,d);return;case"option":for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null)&&(C==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":ht(n,i,C,l,a,null));return;case"dialog":qe("beforetoggle",n),qe("toggle",n),qe("cancel",n),qe("close",n);break;case"iframe":case"object":qe("load",n);break;case"video":case"audio":for(l=0;l<du.length;l++)qe(du[l],n);break;case"image":qe("error",n),qe("load",n);break;case"details":qe("toggle",n);break;case"embed":case"source":case"link":qe("error",n),qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ht(n,i,z,l,a,null)}return;default:if(Wa(i)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Km(n,i,Q,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&ht(n,i,T,l,a,null))}function tI(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,T=null,C=null,z=null,Q=null;for(F in a){var $=a[F];if(a.hasOwnProperty(F)&&$!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":C=$;default:l.hasOwnProperty(F)||ht(n,i,F,null,l,$)}}for(var B in l){var F=l[B];if($=a[B],l.hasOwnProperty(B)&&(F!=null||$!=null))switch(B){case"type":d=F;break;case"name":f=F;break;case"checked":z=F;break;case"defaultChecked":Q=F;break;case"value":_=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==$&&ht(n,i,B,F,l,$)}}Za(n,_,T,C,z,Q,d,f);return;case"select":F=_=T=B=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":F=C;default:l.hasOwnProperty(d)||ht(n,i,d,null,l,C)}for(f in l)if(d=l[f],C=a[f],l.hasOwnProperty(f)&&(d!=null||C!=null))switch(f){case"value":B=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==C&&ht(n,i,f,d,l,C)}i=T,a=_,l=F,B!=null?jr(n,!!a,B,!1):!!l!=!!a&&(i!=null?jr(n,!!a,i,!0):jr(n,!!a,a?[]:"",!1));return;case"textarea":F=B=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ht(n,i,T,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":B=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&ht(n,i,_,f,l,d)}Dc(n,B,F);return;case"option":for(var fe in a)B=a[fe],a.hasOwnProperty(fe)&&B!=null&&!l.hasOwnProperty(fe)&&(fe==="selected"?n.selected=!1:ht(n,i,fe,null,l,B));for(C in l)B=l[C],F=a[C],l.hasOwnProperty(C)&&B!==F&&(B!=null||F!=null)&&(C==="selected"?n.selected=B&&typeof B!="function"&&typeof B!="symbol":ht(n,i,C,B,l,F));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)B=a[Ae],a.hasOwnProperty(Ae)&&B!=null&&!l.hasOwnProperty(Ae)&&ht(n,i,Ae,null,l,B);for(z in l)if(B=l[z],F=a[z],l.hasOwnProperty(z)&&B!==F&&(B!=null||F!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:ht(n,i,z,B,l,F)}return;default:if(Wa(i)){for(var ft in a)B=a[ft],a.hasOwnProperty(ft)&&B!==void 0&&!l.hasOwnProperty(ft)&&Km(n,i,ft,void 0,l,B);for(Q in l)B=l[Q],F=a[Q],!l.hasOwnProperty(Q)||B===F||B===void 0&&F===void 0||Km(n,i,Q,B,l,F);return}}for(var M in a)B=a[M],a.hasOwnProperty(M)&&B!=null&&!l.hasOwnProperty(M)&&ht(n,i,M,null,l,B);for($ in l)B=l[$],F=a[$],!l.hasOwnProperty($)||B===F||B==null&&F==null||ht(n,i,$,B,l,F)}function nE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nI(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,T=f.duration;if(d&&T&&nE(_)){for(_=0,T=f.responseEnd,l+=1;l<a.length;l++){var C=a[l],z=C.startTime;if(z>T)break;var Q=C.transferSize,$=C.initiatorType;Q&&nE($)&&(C=C.responseEnd,_+=Q*(C<T?1:(T-z)/(C-z)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qm=null,Ym=null;function Oh(n){return n.nodeType===9?n:n.ownerDocument}function iE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Xm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $m=null;function iI(){var n=window.event;return n&&n.type==="popstate"?n===$m?!1:($m=n,!0):($m=null,!1)}var sE=typeof setTimeout=="function"?setTimeout:void 0,rI=typeof clearTimeout=="function"?clearTimeout:void 0,aE=typeof Promise=="function"?Promise:void 0,sI=typeof queueMicrotask=="function"?queueMicrotask:typeof aE<"u"?function(n){return aE.resolve(null).then(n).catch(aI)}:sE;function aI(n){setTimeout(function(){throw n})}function hs(n){return n==="head"}function oE(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),Po(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")pu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,pu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[Oi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&pu(n.ownerDocument.body);a=f}while(a);Po(i)}function lE(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function Jm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Jm(a),$a(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function oI(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Oi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ri(n.nextSibling),n===null)break}return null}function lI(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ri(n.nextSibling),n===null))return null;return n}function uE(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=ri(n.nextSibling),n===null))return null;return n}function Zm(n){return n.data==="$?"||n.data==="$~"}function Wm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function uI(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ri(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ep=null;function cE(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return ri(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function hE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function fE(n,i,a){switch(i=Oh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function pu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);$a(n)}var si=new Map,dE=new Set;function Mh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Sr=se.d;se.d={f:cI,r:hI,D:fI,C:dI,L:mI,m:pI,X:yI,S:gI,M:_I};function cI(){var n=Sr.f(),i=Ih();return n||i}function hI(n){var i=Yn(n);i!==null&&i.tag===5&&i.type==="form"?D_(i):Sr.r(n)}var Vo=typeof document>"u"?null:document;function mE(n,i,a){var l=Vo;if(l&&typeof i=="string"&&i){var f=Rn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),dE.has(f)||(dE.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),hn(i,"link",n),kt(i),l.head.appendChild(i)))}}function fI(n){Sr.D(n),mE("dns-prefetch",n,null)}function dI(n,i){Sr.C(n,i),mE("preconnect",n,i)}function mI(n,i,a){Sr.L(n,i,a);var l=Vo;if(l&&n&&i){var f='link[rel="preload"][as="'+Rn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Rn(a.imageSizes)+'"]')):f+='[href="'+Rn(n)+'"]';var d=f;switch(i){case"style":d=Oo(n);break;case"script":d=Mo(n)}si.has(d)||(n=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),si.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(gu(d))||i==="script"&&l.querySelector(yu(d))||(i=l.createElement("link"),hn(i,"link",n),kt(i),l.head.appendChild(i)))}}function pI(n,i){Sr.m(n,i);var a=Vo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Rn(l)+'"][href="'+Rn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Mo(n)}if(!si.has(d)&&(n=S({rel:"modulepreload",href:n},i),si.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(yu(d)))return}l=a.createElement("link"),hn(l,"link",n),kt(l),a.head.appendChild(l)}}}function gI(n,i,a){Sr.S(n,i,a);var l=Vo;if(l&&n){var f=Pi(l).hoistableStyles,d=Oo(n);i=i||"default";var _=f.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(gu(d)))T.loading=5;else{n=S({rel:"stylesheet",href:n,"data-precedence":i},a),(a=si.get(d))&&tp(n,a);var C=_=l.createElement("link");kt(C),hn(C,"link",n),C._p=new Promise(function(z,Q){C.onload=z,C.onerror=Q}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ph(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(d,_)}}}function yI(n,i){Sr.X(n,i);var a=Vo;if(a&&n){var l=Pi(a).hoistableScripts,f=Mo(n),d=l.get(f);d||(d=a.querySelector(yu(f)),d||(n=S({src:n,async:!0},i),(i=si.get(f))&&np(n,i),d=a.createElement("script"),kt(d),hn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function _I(n,i){Sr.M(n,i);var a=Vo;if(a&&n){var l=Pi(a).hoistableScripts,f=Mo(n),d=l.get(f);d||(d=a.querySelector(yu(f)),d||(n=S({src:n,async:!0,type:"module"},i),(i=si.get(f))&&np(n,i),d=a.createElement("script"),kt(d),hn(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function pE(n,i,a,l){var f=(f=Ce.current)?Mh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Oo(a.href),a=Pi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Oo(a.href);var d=Pi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(gu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),si.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},si.set(n,a),d||vI(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Mo(a),a=Pi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Oo(n){return'href="'+Rn(n)+'"'}function gu(n){return'link[rel="stylesheet"]['+n+"]"}function gE(n){return S({},n,{"data-precedence":n.precedence,precedence:null})}function vI(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),hn(i,"link",a),kt(i),n.head.appendChild(i))}function Mo(n){return'[src="'+Rn(n)+'"]'}function yu(n){return"script[async]"+n}function yE(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+Rn(a.href)+'"]');if(l)return i.instance=l,kt(l),l;var f=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),kt(l),hn(l,"style",f),Ph(l,a.precedence,n),i.instance=l;case"stylesheet":f=Oo(a.href);var d=n.querySelector(gu(f));if(d)return i.state.loading|=4,i.instance=d,kt(d),d;l=gE(a),(f=si.get(f))&&tp(l,f),d=(n.ownerDocument||n).createElement("link"),kt(d);var _=d;return _._p=new Promise(function(T,C){_.onload=T,_.onerror=C}),hn(d,"link",l),i.state.loading|=4,Ph(d,a.precedence,n),i.instance=d;case"script":return d=Mo(a.src),(f=n.querySelector(yu(d)))?(i.instance=f,kt(f),f):(l=a,(f=si.get(d))&&(l=S({},a),np(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),kt(f),hn(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Ph(l,a.precedence,n));return i.instance}function Ph(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function tp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function np(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var kh=null;function _E(n,i,a){if(kh===null){var l=new Map,f=kh=new Map;f.set(a,l)}else f=kh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Oi]||d[Pt]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function vE(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function EI(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function EE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function TI(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Oo(l.href),d=i.querySelector(gu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Lh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,kt(d);return}d=i.ownerDocument||i,l=gE(l),(f=si.get(f))&&tp(l,f),d=d.createElement("link"),kt(d);var _=d;_._p=new Promise(function(T,C){_.onload=T,_.onerror=C}),hn(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Lh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var ip=0;function bI(n,i){return n.stylesheets&&n.count===0&&zh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&ip===0&&(ip=62500*nI());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>ip?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Uh=null;function zh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Uh=new Map,i.forEach(SI,n),Uh=null,Lh.call(n))}function SI(n,i){if(!(i.state.loading&4)){var a=Uh.get(n);if(a)var l=a.get(null);else{a=new Map,Uh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=Lh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var _u={$$typeof:le,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function AI(n,i,a,l,f,d,_,T,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=an(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=an(0),this.hiddenUpdates=an(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function TE(n,i,a,l,f,d,_,T,C,z,Q,$){return n=new AI(n,i,a,_,C,z,Q,$,T),i=1,d===!0&&(i|=24),d=Un(3,null,null,i),n.current=d,d.stateNode=n,i=kd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Bd(d),n}function bE(n){return n?(n=co,n):co}function SE(n,i,a,l,f,d){f=bE(f),l.context===null?l.context=f:l.pendingContext=f,l=es(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=ts(n,l,i),a!==null&&(On(a,n,i),$l(a,n,i))}function AE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function rp(n,i){AE(n,i),(n=n.alternate)&&AE(n,i)}function IE(n){if(n.tag===13||n.tag===31){var i=na(n,67108864);i!==null&&On(i,n,67108864),rp(n,67108864)}}function wE(n){if(n.tag===13||n.tag===31){var i=Fn();i=Hs(i);var a=na(n,i);a!==null&&On(a,n,i),rp(n,i)}}var Bh=!0;function II(n,i,a,l){var f=G.T;G.T=null;var d=se.p;try{se.p=2,sp(n,i,a,l)}finally{se.p=d,G.T=f}}function wI(n,i,a,l){var f=G.T;G.T=null;var d=se.p;try{se.p=8,sp(n,i,a,l)}finally{se.p=d,G.T=f}}function sp(n,i,a,l){if(Bh){var f=ap(l);if(f===null)Gm(n,i,l,jh,a),CE(n,l);else if(CI(f,n,i,a,l))l.stopPropagation();else if(CE(n,l),i&4&&-1<RI.indexOf(n)){for(;f!==null;){var d=Yn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Te(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var C=1<<31-It(_);T.entanglements[1]|=C,_&=~C}Yi(d),(tt&6)===0&&(Sh=sn()+500,fu(0))}}break;case 31:case 13:T=na(d,2),T!==null&&On(T,d,2),Ih(),rp(d,2)}if(d=ap(l),d===null&&Gm(n,i,l,jh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Gm(n,i,l,null,a)}}function ap(n){return n=Xn(n),op(n)}var jh=null;function op(n){if(jh=null,n=Mi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return jh=n,null}function RE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ir()){case zs:return 2;case Bs:return 8;case Ni:case js:return 32;case Ga:return 268435456;default:return 32}default:return 32}}var lp=!1,fs=null,ds=null,ms=null,vu=new Map,Eu=new Map,ps=[],RI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function CE(n,i){switch(n){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":vu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(i.pointerId)}}function Tu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Yn(i),i!==null&&IE(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function CI(n,i,a,l,f){switch(i){case"focusin":return fs=Tu(fs,n,i,a,l,f),!0;case"dragenter":return ds=Tu(ds,n,i,a,l,f),!0;case"mouseover":return ms=Tu(ms,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return vu.set(d,Tu(vu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Eu.set(d,Tu(Eu.get(d)||null,n,i,a,l,f)),!0}return!1}function xE(n){var i=Mi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,ci(n.priority,function(){wE(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,ci(n.priority,function(){wE(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=ap(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Ml=l,a.target.dispatchEvent(l),Ml=null}else return i=Yn(a),i!==null&&IE(i),n.blockedOn=a,!1;i.shift()}return!0}function DE(n,i,a){qh(n)&&a.delete(i)}function xI(){lp=!1,fs!==null&&qh(fs)&&(fs=null),ds!==null&&qh(ds)&&(ds=null),ms!==null&&qh(ms)&&(ms=null),vu.forEach(DE),Eu.forEach(DE)}function Fh(n,i){n.blockedOn===i&&(n.blockedOn=null,lp||(lp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,xI)))}var Hh=null;function NE(n){Hh!==n&&(Hh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Hh===n&&(Hh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(op(l||a)===null)continue;break}var d=Yn(a);d!==null&&(n.splice(i,3),i-=3,am(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Po(n){function i(C){return Fh(C,n)}fs!==null&&Fh(fs,n),ds!==null&&Fh(ds,n),ms!==null&&Fh(ms,n),vu.forEach(i),Eu.forEach(i);for(var a=0;a<ps.length;a++){var l=ps[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<ps.length&&(a=ps[0],a.blockedOn===null);)xE(a),a.blockedOn===null&&ps.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Zt]||null;if(typeof d=="function")_||NE(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Zt]||null)T=_.formAction;else if(op(f)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),NE(a)}}}function VE(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function up(n){this._internalRoot=n}Gh.prototype.render=up.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Fn();SE(a,l,n,i,null,null)},Gh.prototype.unmount=up.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;SE(n.current,2,null,n,null,null),Ih(),i[Vi]=null}};function Gh(n){this._internalRoot=n}Gh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ic();n={blockedOn:null,target:n,priority:i};for(var a=0;a<ps.length&&i!==0&&i<ps[a].priority;a++);ps.splice(a,0,n),a===0&&xE(n)}};var OE=e.version;if(OE!=="19.2.3")throw Error(r(527,OE,"19.2.3"));se.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var DI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kh.isDisabled&&Kh.supportsFiber)try{In=Kh.inject(DI),Kt=Kh}catch{}}return Su.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=B_,d=j_,_=q_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=TE(n,1,!1,null,null,a,l,null,f,d,_,VE),n[Vi]=i.current,Hm(n),new up(i)},Su.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=B_,_=j_,T=q_,C=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),i=TE(n,1,!0,i,a??null,l,f,C,d,_,T,VE),i.context=bE(null),a=i.current,l=Fn(),l=Hs(l),f=es(l),f.callback=null,ts(a,f,l),a=l,i.current.lanes=a,qs(i,a),Yi(i),n[Vi]=i.current,Hm(n),new Gh(i)},Su.version="19.2.3",Su}var FE;function BI(){if(FE)return fp.exports;FE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),fp.exports=zI(),fp.exports}var jI=BI();const qI=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FI=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),HE=s=>{const e=FI(s);return e.charAt(0).toUpperCase()+e.slice(1)},G0=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),HI=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var GI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const KI=xe.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},p)=>xe.createElement("svg",{ref:p,...GI,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:G0("lucide",o),...!u&&!HI(m)&&{"aria-hidden":"true"},...m},[...c.map(([y,E])=>xe.createElement(y,E)),...Array.isArray(u)?u:[u]]));const nn=(s,e)=>{const t=xe.forwardRef(({className:r,...o},u)=>xe.createElement(KI,{ref:u,iconNode:e,className:G0(`lucide-${qI(HE(s))}`,`lucide-${s}`,r),...o}));return t.displayName=HE(s),t};const QI=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],YI=nn("chef-hat",QI);const XI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$I=nn("circle-check-big",XI);const JI=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M9 12v-1h6v1",key:"iehl6m"}],["path",{d:"M11 17h2",key:"12w5me"}],["path",{d:"M12 11v6",key:"1bwqyc"}]],ZI=nn("clipboard-type",JI);const WI=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ew=nn("key",WI);const tw=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],nw=nn("layers",tw);const iw=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],rw=nn("link",iw);const sw=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gp=nn("loader-circle",sw);const aw=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ow=nn("moon",aw);const lw=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],uw=nn("pen",lw);const cw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hw=nn("plus",cw);const fw=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dw=nn("refresh-cw",fw);const mw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pw=nn("save",mw);const gw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yw=nn("search",gw);const _w=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],vw=nn("sun",_w);const Ew=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],Tw=nn("text-align-start",Ew);const bw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sw=nn("trash-2",bw);const Aw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Iw=nn("user",Aw);const ww=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yp=nn("x",ww),Rw=()=>{};var GE={};const K0=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Cw=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],c=s[t++],m=s[t++],p=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=s[t++],c=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,E=u>>2,S=(u&3)<<4|m>>4;let w=(m&15)<<2|y>>6,j=y&63;p||(j=64,c||(w=64)),r.push(t[E],t[S],t[w],t[j])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(K0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Cw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const y=o<s.length?t[s.charAt(o)]:64;++o;const S=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||y==null||S==null)throw new xw;const w=u<<2|m>>4;if(r.push(w),y!==64){const j=m<<4&240|y>>2;if(r.push(j),S!==64){const Z=y<<6&192|S;r.push(Z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class xw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dw=function(s){const e=K0(s);return Q0.encodeByteArray(e,!0)},_f=function(s){return Dw(s).replace(/\./g,"")},Y0=function(s){try{return Q0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function X0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Nw=()=>X0().__FIREBASE_DEFAULTS__,Vw=()=>{if(typeof process>"u"||typeof GE>"u")return;const s=GE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Ow=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Y0(s[1]);return e&&JSON.parse(e)},qf=()=>{try{return Rw()||Nw()||Vw()||Ow()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},$0=s=>qf()?.emulatorHosts?.[s],Mw=s=>{const e=$0(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},J0=()=>qf()?.config,Z0=s=>qf()?.[`_${s}`];class Pw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function pl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function W0(s){return(await fetch(s,{credentials:"include"})).ok}function kw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[_f(JSON.stringify(t)),_f(JSON.stringify(c)),""].join(".")}const Bu={};function Lw(){const s={prod:[],emulator:[]};for(const e of Object.keys(Bu))Bu[e]?s.emulator.push(e):s.prod.push(e);return s}function Uw(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let KE=!1;function eb(s,e){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||Bu[s]===e||Bu[s]||KE)return;Bu[s]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",u=Lw().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,j){w.setAttribute("width","24"),w.setAttribute("id",j),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{KE=!0,c()},w}function E(w,j){w.setAttribute("id",j),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function S(){const w=Uw(r),j=t("text"),Z=document.getElementById(j)||document.createElement("span"),W=t("learnmore"),te=document.getElementById(W)||document.createElement("a"),ge=t("preprendIcon"),Ee=document.getElementById(ge)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const le=w.element;m(le),E(te,W);const Le=y();p(Ee,ge),le.append(Ee,Z,te,Le),document.body.appendChild(le)}u?(Z.innerText="Preview backend disconnected.",Ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function tb(){const s=qf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function qw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fw(){const s=Xt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function nb(){return!tb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ib(){return!tb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function rb(){try{return typeof indexedDB=="object"}catch{return!1}}function Hw(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const Gw="FirebaseError";class Or extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Gw,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fc.prototype.create)}}class fc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?Kw(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new Or(o,m,r)}}function Kw(s,e){return s.replace(Qw,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Qw=/\{\$([^}]+)}/g;function Yw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Da(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const u=s[o],c=e[o];if(QE(u)&&QE(c)){if(!Da(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function QE(s){return s!==null&&typeof s=="object"}function dc(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vu(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Ou(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function Xw(s,e){const t=new $w(s,e);return t.subscribe.bind(t)}class $w{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Jw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=_p),o.error===void 0&&(o.error=_p),o.complete===void 0&&(o.complete=_p);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jw(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function _p(){}function $t(s){return s&&s._delegate?s._delegate:s}class Na{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ya="[DEFAULT]";class Zw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Pw;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eR(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ww(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ww(s){return s===ya?void 0:s}function eR(s){return s.instantiationMode==="EAGER"}class tR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Zw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ke||(Ke={}));const nR={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},iR=Ke.INFO,rR={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},sR=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=rR[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dg{constructor(e){this.name=e,this._logLevel=iR,this._logHandler=sR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const aR=(s,e)=>e.some(t=>s instanceof t);let YE,XE;function oR(){return YE||(YE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lR(){return XE||(XE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sb=new WeakMap,Op=new WeakMap,ab=new WeakMap,vp=new WeakMap,mg=new WeakMap;function uR(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{t(ws(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&sb.set(t,s)}).catch(()=>{}),mg.set(e,s),e}function cR(s){if(Op.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{t(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Op.set(s,e)}let Mp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Op.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ab.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function hR(s){Mp=s(Mp)}function fR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Ep(this),e,...t);return ab.set(r,e.sort?e.sort():[e]),ws(r)}:lR().includes(s)?function(...e){return s.apply(Ep(this),e),ws(sb.get(this))}:function(...e){return ws(s.apply(Ep(this),e))}}function dR(s){return typeof s=="function"?fR(s):(s instanceof IDBTransaction&&cR(s),aR(s,oR())?new Proxy(s,Mp):s)}function ws(s){if(s instanceof IDBRequest)return uR(s);if(vp.has(s))return vp.get(s);const e=dR(s);return e!==s&&(vp.set(s,e),mg.set(e,s)),e}const Ep=s=>mg.get(s);function mR(s,e,{blocked:t,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,e),m=ws(c);return r&&c.addEventListener("upgradeneeded",p=>{r(ws(c.result),p.oldVersion,p.newVersion,ws(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const pR=["get","getKey","getAll","getAllKeys","count"],gR=["put","add","delete","clear"],Tp=new Map;function $E(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Tp.get(e))return Tp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=gR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||pR.includes(t)))return;const u=async function(c,...m){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&p.done]))[0]};return Tp.set(e,u),u}hR(s=>({...s,get:(e,t,r)=>$E(e,t)||s.get(e,t,r),has:(e,t)=>!!$E(e,t)||s.has(e,t)}));class yR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_R(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function _R(s){return s.getComponent()?.type==="VERSION"}const Pp="@firebase/app",JE="0.14.7";const xr=new dg("@firebase/app"),vR="@firebase/app-compat",ER="@firebase/analytics-compat",TR="@firebase/analytics",bR="@firebase/app-check-compat",SR="@firebase/app-check",AR="@firebase/auth",IR="@firebase/auth-compat",wR="@firebase/database",RR="@firebase/data-connect",CR="@firebase/database-compat",xR="@firebase/functions",DR="@firebase/functions-compat",NR="@firebase/installations",VR="@firebase/installations-compat",OR="@firebase/messaging",MR="@firebase/messaging-compat",PR="@firebase/performance",kR="@firebase/performance-compat",LR="@firebase/remote-config",UR="@firebase/remote-config-compat",zR="@firebase/storage",BR="@firebase/storage-compat",jR="@firebase/firestore",qR="@firebase/ai",FR="@firebase/firestore-compat",HR="firebase",GR="12.8.0";const kp="[DEFAULT]",KR={[Pp]:"fire-core",[vR]:"fire-core-compat",[TR]:"fire-analytics",[ER]:"fire-analytics-compat",[SR]:"fire-app-check",[bR]:"fire-app-check-compat",[AR]:"fire-auth",[IR]:"fire-auth-compat",[wR]:"fire-rtdb",[RR]:"fire-data-connect",[CR]:"fire-rtdb-compat",[xR]:"fire-fn",[DR]:"fire-fn-compat",[NR]:"fire-iid",[VR]:"fire-iid-compat",[OR]:"fire-fcm",[MR]:"fire-fcm-compat",[PR]:"fire-perf",[kR]:"fire-perf-compat",[LR]:"fire-rc",[UR]:"fire-rc-compat",[zR]:"fire-gcs",[BR]:"fire-gcs-compat",[jR]:"fire-fst",[FR]:"fire-fst-compat",[qR]:"fire-vertex","fire-js":"fire-js",[HR]:"fire-js-all"};const $u=new Map,QR=new Map,Lp=new Map;function ZE(s,e){try{s.container.addComponent(e)}catch(t){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function el(s){const e=s.name;if(Lp.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;Lp.set(e,s);for(const t of $u.values())ZE(t,s);for(const t of QR.values())ZE(t,s);return!0}function pg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Tn(s){return s==null?!1:s.settings!==void 0}const YR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new fc("app","Firebase",YR);class XR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}const gl=GR;function ob(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:kp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Rs.create("bad-app-name",{appName:String(o)});if(t||(t=J0()),!t)throw Rs.create("no-options");const u=$u.get(o);if(u){if(Da(t,u.options)&&Da(r,u.config))return u;throw Rs.create("duplicate-app",{appName:o})}const c=new tR(o);for(const p of Lp.values())c.addComponent(p);const m=new XR(t,r,c);return $u.set(o,m),m}function gg(s=kp){const e=$u.get(s);if(!e&&s===kp&&J0())return ob();if(!e)throw Rs.create("no-app",{appName:s});return e}function $R(){return Array.from($u.values())}function Cs(s,e,t){let r=KR[s]??s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(c.join(" "));return}el(new Na(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const JR="firebase-heartbeat-database",ZR=1,Ju="firebase-heartbeat-store";let bp=null;function lb(){return bp||(bp=mR(JR,ZR,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(s=>{throw Rs.create("idb-open",{originalErrorMessage:s.message})})),bp}async function WR(s){try{const t=(await lb()).transaction(Ju),r=await t.objectStore(Ju).get(ub(s));return await t.done,r}catch(e){if(e instanceof Or)xr.warn(e.message);else{const t=Rs.create("idb-get",{originalErrorMessage:e?.message});xr.warn(t.message)}}}async function WE(s,e){try{const r=(await lb()).transaction(Ju,"readwrite");await r.objectStore(Ju).put(e,ub(s)),await r.done}catch(t){if(t instanceof Or)xr.warn(t.message);else{const r=Rs.create("idb-set",{originalErrorMessage:t?.message});xr.warn(r.message)}}}function ub(s){return`${s.name}!${s.options.appId}`}const eC=1024,tC=30;class nC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=eT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>tC){const o=sC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=eT(),{heartbeatsToSend:t,unsentEntries:r}=iC(this._heartbeatsCache.heartbeats),o=_f(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return xr.warn(e),""}}}function eT(){return new Date().toISOString().substring(0,10)}function iC(s,e=eC){const t=[];let r=s.slice();for(const o of s){const u=t.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),tT(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),tT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class rC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rb()?Hw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return WE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return WE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tT(s){return _f(JSON.stringify({version:2,heartbeats:s})).length}function sC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function aC(s){el(new Na("platform-logger",e=>new yR(e),"PRIVATE")),el(new Na("heartbeat",e=>new nC(e),"PRIVATE")),Cs(Pp,JE,s),Cs(Pp,JE,"esm2020"),Cs("fire-js","")}aC("");var oC="firebase",lC="12.8.0";Cs(oC,lC,"app");function cb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uC=cb,hb=new fc("auth","Firebase",cb());const vf=new dg("@firebase/auth");function cC(s,...e){vf.logLevel<=Ke.WARN&&vf.warn(`Auth (${gl}): ${s}`,...e)}function tf(s,...e){vf.logLevel<=Ke.ERROR&&vf.error(`Auth (${gl}): ${s}`,...e)}function ui(s,...e){throw _g(s,...e)}function Si(s,...e){return _g(s,...e)}function yg(s,e,t){const r={...uC(),[e]:t};return new fc("auth","Firebase",r).create(e,{appName:s.name})}function Ai(s){return yg(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hC(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ui(s,"argument-error"),yg(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _g(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return hb.create(s,...e)}function Re(s,e,...t){if(!s)throw _g(e,...t)}function Ir(s){const e="INTERNAL ASSERTION FAILED: "+s;throw tf(e),new Error(e)}function Dr(s,e){s||Ir(e)}function Up(){return typeof self<"u"&&self.location?.href||""}function fC(){return nT()==="http:"||nT()==="https:"}function nT(){return typeof self<"u"&&self.location?.protocol||null}function dC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fC()||jw()||"connection"in navigator)?navigator.onLine:!0}function mC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class mc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dr(t>e,"Short delay should be less than long delay!"),this.isMobile=zw()||qw()}get(){return dC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vg(s,e){Dr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class fb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const gC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yC=new mc(3e4,6e4);function Mr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Pr(s,e,t,r,o={}){return db(s,o,async()=>{let u={},c={};r&&(e==="GET"?c=r:u={body:JSON.stringify(r)});const m=dc({key:s.config.apiKey,...c}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:p,...u};return Bw()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&pl(s.emulatorConfig.host)&&(y.credentials="include"),fb.fetch()(await mb(s,s.config.apiHost,t,m),y)})}async function db(s,e,t){s._canInitEmulator=!1;const r={...pC,...e};try{const o=new vC(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Qh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(s,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Qh(s,"email-already-in-use",c);if(p==="USER_DISABLED")throw Qh(s,"user-disabled",c);const E=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw yg(s,E,y);ui(s,E)}}catch(o){if(o instanceof Or)throw o;ui(s,"network-request-failed",{message:String(o)})}}async function yl(s,e,t,r,o={}){const u=await Pr(s,e,t,r,o);return"mfaPendingCredential"in u&&ui(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function mb(s,e,t,r){const o=`${e}${t}?${r}`,u=s,c=u.config.emulator?vg(s.config,o):`${s.config.apiScheme}://${o}`;return gC.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function _C(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),yC.get())})}}function Qh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Si(s,e,r);return o.customData._tokenResponse=t,o}function iT(s){return s!==void 0&&s.enterprise!==void 0}class EC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _C(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TC(s,e){return Pr(s,"GET","/v2/recaptchaConfig",Mr(s,e))}async function bC(s,e){return Pr(s,"POST","/v1/accounts:delete",e)}async function Ef(s,e){return Pr(s,"POST","/v1/accounts:lookup",e)}function ju(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SC(s,e=!1){const t=$t(s),r=await t.getIdToken(e),o=Eg(r);Re(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:r,authTime:ju(Sp(o.auth_time)),issuedAtTime:ju(Sp(o.iat)),expirationTime:ju(Sp(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Sp(s){return Number(s)*1e3}function Eg(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const o=Y0(t);return o?JSON.parse(o):(tf("Failed to decode base64 JWT payload"),null)}catch(o){return tf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function rT(s){const e=Eg(s);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function tl(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Or&&AC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function AC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class IC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class zp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tf(s){const e=s.auth,t=await s.getIdToken(),r=await tl(s,Ef(e,{idToken:t}));Re(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?pb(o.providerUserInfo):[],c=RC(s.providerData,u),m=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!c?.length,y=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new zp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,E)}async function wC(s){const e=$t(s);await Tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RC(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function pb(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function CC(s,e){const t=await db(s,{},async()=>{const r=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await mb(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:r};return s.emulatorConfig&&pl(s.emulatorConfig.host)&&(p.credentials="include"),fb.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xC(s,e){return Pr(s,"POST","/v2/accounts:revokeToken",Mr(s,e))}class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=rT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:u}=await CC(e,t);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:u}=t,c=new Yo;return r&&(Re(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Re(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(Re(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return Ir("not implemented")}}function ys(s,e){Re(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class bi{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new IC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new zp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await tl(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SC(this,e)}reload(){return wC(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Tf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(Ai(this.auth));const e=await this.getIdToken();return await tl(this,bC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:S,emailVerified:w,isAnonymous:j,providerData:Z,stsTokenManager:W}=t;Re(S&&W,e,"internal-error");const te=Yo.fromJSON(this.name,W);Re(typeof S=="string",e,"internal-error"),ys(r,e.name),ys(o,e.name),Re(typeof w=="boolean",e,"internal-error"),Re(typeof j=="boolean",e,"internal-error"),ys(u,e.name),ys(c,e.name),ys(m,e.name),ys(p,e.name),ys(y,e.name),ys(E,e.name);const ge=new bi({uid:S,auth:e,email:o,emailVerified:w,displayName:r,isAnonymous:j,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:te,createdAt:y,lastLoginAt:E});return Z&&Array.isArray(Z)&&(ge.providerData=Z.map(Ee=>({...Ee}))),p&&(ge._redirectEventId=p),ge}static async _fromIdTokenResponse(e,t,r=!1){const o=new Yo;o.updateFromServerResponse(t);const u=new bi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Tf(u),u}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Re(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?pb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Yo;m.updateFromIdToken(r);const p=new bi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new zp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,y),p}}const sT=new Map;function wr(s){Dr(s instanceof Function,"Expected a class definition");let e=sT.get(s);return e?(Dr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,sT.set(s,e),e)}class gb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gb.type="NONE";const aT=gb;function nf(s,e,t){return`firebase:${s}:${e}:${t}`}class Xo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=nf(this.userKey,o.apiKey,u),this.fullPersistenceKey=nf("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ef(this.auth,{idToken:e}).catch(()=>{});return t?bi._fromGetAccountInfoResponse(this.auth,t,e):null}return bi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Xo(wr(aT),e,r);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||wr(aT);const c=nf(r,e.config.apiKey,e.name);let m=null;for(const y of t)try{const E=await y._get(c);if(E){let S;if(typeof E=="string"){const w=await Ef(e,{idToken:E}).catch(()=>{});if(!w)break;S=await bi._fromGetAccountInfoResponse(e,w,E)}else S=bi._fromJSON(e,E);y!==u&&(m=S),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Xo(u,e,r):(u=p[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(c)}catch{}})),new Xo(u,e,r))}}function oT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Eb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bb(e))return"Blackberry";if(Sb(e))return"Webos";if(_b(e))return"Safari";if((e.includes("chrome/")||vb(e))&&!e.includes("edge/"))return"Chrome";if(Tb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function yb(s=Xt()){return/firefox\//i.test(s)}function _b(s=Xt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vb(s=Xt()){return/crios\//i.test(s)}function Eb(s=Xt()){return/iemobile/i.test(s)}function Tb(s=Xt()){return/android/i.test(s)}function bb(s=Xt()){return/blackberry/i.test(s)}function Sb(s=Xt()){return/webos/i.test(s)}function Tg(s=Xt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function DC(s=Xt()){return Tg(s)&&!!window.navigator?.standalone}function NC(){return Fw()&&document.documentMode===10}function Ab(s=Xt()){return Tg(s)||Tb(s)||Sb(s)||bb(s)||/windows phone/i.test(s)||Eb(s)}function Ib(s,e=[]){let t;switch(s){case"Browser":t=oT(Xt());break;case"Worker":t=`${oT(Xt())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gl}/${r}`}class VC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((c,m)=>{try{const p=e(u);c(p)}catch(p){m(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function OC(s,e={}){return Pr(s,"GET","/v2/passwordPolicy",Mr(s,e))}const MC=6;class PC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??MC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class kC{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lT(this),this.idTokenSubscription=new lT(this),this.beforeStateQueue=new VC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ef(this,{idToken:e}),r=await bi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Tn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===c)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(Ai(this));const t=e?$t(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(Ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(Ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OC(this),t=new PC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await xC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wr(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[wr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ib(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&cC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function nr(s){return $t(s)}class lT{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xw(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LC(s){Ff=s}function wb(s){return Ff.loadJS(s)}function UC(){return Ff.recaptchaEnterpriseScript}function zC(){return Ff.gapiScript}function BC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class jC{constructor(){this.enterprise=new qC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class qC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const FC="recaptcha-enterprise",Rb="NO_RECAPTCHA";class HC{constructor(e){this.type=FC,this.auth=nr(e)}async verify(e="verify",t=!1){async function r(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,m)=>{TC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new EC(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,c(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,c,m){const p=window.grecaptcha;iT(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{c(y)}).catch(()=>{c(Rb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jC().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{r(this.auth).then(m=>{if(!t&&iT(window.grecaptcha))o(m,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=UC();p.length!==0&&(p+=m),wb(p).then(()=>{o(m,u,c)}).catch(y=>{c(y)})}}).catch(m=>{c(m)})})}}async function uT(s,e,t,r=!1,o=!1){const u=new HC(s);let c;if(o)c=Rb;else try{c=await u.verify(t)}catch{c=await u.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Bp(s,e,t,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await uT(s,e,t,t==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await uT(s,e,t,t==="getOobCode");return r(s,c)}else return Promise.reject(u)})}function GC(s,e){const t=pg(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Da(u,e??{}))return o;ui(o,"already-initialized")}return t.initialize({options:e})}function KC(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(wr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function QC(s,e,t){const r=nr(s);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Cb(e),{host:c,port:m}=YC(e),p=m===null?"":`:${m}`,y={url:`${u}//${c}${p}/`},E=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Da(y,r.config.emulator)&&Da(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,pl(c)?(W0(`${u}//${c}${p}`),eb("Auth",!0)):XC()}function Cb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function YC(s){const e=Cb(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:cT(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:cT(c)}}}function cT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function XC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class bg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,t){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}async function $C(s,e){return Pr(s,"POST","/v1/accounts:signUp",e)}async function JC(s,e){return yl(s,"POST","/v1/accounts:signInWithPassword",Mr(s,e))}async function ZC(s,e){return yl(s,"POST","/v1/accounts:signInWithEmailLink",Mr(s,e))}async function WC(s,e){return yl(s,"POST","/v1/accounts:signInWithEmailLink",Mr(s,e))}class Zu extends bg{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Zu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Zu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bp(e,t,"signInWithPassword",JC);case"emailLink":return ZC(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bp(e,r,"signUpPassword",$C);case"emailLink":return WC(e,{idToken:t,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function $o(s,e){return yl(s,"POST","/v1/accounts:signInWithIdp",Mr(s,e))}const e2="http://localhost";class Va extends bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ui("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=t;if(!r||!o)return null;const c=new Va(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,$o(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:e2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dc(t)}return e}}function t2(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n2(s){const e=Vu(Ou(s)).link,t=e?Vu(Ou(e)).deep_link_id:null,r=Vu(Ou(s)).deep_link_id;return(r?Vu(Ou(r)).link:null)||r||t||e||s}class Sg{constructor(e){const t=Vu(Ou(e)),r=t.apiKey??null,o=t.oobCode??null,u=t2(t.mode??null);Re(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=n2(e);try{return new Sg(t)}catch{return null}}}class _l{constructor(){this.providerId=_l.PROVIDER_ID}static credential(e,t){return Zu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Sg.parseLink(t);return Re(r,"argument-error"),Zu._fromEmailAndCode(e,r.code,r.tenantId)}}_l.PROVIDER_ID="password";_l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ag{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pc extends Ag{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ts extends pc{constructor(){super("facebook.com")}static credential(e){return Va._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ts.PROVIDER_ID="facebook.com";class Ar extends pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Va._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ar.credential(t,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";class bs extends pc{constructor(){super("github.com")}static credential(e){return Va._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.GITHUB_SIGN_IN_METHOD="github.com";bs.PROVIDER_ID="github.com";class Ss extends pc{constructor(){super("twitter.com")}static credential(e,t){return Va._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ss.credential(t,r)}catch{return null}}}Ss.TWITTER_SIGN_IN_METHOD="twitter.com";Ss.PROVIDER_ID="twitter.com";async function xb(s,e){return yl(s,"POST","/v1/accounts:signUp",Mr(s,e))}class er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const u=await bi._fromIdTokenResponse(e,r,o),c=hT(r);return new er({user:u,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=hT(r);return new er({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function hT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function i2(s){if(Tn(s.app))return Promise.reject(Ai(s));const e=nr(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new er({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await xb(e,{returnSecureToken:!0}),r=await er._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class bf extends Or{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,bf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new bf(e,t,r,o)}}function Db(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?bf._fromErrorAndOperation(s,u,e,r):u})}async function r2(s,e,t=!1){const r=await tl(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return er._forOperation(s,"link",r)}async function s2(s,e,t=!1){const{auth:r}=s;if(Tn(r.app))return Promise.reject(Ai(r));const o="reauthenticate";try{const u=await tl(s,Db(r,o,e,s),t);Re(u.idToken,r,"internal-error");const c=Eg(u.idToken);Re(c,r,"internal-error");const{sub:m}=c;return Re(s.uid===m,r,"user-mismatch"),er._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ui(r,"user-mismatch"),u}}async function Nb(s,e,t=!1){if(Tn(s.app))return Promise.reject(Ai(s));const r="signIn",o=await Db(s,r,e),u=await er._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(u.user),u}async function a2(s,e){return Nb(nr(s),e)}async function o2(s,e){return yl(s,"POST","/v1/accounts:signInWithCustomToken",Mr(s,e))}async function l2(s,e){if(Tn(s.app))return Promise.reject(Ai(s));const t=nr(s),r=await o2(t,{token:e,returnSecureToken:!0}),o=await er._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(o.user),o}async function Vb(s){const e=nr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function u2(s,e,t){if(Tn(s.app))return Promise.reject(Ai(s));const r=nr(s),c=await Bp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xb).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Vb(s),p}),m=await er._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(m.user),m}function c2(s,e,t){return Tn(s.app)?Promise.reject(Ai(s)):a2($t(s),_l.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Vb(s),r})}async function h2(s,e){return Pr(s,"POST","/v1/accounts:update",e)}async function f2(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=$t(s),u={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await tl(r,h2(r.auth,u));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const m=r.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function d2(s,e,t,r){return $t(s).onIdTokenChanged(e,t,r)}function m2(s,e,t){return $t(s).beforeAuthStateChanged(e,t)}function p2(s,e,t,r){return $t(s).onAuthStateChanged(e,t,r)}function g2(s){return $t(s).signOut()}const Sf="__sak";class Ob{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const y2=1e3,_2=10;class Mb extends Ob{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ab(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);NC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,_2):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mb.type="LOCAL";const v2=Mb;class Pb extends Ob{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pb.type="SESSION";const kb=Pb;function E2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Hf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:u}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async y=>y(t.origin,u)),p=await E2(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hf.receivers=[];function Ig(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class T2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,p)=>{const y=Ig("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(S){const w=S;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(w.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Zi(){return window}function b2(s){Zi().location.href=s}function Lb(){return typeof Zi().WorkerGlobalScope<"u"&&typeof Zi().importScripts=="function"}async function S2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function A2(){return navigator?.serviceWorker?.controller||null}function I2(){return Lb()?self:null}const Ub="firebaseLocalStorageDb",w2=1,Af="firebaseLocalStorage",zb="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gf(s,e){return s.transaction([Af],e?"readwrite":"readonly").objectStore(Af)}function R2(){const s=indexedDB.deleteDatabase(Ub);return new gc(s).toPromise()}function jp(){const s=indexedDB.open(Ub,w2);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Af,{keyPath:zb})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Af)?e(r):(r.close(),await R2(),e(await jp()))})})}async function fT(s,e,t){const r=Gf(s,!0).put({[zb]:e,value:t});return new gc(r).toPromise()}async function C2(s,e){const t=Gf(s,!1).get(e),r=await new gc(t).toPromise();return r===void 0?null:r.value}function dT(s,e){const t=Gf(s,!0).delete(e);return new gc(t).toPromise()}const x2=800,D2=3;class Bb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>D2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hf._getInstance(I2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await S2(),!this.activeServiceWorker)return;this.sender=new T2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||A2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jp();return await fT(e,Sf,"1"),await dT(e,Sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>fT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>C2(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Gf(o,!1).getAll();return new gc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),x2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bb.type="LOCAL";const N2=Bb;new mc(3e4,6e4);function jb(s,e){return e?wr(e):(Re(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class wg extends bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function V2(s){return Nb(s.auth,new wg(s),s.bypassAuthState)}function O2(s){const{auth:e,user:t}=s;return Re(t,e,"internal-error"),s2(t,new wg(s),s.bypassAuthState)}async function M2(s){const{auth:e,user:t}=s;return Re(t,e,"internal-error"),r2(t,new wg(s),s.bypassAuthState)}class qb{constructor(e,t,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return V2;case"linkViaPopup":case"linkViaRedirect":return M2;case"reauthViaPopup":case"reauthViaRedirect":return O2;default:ui(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const P2=new mc(2e3,1e4);async function k2(s,e,t){if(Tn(s.app))return Promise.reject(Si(s,"operation-not-supported-in-this-environment"));const r=nr(s);hC(s,e,Ag);const o=jb(r,t);return new Aa(r,"signInViaPopup",e,o).executeNotNull()}class Aa extends qb{constructor(e,t,r,o,u){super(e,t,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Dr(this.filter.length===1,"Popup operations only handle one event");const e=Ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,P2.get())};e()}}Aa.currentPopupAction=null;const L2="pendingRedirect",rf=new Map;class U2 extends qb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=rf.get(this.auth._key());if(!e){try{const r=await z2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z2(s,e){const t=q2(e),r=j2(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function B2(s,e){rf.set(s._key(),e)}function j2(s){return wr(s._redirectPersistence)}function q2(s){return nf(L2,s.config.apiKey,s.name)}async function F2(s,e,t=!1){if(Tn(s.app))return Promise.reject(Ai(s));const r=nr(s),o=jb(r,e),c=await new U2(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const H2=600*1e3;class G2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Fb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Si(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H2&&this.cachedEventUids.clear(),this.cachedEventUids.has(mT(e))}saveEventToCache(e){this.cachedEventUids.add(mT(e)),this.lastProcessedEventTime=Date.now()}}function mT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Fb({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function K2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fb(s);default:return!1}}async function Q2(s,e={}){return Pr(s,"GET","/v1/projects",e)}const Y2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X2=/^https?/;async function $2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await Q2(s);for(const t of e)try{if(J2(t))return}catch{}ui(s,"unauthorized-domain")}function J2(s){const e=Up(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!X2.test(t))return!1;if(Y2.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const Z2=new mc(3e4,6e4);function pT(){const s=Zi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function W2(s){return new Promise((e,t)=>{function r(){pT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pT(),t(Si(s,"network-request-failed"))},timeout:Z2.get()})}if(Zi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Zi().gapi?.load)r();else{const o=BC("iframefcb");return Zi()[o]=()=>{gapi.load?r():t(Si(s,"network-request-failed"))},wb(`${zC()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw sf=null,e})}let sf=null;function ex(s){return sf=sf||W2(s),sf}const tx=new mc(5e3,15e3),nx="__/auth/iframe",ix="emulator/auth/iframe",rx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ax(s){const e=s.config;Re(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?vg(e,ix):`https://${s.config.authDomain}/${nx}`,r={apiKey:e.apiKey,appName:s.name,v:gl},o=sx.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${dc(r).slice(1)}`}async function ox(s){const e=await ex(s),t=Zi().gapi;return Re(t,s,"internal-error"),e.open({where:document.body,url:ax(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rx,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=Si(s,"network-request-failed"),m=Zi().setTimeout(()=>{u(c)},tx.get());function p(){Zi().clearTimeout(m),o(r)}r.ping(p).then(p,()=>{u(c)})}))}const lx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ux=500,cx=600,hx="_blank",fx="http://localhost";class gT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dx(s,e,t,r=ux,o=cx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p={...lx,width:r.toString(),height:o.toString(),top:u,left:c},y=Xt().toLowerCase();t&&(m=vb(y)?hx:t),yb(y)&&(e=e||fx,p.scrollbars="yes");const E=Object.entries(p).reduce((w,[j,Z])=>`${w}${j}=${Z},`,"");if(DC(y)&&m!=="_self")return mx(e||"",m),new gT(null);const S=window.open(e||"",m,E);Re(S,s,"popup-blocked");try{S.focus()}catch{}return new gT(S)}function mx(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const px="__/auth/handler",gx="emulator/auth/handler",yx=encodeURIComponent("fac");async function yT(s,e,t,r,o,u){Re(s.config.authDomain,s,"auth-domain-config-required"),Re(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:gl,eventId:o};if(e instanceof Ag){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",Yw(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))c[E]=S}if(e instanceof pc){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(c.scopes=E.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await s._getAppCheckToken(),y=p?`#${yx}=${encodeURIComponent(p)}`:"";return`${_x(s)}?${dc(m).slice(1)}${y}`}function _x({config:s}){return s.emulator?vg(s,gx):`https://${s.authDomain}/${px}`}const Ap="webStorageSupport";class vx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kb,this._completeRedirectFn=F2,this._overrideRedirectResult=B2}async _openPopup(e,t,r,o){Dr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await yT(e,t,r,Up(),o);return dx(e,u,Ig())}async _openRedirect(e,t,r,o){await this._originValidation(e);const u=await yT(e,t,r,Up(),o);return b2(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Dr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await ox(e),r=new G2(e);return t.register("authEvent",o=>(Re(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ap,{type:Ap},o=>{const u=o?.[0]?.[Ap];u!==void 0&&t(!!u),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ab()||_b()||Tg()}}const Ex=vx;var _T="@firebase/auth",vT="1.12.0";class Tx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Sx(s){el(new Na("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Re(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ib(s)},y=new kC(r,o,u,p);return KC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),el(new Na("auth-internal",e=>{const t=nr(e.getProvider("auth").getImmediate());return(r=>new Tx(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(_T,vT,bx(s)),Cs(_T,vT,"esm2020")}const Ax=300,Ix=Z0("authIdTokenMaxAge")||Ax;let ET=null;const wx=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ix)return;const o=t?.token;ET!==o&&(ET=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Rx(s=gg()){const e=pg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=GC(s,{popupRedirectResolver:Ex,persistence:[N2,v2,kb]}),r=Z0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=wx(u.toString());m2(t,c,()=>c(t.currentUser)),d2(t,m=>c(m))}}const o=$0("auth");return o&&QC(t,`http://${o}`),t}function Cx(){return document.getElementsByTagName("head")?.[0]??document}LC({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Si("internal-error");u.customData=o,t(u)},r.type="text/javascript",r.charset="UTF-8",Cx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Sx("Browser");var TT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xs,Hb;(function(){var s;function e(R,A){function x(){}x.prototype=A.prototype,R.F=A.prototype,R.prototype=new x,R.prototype.constructor=R,R.D=function(O,N,P){for(var I=Array(arguments.length-2),it=2;it<arguments.length;it++)I[it-2]=arguments[it];return A.prototype[N].apply(O,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,A,x){x||(x=0);const O=Array(16);if(typeof A=="string")for(var N=0;N<16;++N)O[N]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(N=0;N<16;++N)O[N]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=R.g[0],x=R.g[1],N=R.g[2];let P=R.g[3],I;I=A+(P^x&(N^P))+O[0]+3614090360&4294967295,A=x+(I<<7&4294967295|I>>>25),I=P+(N^A&(x^N))+O[1]+3905402710&4294967295,P=A+(I<<12&4294967295|I>>>20),I=N+(x^P&(A^x))+O[2]+606105819&4294967295,N=P+(I<<17&4294967295|I>>>15),I=x+(A^N&(P^A))+O[3]+3250441966&4294967295,x=N+(I<<22&4294967295|I>>>10),I=A+(P^x&(N^P))+O[4]+4118548399&4294967295,A=x+(I<<7&4294967295|I>>>25),I=P+(N^A&(x^N))+O[5]+1200080426&4294967295,P=A+(I<<12&4294967295|I>>>20),I=N+(x^P&(A^x))+O[6]+2821735955&4294967295,N=P+(I<<17&4294967295|I>>>15),I=x+(A^N&(P^A))+O[7]+4249261313&4294967295,x=N+(I<<22&4294967295|I>>>10),I=A+(P^x&(N^P))+O[8]+1770035416&4294967295,A=x+(I<<7&4294967295|I>>>25),I=P+(N^A&(x^N))+O[9]+2336552879&4294967295,P=A+(I<<12&4294967295|I>>>20),I=N+(x^P&(A^x))+O[10]+4294925233&4294967295,N=P+(I<<17&4294967295|I>>>15),I=x+(A^N&(P^A))+O[11]+2304563134&4294967295,x=N+(I<<22&4294967295|I>>>10),I=A+(P^x&(N^P))+O[12]+1804603682&4294967295,A=x+(I<<7&4294967295|I>>>25),I=P+(N^A&(x^N))+O[13]+4254626195&4294967295,P=A+(I<<12&4294967295|I>>>20),I=N+(x^P&(A^x))+O[14]+2792965006&4294967295,N=P+(I<<17&4294967295|I>>>15),I=x+(A^N&(P^A))+O[15]+1236535329&4294967295,x=N+(I<<22&4294967295|I>>>10),I=A+(N^P&(x^N))+O[1]+4129170786&4294967295,A=x+(I<<5&4294967295|I>>>27),I=P+(x^N&(A^x))+O[6]+3225465664&4294967295,P=A+(I<<9&4294967295|I>>>23),I=N+(A^x&(P^A))+O[11]+643717713&4294967295,N=P+(I<<14&4294967295|I>>>18),I=x+(P^A&(N^P))+O[0]+3921069994&4294967295,x=N+(I<<20&4294967295|I>>>12),I=A+(N^P&(x^N))+O[5]+3593408605&4294967295,A=x+(I<<5&4294967295|I>>>27),I=P+(x^N&(A^x))+O[10]+38016083&4294967295,P=A+(I<<9&4294967295|I>>>23),I=N+(A^x&(P^A))+O[15]+3634488961&4294967295,N=P+(I<<14&4294967295|I>>>18),I=x+(P^A&(N^P))+O[4]+3889429448&4294967295,x=N+(I<<20&4294967295|I>>>12),I=A+(N^P&(x^N))+O[9]+568446438&4294967295,A=x+(I<<5&4294967295|I>>>27),I=P+(x^N&(A^x))+O[14]+3275163606&4294967295,P=A+(I<<9&4294967295|I>>>23),I=N+(A^x&(P^A))+O[3]+4107603335&4294967295,N=P+(I<<14&4294967295|I>>>18),I=x+(P^A&(N^P))+O[8]+1163531501&4294967295,x=N+(I<<20&4294967295|I>>>12),I=A+(N^P&(x^N))+O[13]+2850285829&4294967295,A=x+(I<<5&4294967295|I>>>27),I=P+(x^N&(A^x))+O[2]+4243563512&4294967295,P=A+(I<<9&4294967295|I>>>23),I=N+(A^x&(P^A))+O[7]+1735328473&4294967295,N=P+(I<<14&4294967295|I>>>18),I=x+(P^A&(N^P))+O[12]+2368359562&4294967295,x=N+(I<<20&4294967295|I>>>12),I=A+(x^N^P)+O[5]+4294588738&4294967295,A=x+(I<<4&4294967295|I>>>28),I=P+(A^x^N)+O[8]+2272392833&4294967295,P=A+(I<<11&4294967295|I>>>21),I=N+(P^A^x)+O[11]+1839030562&4294967295,N=P+(I<<16&4294967295|I>>>16),I=x+(N^P^A)+O[14]+4259657740&4294967295,x=N+(I<<23&4294967295|I>>>9),I=A+(x^N^P)+O[1]+2763975236&4294967295,A=x+(I<<4&4294967295|I>>>28),I=P+(A^x^N)+O[4]+1272893353&4294967295,P=A+(I<<11&4294967295|I>>>21),I=N+(P^A^x)+O[7]+4139469664&4294967295,N=P+(I<<16&4294967295|I>>>16),I=x+(N^P^A)+O[10]+3200236656&4294967295,x=N+(I<<23&4294967295|I>>>9),I=A+(x^N^P)+O[13]+681279174&4294967295,A=x+(I<<4&4294967295|I>>>28),I=P+(A^x^N)+O[0]+3936430074&4294967295,P=A+(I<<11&4294967295|I>>>21),I=N+(P^A^x)+O[3]+3572445317&4294967295,N=P+(I<<16&4294967295|I>>>16),I=x+(N^P^A)+O[6]+76029189&4294967295,x=N+(I<<23&4294967295|I>>>9),I=A+(x^N^P)+O[9]+3654602809&4294967295,A=x+(I<<4&4294967295|I>>>28),I=P+(A^x^N)+O[12]+3873151461&4294967295,P=A+(I<<11&4294967295|I>>>21),I=N+(P^A^x)+O[15]+530742520&4294967295,N=P+(I<<16&4294967295|I>>>16),I=x+(N^P^A)+O[2]+3299628645&4294967295,x=N+(I<<23&4294967295|I>>>9),I=A+(N^(x|~P))+O[0]+4096336452&4294967295,A=x+(I<<6&4294967295|I>>>26),I=P+(x^(A|~N))+O[7]+1126891415&4294967295,P=A+(I<<10&4294967295|I>>>22),I=N+(A^(P|~x))+O[14]+2878612391&4294967295,N=P+(I<<15&4294967295|I>>>17),I=x+(P^(N|~A))+O[5]+4237533241&4294967295,x=N+(I<<21&4294967295|I>>>11),I=A+(N^(x|~P))+O[12]+1700485571&4294967295,A=x+(I<<6&4294967295|I>>>26),I=P+(x^(A|~N))+O[3]+2399980690&4294967295,P=A+(I<<10&4294967295|I>>>22),I=N+(A^(P|~x))+O[10]+4293915773&4294967295,N=P+(I<<15&4294967295|I>>>17),I=x+(P^(N|~A))+O[1]+2240044497&4294967295,x=N+(I<<21&4294967295|I>>>11),I=A+(N^(x|~P))+O[8]+1873313359&4294967295,A=x+(I<<6&4294967295|I>>>26),I=P+(x^(A|~N))+O[15]+4264355552&4294967295,P=A+(I<<10&4294967295|I>>>22),I=N+(A^(P|~x))+O[6]+2734768916&4294967295,N=P+(I<<15&4294967295|I>>>17),I=x+(P^(N|~A))+O[13]+1309151649&4294967295,x=N+(I<<21&4294967295|I>>>11),I=A+(N^(x|~P))+O[4]+4149444226&4294967295,A=x+(I<<6&4294967295|I>>>26),I=P+(x^(A|~N))+O[11]+3174756917&4294967295,P=A+(I<<10&4294967295|I>>>22),I=N+(A^(P|~x))+O[2]+718787259&4294967295,N=P+(I<<15&4294967295|I>>>17),I=x+(P^(N|~A))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+N&4294967295,R.g[3]=R.g[3]+P&4294967295}r.prototype.v=function(R,A){A===void 0&&(A=R.length);const x=A-this.blockSize,O=this.C;let N=this.h,P=0;for(;P<A;){if(N==0)for(;P<=x;)o(this,R,P),P+=this.blockSize;if(typeof R=="string"){for(;P<A;)if(O[N++]=R.charCodeAt(P++),N==this.blockSize){o(this,O),N=0;break}}else for(;P<A;)if(O[N++]=R[P++],N==this.blockSize){o(this,O),N=0;break}}this.h=N,this.o+=A},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;A=this.o*8;for(var x=R.length-8;x<R.length;++x)R[x]=A&255,A/=256;for(this.v(R),R=Array(16),A=0,x=0;x<4;++x)for(let O=0;O<32;O+=8)R[A++]=this.g[x]>>>O&255;return R};function u(R,A){var x=m;return Object.prototype.hasOwnProperty.call(x,R)?x[R]:x[R]=A(R)}function c(R,A){this.h=A;const x=[];let O=!0;for(let N=R.length-1;N>=0;N--){const P=R[N]|0;O&&P==A||(x[N]=P,O=!1)}this.g=x}var m={};function p(R){return-128<=R&&R<128?u(R,function(A){return new c([A|0],A<0?-1:0)}):new c([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return S;if(R<0)return te(y(-R));const A=[];let x=1;for(let O=0;R>=x;O++)A[O]=R/x|0,x*=4294967296;return new c(A,0)}function E(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return te(E(R.substring(1),A));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=y(Math.pow(A,8));let O=S;for(let P=0;P<R.length;P+=8){var N=Math.min(8,R.length-P);const I=parseInt(R.substring(P,P+N),A);N<8?(N=y(Math.pow(A,N)),O=O.j(N).add(y(I))):(O=O.j(x),O=O.add(y(I)))}return O}var S=p(0),w=p(1),j=p(16777216);s=c.prototype,s.m=function(){if(W(this))return-te(this).m();let R=0,A=1;for(let x=0;x<this.g.length;x++){const O=this.i(x);R+=(O>=0?O:4294967296+O)*A,A*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(Z(this))return"0";if(W(this))return"-"+te(this).toString(R);const A=y(Math.pow(R,6));var x=this;let O="";for(;;){const N=Le(x,A).g;x=ge(x,N.j(A));let P=((x.g.length>0?x.g[0]:x.h)>>>0).toString(R);if(x=N,Z(x))return P+O;for(;P.length<6;)P="0"+P;O=P+O}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function Z(R){if(R.h!=0)return!1;for(let A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function W(R){return R.h==-1}s.l=function(R){return R=ge(this,R),W(R)?-1:Z(R)?0:1};function te(R){const A=R.g.length,x=[];for(let O=0;O<A;O++)x[O]=~R.g[O];return new c(x,~R.h).add(w)}s.abs=function(){return W(this)?te(this):this},s.add=function(R){const A=Math.max(this.g.length,R.g.length),x=[];let O=0;for(let N=0;N<=A;N++){let P=O+(this.i(N)&65535)+(R.i(N)&65535),I=(P>>>16)+(this.i(N)>>>16)+(R.i(N)>>>16);O=I>>>16,P&=65535,I&=65535,x[N]=I<<16|P}return new c(x,x[x.length-1]&-2147483648?-1:0)};function ge(R,A){return R.add(te(A))}s.j=function(R){if(Z(this)||Z(R))return S;if(W(this))return W(R)?te(this).j(te(R)):te(te(this).j(R));if(W(R))return te(this.j(te(R)));if(this.l(j)<0&&R.l(j)<0)return y(this.m()*R.m());const A=this.g.length+R.g.length,x=[];for(var O=0;O<2*A;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(let N=0;N<R.g.length;N++){const P=this.i(O)>>>16,I=this.i(O)&65535,it=R.i(N)>>>16,yt=R.i(N)&65535;x[2*O+2*N]+=I*yt,Ee(x,2*O+2*N),x[2*O+2*N+1]+=P*yt,Ee(x,2*O+2*N+1),x[2*O+2*N+1]+=I*it,Ee(x,2*O+2*N+1),x[2*O+2*N+2]+=P*it,Ee(x,2*O+2*N+2)}for(R=0;R<A;R++)x[R]=x[2*R+1]<<16|x[2*R];for(R=A;R<2*A;R++)x[R]=0;return new c(x,0)};function Ee(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function le(R,A){this.g=R,this.h=A}function Le(R,A){if(Z(A))throw Error("division by zero");if(Z(R))return new le(S,S);if(W(R))return A=Le(te(R),A),new le(te(A.g),te(A.h));if(W(A))return A=Le(R,te(A)),new le(te(A.g),A.h);if(R.g.length>30){if(W(R)||W(A))throw Error("slowDivide_ only works with positive integers.");for(var x=w,O=A;O.l(R)<=0;)x=Oe(x),O=Oe(O);var N=Ie(x,1),P=Ie(O,1);for(O=Ie(O,2),x=Ie(x,2);!Z(O);){var I=P.add(O);I.l(R)<=0&&(N=N.add(x),P=I),O=Ie(O,1),x=Ie(x,1)}return A=ge(R,N.j(A)),new le(N,A)}for(N=S;R.l(A)>=0;){for(x=Math.max(1,Math.floor(R.m()/A.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),P=y(x),I=P.j(A);W(I)||I.l(R)>0;)x-=O,P=y(x),I=P.j(A);Z(P)&&(P=w),N=N.add(P),R=ge(R,I)}return new le(N,R)}s.B=function(R){return Le(this,R).h},s.and=function(R){const A=Math.max(this.g.length,R.g.length),x=[];for(let O=0;O<A;O++)x[O]=this.i(O)&R.i(O);return new c(x,this.h&R.h)},s.or=function(R){const A=Math.max(this.g.length,R.g.length),x=[];for(let O=0;O<A;O++)x[O]=this.i(O)|R.i(O);return new c(x,this.h|R.h)},s.xor=function(R){const A=Math.max(this.g.length,R.g.length),x=[];for(let O=0;O<A;O++)x[O]=this.i(O)^R.i(O);return new c(x,this.h^R.h)};function Oe(R){const A=R.g.length+1,x=[];for(let O=0;O<A;O++)x[O]=R.i(O)<<1|R.i(O-1)>>>31;return new c(x,R.h)}function Ie(R,A){const x=A>>5;A%=32;const O=R.g.length-x,N=[];for(let P=0;P<O;P++)N[P]=A>0?R.i(P+x)>>>A|R.i(P+x+1)<<32-A:R.i(P+x);return new c(N,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Hb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=E,xs=c}).apply(typeof TT<"u"?TT:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Gb,Mu,Kb,af,qp,Qb,Yb,Xb;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var g=0;g<h.length;++g){var v=h[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function o(h,g){if(g)e:{var v=r;h=h.split(".");for(var b=0;b<h.length-1;b++){var L=h[b];if(!(L in v))break e;v=v[L]}h=h[h.length-1],b=v[h],g=g(b),g!=b&&g!=null&&e(v,h,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(g){var v=[],b;for(b in g)Object.prototype.hasOwnProperty.call(g,b)&&v.push([b,g[b]]);return v}});var u=u||{},c=this||self;function m(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function p(h,g,v){return h.call.apply(h.bind,arguments)}function y(h,g,v){return y=p,y.apply(null,arguments)}function E(h,g){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function S(h,g){function v(){}v.prototype=g.prototype,h.Z=g.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(b,L,q){for(var ne=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ne[Pe-2]=arguments[Pe];return g.prototype[L].apply(b,ne)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function j(h){const g=h.length;if(g>0){const v=Array(g);for(let b=0;b<g;b++)v[b]=h[b];return v}return[]}function Z(h,g){for(let b=1;b<arguments.length;b++){const L=arguments[b];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=h.length||0;const q=L.length||0;h.length=v+q;for(let ne=0;ne<q;ne++)h[v+ne]=L[ne]}else h.push(L)}}class W{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function te(h){c.setTimeout(()=>{throw h},0)}function ge(){var h=R;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class Ee{constructor(){this.h=this.g=null}add(g,v){const b=le.get();b.set(g,v),this.h?this.h.next=b:this.g=b,this.h=b}}var le=new W(()=>new Le,h=>h.reset());class Le{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,Ie=!1,R=new Ee,A=()=>{const h=Promise.resolve(void 0);Oe=()=>{h.then(x)}};function x(){for(var h;h=ge();){try{h.h.call(h.g)}catch(v){te(v)}var g=le;g.j(h),g.h<100&&(g.h++,h.next=g.g,g.g=h)}Ie=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,g),c.removeEventListener("test",v,g)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function it(h,g){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,g)}S(it,N),it.prototype.init=function(h,g){const v=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget,g||(v=="mouseover"?g=h.fromElement:v=="mouseout"&&(g=h.toElement)),this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),G=0;function se(h,g,v,b,L){this.listener=h,this.proxy=null,this.src=g,this.type=v,this.capture=!!b,this.ha=L,this.key=++G,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Be(h,g,v){for(const b in h)g.call(v,h[b],b,h)}function Ze(h,g){for(const v in h)g.call(void 0,h[v],v,h)}function D(h){const g={};for(const v in h)g[v]=h[v];return g}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(h,g){let v,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(v in b)h[v]=b[v];for(let q=0;q<X.length;q++)v=X[q],Object.prototype.hasOwnProperty.call(b,v)&&(h[v]=b[v])}}function ue(h){this.src=h,this.g={},this.h=0}ue.prototype.add=function(h,g,v,b,L){const q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);const ne=Ce(h,g,b,L);return ne>-1?(g=h[ne],v||(g.fa=!1)):(g=new se(g,this.src,q,!!b,L),g.fa=v,h.push(g)),g};function we(h,g){const v=g.type;if(v in h.g){var b=h.g[v],L=Array.prototype.indexOf.call(b,g,void 0),q;(q=L>=0)&&Array.prototype.splice.call(b,L,1),q&&(_e(g),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ce(h,g,v,b){for(let L=0;L<h.length;++L){const q=h[L];if(!q.da&&q.listener==g&&q.capture==!!v&&q.ha==b)return L}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Rt={};function mt(h,g,v,b,L){if(Array.isArray(g)){for(let q=0;q<g.length;q++)mt(h,g[q],v,b,L);return null}return v=Me(v),h&&h[yt]?h.J(g,v,m(b)?!!b.capture:!1,L):Qn(h,g,v,!1,b,L)}function Qn(h,g,v,b,L,q){if(!g)throw Error("Invalid event type");const ne=m(L)?!!L.capture:!!L;let Pe=xi(h);if(Pe||(h[Fe]=Pe=new ue(h)),v=Pe.add(g,v,b,ne,q),v.proxy)return v;if(b=wi(),v.proxy=b,b.src=h,b.listener=v,h.addEventListener)P||(L=ne),L===void 0&&(L=!1),h.addEventListener(g.toString(),b,L);else if(h.attachEvent)h.attachEvent(rn(g.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function wi(){function h(v){return g.call(h.src,h.listener,v)}const g=Ci;return h}function Ri(h,g,v,b,L){if(Array.isArray(g))for(var q=0;q<g.length;q++)Ri(h,g[q],v,b,L);else b=m(b)?!!b.capture:!!b,v=Me(v),h&&h[yt]?(h=h.i,q=String(g).toString(),q in h.g&&(g=h.g[q],v=Ce(g,v,b,L),v>-1&&(_e(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete h.g[q],h.h--)))):h&&(h=xi(h))&&(g=h.g[g.toString()],h=-1,g&&(h=Ce(g,v,b,L)),(v=h>-1?g[h]:null)&&Gt(v))}function Gt(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[yt])we(g.i,h);else{var v=h.type,b=h.proxy;g.removeEventListener?g.removeEventListener(v,b,h.capture):g.detachEvent?g.detachEvent(rn(v),b):g.addListener&&g.removeListener&&g.removeListener(b),(v=xi(g))?(we(v,h),v.h==0&&(v.src=null,g[Fe]=null)):_e(h)}}}function rn(h){return h in Rt?Rt[h]:Rt[h]="on"+h}function Ci(h,g){if(h.da)h=!0;else{g=new it(g,this);const v=h.listener,b=h.ha||h.src;h.fa&&Gt(h),h=v.call(b,g)}return h}function xi(h){return h=h[Fe],h instanceof ue?h:null}var Ur="__closure_events_fn_"+(Math.random()*1e9>>>0);function Me(h){return typeof h=="function"?h:(h[Ur]||(h[Ur]=function(g){return h.handleEvent(g)}),h[Ur])}function Et(){O.call(this),this.i=new ue(this),this.M=this,this.G=null}S(Et,O),Et.prototype[yt]=!0,Et.prototype.removeEventListener=function(h,g,v,b){Ri(this,h,g,v,b)};function Ct(h,g){var v,b=h.G;if(b)for(v=[];b;b=b.G)v.push(b);if(h=h.M,b=g.type||g,typeof g=="string")g=new N(g,h);else if(g instanceof N)g.target=g.target||h;else{var L=g;g=new N(b,h),ae(g,L)}L=!0;let q,ne;if(v)for(ne=v.length-1;ne>=0;ne--)q=g.g=v[ne],L=Di(q,b,!0,g)&&L;if(q=g.g=h,L=Di(q,b,!0,g)&&L,L=Di(q,b,!1,g)&&L,v)for(ne=0;ne<v.length;ne++)q=g.g=v[ne],L=Di(q,b,!1,g)&&L}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var h=this.i;for(const g in h.g){const v=h.g[g];for(let b=0;b<v.length;b++)_e(v[b]);delete h.g[g],h.h--}}this.G=null},Et.prototype.J=function(h,g,v,b){return this.i.add(String(h),g,!1,v,b)},Et.prototype.K=function(h,g,v,b){return this.i.add(String(h),g,!0,v,b)};function Di(h,g,v,b){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let q=0;q<g.length;++q){const ne=g[q];if(ne&&!ne.da&&ne.capture==v){const Pe=ne.listener,Vt=ne.ha||ne.src;ne.fa&&we(h.i,ne),L=Pe.call(Vt,b)!==!1&&L}}return L&&!b.defaultPrevented}function bl(h,g){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:c.setTimeout(h,g||0)}function Ha(h){h.g=bl(()=>{h.g=null,h.i&&(h.i=!1,Ha(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class sn extends O{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ha(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ir(h){O.call(this),this.h=h,this.g={}}S(ir,O);var zs=[];function Bs(h){Be(h.g,function(g,v){this.g.hasOwnProperty(v)&&Gt(g)},h),h.g={}}ir.prototype.N=function(){ir.Z.N.call(this),Bs(this)},ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ni=c.JSON.stringify,js=c.JSON.parse,Ga=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ka(){}function Qa(){}var In={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){N.call(this,"d")}S(Kt,N);function wn(){N.call(this,"c")}S(wn,N);var It={},Ya=null;function zr(){return Ya=Ya||new Et}It.Ia="serverreachability";function K(h){N.call(this,It.Ia,h)}S(K,N);function ie(h){const g=zr();Ct(g,new K(g))}It.STAT_EVENT="statevent";function re(h,g){N.call(this,It.STAT_EVENT,h),this.stat=g}S(re,N);function de(h){const g=zr();Ct(g,new re(g,h))}It.Ja="timingevent";function Te(h,g){N.call(this,It.Ja,h),this.size=g}S(Te,N);function he(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},g)}function me(){this.g=!0}me.prototype.ua=function(){this.g=!1};function We(h,g,v,b,L,q){h.info(function(){if(h.g)if(q){var ne="",Pe=q.split("&");for(let et=0;et<Pe.length;et++){var Vt=Pe[et].split("=");if(Vt.length>1){const Tt=Vt[0];Vt=Vt[1];const Jn=Tt.split("_");ne=Jn.length>=2&&Jn[1]=="type"?ne+(Tt+"="+Vt+"&"):ne+(Tt+"=redacted&")}}}else ne=null;else ne=q;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+g+`
`+v+`
`+ne})}function rr(h,g,v,b,L,q,ne){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+g+`
`+v+`
`+q+" "+ne})}function an(h,g,v,b){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+pd(h,v)+(b?" "+b:"")})}function qs(h,g){h.info(function(){return"TIMEOUT: "+g})}me.prototype.info=function(){};function pd(h,g){if(!h.g)return g;if(!g)return null;try{const q=JSON.parse(g);if(q){for(h=0;h<q.length;h++)if(Array.isArray(q[h])){var v=q[h];if(!(v.length<2)){var b=v[1];if(Array.isArray(b)&&!(b.length<1)){var L=b[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ne=1;ne<b.length;ne++)b[ne]=""}}}}return Ni(q)}catch{return g}}var Fs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Sl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Al;function Hs(){}S(Hs,Ka),Hs.prototype.g=function(){return new XMLHttpRequest},Al=new Hs;function sr(h){return encodeURIComponent(String(h))}function Ic(h){var g=1;h=h.split(":");const v=[];for(;g>0&&h.length;)v.push(h.shift()),g--;return h.length&&v.push(h.join(":")),v}function ci(h,g,v,b){this.j=h,this.i=g,this.l=v,this.S=b||1,this.V=new ir(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hi}function hi(){this.i=null,this.g="",this.h=!1}var Pt={},Zt={};function Vi(h,g,v){h.M=1,h.A=Gs(Lt(g)),h.u=v,h.R=!0,Xa(h,null)}function Xa(h,g){h.F=Date.now(),Oi(h),h.B=Lt(h.A);var v=h.B,b=h.S;Array.isArray(b)||(b=[String(b)]),Wa(v.i,"t",b),h.C=0,v=h.j.L,h.h=new hi,h.g=Bc(h.j,v?g:null,!h.u),h.P>0&&(h.O=new sn(y(h.Y,h,h.g),h.P)),g=h.V,v=h.g,b=h.ba;var L="readystatechange";Array.isArray(L)||(L&&(zs[0]=L.toString()),L=zs);for(let q=0;q<L.length;q++){const ne=mt(v,L[q],b||g.handleEvent,!1,g.h||g);if(!ne)break;g.g[ne.key]=ne}g=h.J?D(h.J):{},h.u?(h.v||(h.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,g)):(h.v="GET",h.g.ea(h.B,h.v,null,g)),ie(),We(h.i,h.v,h.B,h.l,h.S,h.u)}ci.prototype.ba=function(h){h=h.target;const g=this.O;g&&mi(h)==3?g.j():this.Y(h)},ci.prototype.Y=function(h){try{if(h==this.g)e:{const Pe=mi(this.g),Vt=this.g.ya(),et=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||Pe!=4||Vt==7||(Vt==8||et<=0?ie(3):ie(2)),Mi(this);var g=this.g.ca();this.X=g;var v=gd(this);if(this.o=g==200,rr(this.i,this.v,this.B,this.l,this.S,Pe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var b,L=this.g;if((b=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(b)){var q=b;break t}}q=null}if(h=q)an(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pi(this,h);else{this.o=!1,this.m=3,de(12),Pn(this),Yn(this);break e}}if(this.R){h=!0;let Tt;for(;!this.K&&this.C<v.length;)if(Tt=Rc(this,v),Tt==Zt){Pe==4&&(this.m=4,de(14),h=!1),an(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Pt){this.m=4,de(15),an(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else an(this.i,this.l,Tt,null),Pi(this,Tt);if(wc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||v.length!=0||this.h.h||(this.m=1,de(16),h=!1),this.o=this.o&&h,!h)an(this.i,this.l,v,"[Invalid Chunked Response]"),Pn(this),Yn(this);else if(v.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),zl(ne),ne.P=!0,de(11))}}else an(this.i,this.l,v,null),Pi(this,v);Pe==4&&Pn(this),this.o&&!this.K&&(Pe==4?kc(this.j,this):(this.o=!1,Oi(this)))}else or(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,de(12)):(this.m=0,de(13)),Pn(this),Yn(this)}}}catch{}};function gd(h){if(!wc(h))return h.g.la();const g=on(h.g);if(g==="")return"";let v="";const b=g.length,L=mi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Pn(h),Yn(h),"";h.h.i=new c.TextDecoder}for(let q=0;q<b;q++)h.h.h=!0,v+=h.h.i.decode(g[q],{stream:!(L&&q==b-1)});return g.length=0,h.h.g+=v,h.C=0,h.h.g}function wc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Rc(h,g){var v=h.C,b=g.indexOf(`
`,v);return b==-1?Zt:(v=Number(g.substring(v,b)),isNaN(v)?Pt:(b+=1,b+v>g.length?Zt:(g=g.slice(b,b+v),h.C=b+v,g)))}ci.prototype.cancel=function(){this.K=!0,Pn(this)};function Oi(h){h.T=Date.now()+h.H,$a(h,h.H)}function $a(h,g){if(h.D!=null)throw Error("WatchDog timer not null");h.D=he(y(h.aa,h),g)}function Mi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ci.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(qs(this.i,this.B),this.M!=2&&(ie(),de(17)),Pn(this),this.m=2,Yn(this)):$a(this,this.T-h)};function Yn(h){h.j.I==0||h.K||kc(h.j,h)}function Pn(h){Mi(h);var g=h.O;g&&typeof g.dispose=="function"&&g.dispose(),h.O=null,Bs(h.V),h.g&&(g=h.g,h.g=null,g.abort(),g.dispose())}function Pi(h,g){try{var v=h.j;if(v.I!=0&&(v.g==h||Li(v.h,h))){if(!h.L&&Li(v.h,h)&&v.I==3){try{var b=v.Ba.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)ro(v),Qr(v);else break e;Zs(v),de(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=he(y(v.Va,v),6e3));ki(v.h)<=1&&v.ta&&(v.ta=void 0)}else Fi(v,11)}else if((h.L||v.g==h)&&ro(v),!I(g))for(L=v.Ba.g.parse(g),g=0;g<L.length;g++){let et=L[g];const Tt=et[0];if(!(Tt<=v.K))if(v.K=Tt,et=et[1],v.I==2)if(et[0]=="c"){v.M=et[1],v.ba=et[2];const Jn=et[3];Jn!=null&&(v.ka=Jn,v.j.info("VER="+v.ka));const Hi=et[4];Hi!=null&&(v.za=Hi,v.j.info("SVER="+v.za));const pi=et[5];pi!=null&&typeof pi=="number"&&pi>0&&(b=1.5*pi,v.O=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const gi=h.g;if(gi){const Ws=gi.g?gi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ws){var q=b.h;q.g||Ws.indexOf("spdy")==-1&&Ws.indexOf("quic")==-1&&Ws.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Rl(q,q.h),q.h=null))}if(b.G){const so=gi.g?gi.g.getResponseHeader("X-HTTP-Session-Id"):null;so&&(b.wa=so,rt(b.J,b.G,so))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),b=v;var ne=h;if(b.na=zc(b,b.L?b.ba:null,b.W),ne.L){Cl(b.h,ne);var Pe=ne,Vt=b.O;Vt&&(Pe.H=Vt),Pe.D&&(Mi(Pe),Oi(Pe)),b.g=ne}else Mc(b);v.i.length>0&&qi(v)}else et[0]!="stop"&&et[0]!="close"||Fi(v,7);else v.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Fi(v,7):Ll(v):et[0]!="noop"&&v.l&&v.l.qa(et),v.A=0)}}ie(4)}catch{}}var kt=class{constructor(h,g){this.g=h,this.map=g}};function Il(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ki(h){return h.h?1:h.g?h.g.size:0}function Li(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function Rl(h,g){h.g?h.g.add(g):h.h=g}function Cl(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}Il.prototype.cancel=function(){if(this.i=xl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function xl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const v of h.g.values())g=g.concat(v.G);return g}return j(h.i)}var Cc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ja(h,g){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const b=h[v].indexOf("=");let L,q=null;b>=0?(L=h[v].substring(0,b),q=h[v].substring(b+1)):L=h[v],g(L,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function kn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;h instanceof kn?(this.l=h.l,Wt(this,h.j),this.o=h.o,this.g=h.g,Br(this,h.u),this.h=h.h,Dl(this,Vc(h.i)),this.m=h.m):h&&(g=String(h).match(Cc))?(this.l=!1,Wt(this,g[1]||"",!0),this.o=Ui(g[2]||""),this.g=Ui(g[3]||"",!0),Br(this,g[4]),this.h=Ui(g[5]||"",!0),Dl(this,g[6]||"",!0),this.m=Ui(g[7]||"")):(this.l=!1,this.i=new qr(null,this.l))}kn.prototype.toString=function(){const h=[];var g=this.j;g&&h.push(Ks(g,Za,!0),":");var v=this.g;return(v||g=="file")&&(h.push("//"),(g=this.o)&&h.push(Ks(g,Za,!0),"@"),h.push(sr(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Ks(v,v.charAt(0)=="/"?Nl:xc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Ks(v,Dc)),h.join("")},kn.prototype.resolve=function(h){const g=Lt(this);let v=!!h.j;v?Wt(g,h.j):v=!!h.o,v?g.o=h.o:v=!!h.g,v?g.g=h.g:v=h.u!=null;var b=h.h;if(v)Br(g,h.u);else if(v=!!h.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var L=g.h.lastIndexOf("/");L!=-1&&(b=g.h.slice(0,L+1)+b)}if(L=b,L==".."||L==".")b="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){b=L.lastIndexOf("/",0)==0,L=L.split("/");const q=[];for(let ne=0;ne<L.length;){const Pe=L[ne++];Pe=="."?b&&ne==L.length&&q.push(""):Pe==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),b&&ne==L.length&&q.push("")):(q.push(Pe),b=!0)}b=q.join("/")}else b=L}return v?g.h=b:v=h.i.toString()!=="",v?Dl(g,Vc(h.i)):v=!!h.m,v&&(g.m=h.m),g};function Lt(h){return new kn(h)}function Wt(h,g,v){h.j=v?Ui(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function Br(h,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);h.u=g}else h.u=null}function Dl(h,g,v){g instanceof qr?(h.i=g,eo(h.i,h.l)):(v||(g=Ks(g,jr)),h.i=new qr(g,h.l))}function rt(h,g,v){h.i.set(g,v)}function Gs(h){return rt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ui(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ks(h,g,v){return typeof h=="string"?(h=encodeURI(h).replace(g,Rn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Rn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Za=/[#\/\?@]/g,xc=/[#\?:]/g,Nl=/[#\?]/g,jr=/[#\?@]/g,Dc=/#/g;function qr(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function Cn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ja(h.i,function(g,v){h.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}s=qr.prototype,s.add=function(h,g){Cn(this),this.i=null,h=Fr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(g),this.h+=1,this};function Nc(h,g){Cn(h),g=Fr(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function Vl(h,g){return Cn(h),g=Fr(h,g),h.g.has(g)}s.forEach=function(h,g){Cn(this),this.g.forEach(function(v,b){v.forEach(function(L){h.call(g,L,b,this)},this)},this)};function Ol(h,g){Cn(h);let v=[];if(typeof g=="string")Vl(h,g)&&(v=v.concat(h.g.get(Fr(h,g))));else for(h=Array.from(h.g.values()),g=0;g<h.length;g++)v=v.concat(h[g]);return v}s.set=function(h,g){return Cn(this),this.i=null,h=Fr(this,h),Vl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},s.get=function(h,g){return h?(h=Ol(this,h),h.length>0?String(h[0]):g):g};function Wa(h,g,v){Nc(h,g),v.length>0&&(h.i=null,h.g.set(Fr(h,g),j(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(let b=0;b<g.length;b++){var v=g[b];const L=sr(v);v=Ol(this,v);for(let q=0;q<v.length;q++){let ne=L;v[q]!==""&&(ne+="="+sr(v[q])),h.push(ne)}}return this.i=h.join("&")};function Vc(h){const g=new qr;return g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),g}function Fr(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function eo(h,g){g&&!h.j&&(Cn(h),h.i=null,h.g.forEach(function(v,b){const L=b.toLowerCase();b!=L&&(Nc(this,b),Wa(this,L,v))},h)),h.j=g}function fi(h,g){const v=new me;if(c.Image){const b=new Image;b.onload=E(Xn,v,"TestLoadImage: loaded",!0,g,b),b.onerror=E(Xn,v,"TestLoadImage: error",!1,g,b),b.onabort=E(Xn,v,"TestLoadImage: abort",!1,g,b),b.ontimeout=E(Xn,v,"TestLoadImage: timeout",!1,g,b),c.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else g(!1)}function Ml(h,g){const v=new me,b=new AbortController,L=setTimeout(()=>{b.abort(),Xn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:b.signal}).then(q=>{clearTimeout(L),q.ok?Xn(v,"TestPingServer: ok",!0,g):Xn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Xn(v,"TestPingServer: error",!1,g)})}function Xn(h,g,v,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(v)}catch{}}function Hr(){this.g=new Ga}function zi(h){this.i=h.Sb||null,this.h=h.ab||!1}S(zi,Ka),zi.prototype.g=function(){return new Qs(this.i,this.h)};function Qs(h,g){Et.call(this),this.H=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Qs,Et),s=Qs.prototype,s.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=g,this.readyState=1,di(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(g.body=h),(this.H||c).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;to(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function to(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?Gr(this):di(this),this.readyState==3&&to(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Gr(this))},s.Na=function(h){this.g&&(this.response=h,Gr(this))},s.ga=function(){this.g&&Gr(this)};function Gr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,di(h)}s.setRequestHeader=function(h,g){this.A.append(h,g)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=g.next();return h.join(`\r
`)};function di(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function $n(h){let g="";return Be(h,function(v,b){g+=b,g+=":",g+=v,g+=`\r
`}),g}function Ys(h,g,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=$n(v),typeof h=="string"?v!=null&&sr(v):rt(h,g,v))}function ut(h){Et.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(ut,Et);var Bi=/^https?$/i,Pl=["POST","PUT"];s=ut.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,g,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Al.g(),this.g.onreadystatechange=w(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(q){Xs(this,q);return}if(h=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)v.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const q of b.keys())v.set(q,b.get(q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),L=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Pl,g,void 0)>=0)||b||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ne]of v)this.g.setRequestHeader(q,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(q){Xs(this,q)}};function Xs(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.o=5,kl(h),ar(h)}function kl(h){h.A||(h.A=!0,Ct(h,"complete"),Ct(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ct(this,"complete"),Ct(this,"abort"),ar(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),ut.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?$s(this):this.Xa())},s.Xa=function(){$s(this)};function $s(h){if(h.h&&typeof u<"u"){if(h.v&&mi(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ct(h,"readystatechange"),mi(h)==4){h.h=!1;try{const q=h.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var b;if(b=q===0){let ne=String(h.D).match(Cc)[1]||null;!ne&&c.self&&c.self.location&&(ne=c.self.location.protocol.slice(0,-1)),b=!Bi.test(ne?ne.toLowerCase():"")}v=b}if(v)Ct(h,"complete"),Ct(h,"success");else{h.o=6;try{var L=mi(h)>2?h.g.statusText:""}catch{L=""}h.l=L+" ["+h.ca()+"]",kl(h)}}finally{ar(h)}}}}function ar(h,g){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,g||Ct(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function mi(h){return h.g?h.g.readyState:0}s.ca=function(){try{return mi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),js(g)}};function on(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function or(h){const g={};h=(h.g&&mi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(I(h[b]))continue;var v=Ic(h[b]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=g[L]||[];g[L]=q,q.push(v)}Ze(g,function(b){return b.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(h,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||g}function Kr(h){this.za=0,this.i=[],this.j=new me,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ji("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ji("baseRetryDelayMs",5e3,h),this.Za=ji("retryDelaySeedMs",1e4,h),this.Ta=ji("forwardChannelMaxRetries",2,h),this.va=ji("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Il(h&&h.concurrentRequestLimit),this.Ba=new Hr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Kr.prototype,s.ka=8,s.I=1,s.connect=function(h,g,v,b){de(0),this.W=h,this.H=g||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.J=zc(this,null,this.W),qi(this)};function Ll(h){if(no(h),h.I==3){var g=h.V++,v=Lt(h.J);if(rt(v,"SID",h.M),rt(v,"RID",g),rt(v,"TYPE","terminate"),Js(h,v),g=new ci(h,h.j,g),g.M=2,g.A=Gs(Lt(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=g.A,v=!0),v||(g.g=Bc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Oi(g)}Uc(h)}function Qr(h){h.g&&(zl(h),h.g.cancel(),h.g=null)}function no(h){Qr(h),h.v&&(c.clearTimeout(h.v),h.v=null),ro(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function qi(h){if(!wl(h.h)&&!h.m){h.m=!0;var g=h.Ea;Oe||A(),Ie||(Oe(),Ie=!0),R.add(g,h),h.D=0}}function io(h,g){return ki(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=g.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=he(y(h.Ea,h,g),Lc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const L=new ci(this,this.j,h);let q=this.o;if(this.U&&(q?(q=D(q),ae(q,this.U)):q=this.U),this.u!==null||this.R||(L.J=q,q=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Oc(this,L,g),v=Lt(this.J),rt(v,"RID",h),rt(v,"CVER",22),this.G&&rt(v,"X-HTTP-Session-Id",this.G),Js(this,v),q&&(this.R?g="headers="+sr($n(q))+"&"+g:this.u&&Ys(v,this.u,q)),Rl(this.h,L),this.Ra&&rt(v,"TYPE","init"),this.S?(rt(v,"$req",g),rt(v,"SID","null"),L.U=!0,Vi(L,v,null)):Vi(L,v,g),this.I=2}}else this.I==3&&(h?Ul(this,h):this.i.length==0||wl(this.h)||Ul(this))};function Ul(h,g){var v;g?v=g.l:v=h.V++;const b=Lt(h.J);rt(b,"SID",h.M),rt(b,"RID",v),rt(b,"AID",h.K),Js(h,b),h.u&&h.o&&Ys(b,h.u,h.o),v=new ci(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),g&&(h.i=g.G.concat(h.i)),g=Oc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Rl(h.h,v),Vi(v,b,g)}function Js(h,g){h.H&&Be(h.H,function(v,b){rt(g,b,v)}),h.l&&Be({},function(v,b){rt(g,b,v)})}function Oc(h,g,v){v=Math.min(h.i.length,v);const b=h.l?y(h.l.Ka,h.l,h):null;e:{var L=h.i;let Pe=-1;for(;;){const Vt=["count="+v];Pe==-1?v>0?(Pe=L[0].g,Vt.push("ofs="+Pe)):Pe=0:Vt.push("ofs="+Pe);let et=!0;for(let Tt=0;Tt<v;Tt++){var q=L[Tt].g;const Jn=L[Tt].map;if(q-=Pe,q<0)Pe=Math.max(0,L[Tt].g-100),et=!1;else try{q="req"+q+"_"||"";try{var ne=Jn instanceof Map?Jn:Object.entries(Jn);for(const[Hi,pi]of ne){let gi=pi;m(pi)&&(gi=Ni(pi)),Vt.push(q+Hi+"="+encodeURIComponent(gi))}}catch(Hi){throw Vt.push(q+"type="+encodeURIComponent("_badmap")),Hi}}catch{b&&b(Jn)}}if(et){ne=Vt.join("&");break e}}ne=void 0}return h=h.i.splice(0,v),g.G=h,ne}function Mc(h){if(!h.g&&!h.v){h.Y=1;var g=h.Da;Oe||A(),Ie||(Oe(),Ie=!0),R.add(g,h),h.A=0}}function Zs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=he(y(h.Da,h),Lc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Pc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=he(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,de(10),Qr(this),Pc(this))};function zl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Pc(h){h.g=new ci(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var g=Lt(h.na);rt(g,"RID","rpc"),rt(g,"SID",h.M),rt(g,"AID",h.K),rt(g,"CI",h.F?"0":"1"),!h.F&&h.ia&&rt(g,"TO",h.ia),rt(g,"TYPE","xmlhttp"),Js(h,g),h.u&&h.o&&Ys(g,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Gs(Lt(g)),v.u=null,v.R=!0,Xa(v,h)}s.Va=function(){this.C!=null&&(this.C=null,Qr(this),Zs(this),de(19))};function ro(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function kc(h,g){var v=null;if(h.g==g){ro(h),zl(h),h.g=null;var b=2}else if(Li(h.h,g))v=g.G,Cl(h.h,g),b=1;else return;if(h.I!=0){if(g.o)if(b==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var L=h.D;b=zr(),Ct(b,new Te(b,v)),qi(h)}else Mc(h);else if(L=g.m,L==3||L==0&&g.X>0||!(b==1&&io(h,g)||b==2&&Zs(h)))switch(v&&v.length>0&&(g=h.h,g.i=g.i.concat(v)),L){case 1:Fi(h,5);break;case 4:Fi(h,10);break;case 3:Fi(h,6);break;default:Fi(h,2)}}}function Lc(h,g){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*g}function Fi(h,g){if(h.j.info("Error code "+g),g==2){var v=y(h.bb,h),b=h.Ua;const L=!b;b=new kn(b||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Wt(b,"https"),Gs(b),L?fi(b.toString(),v):Ml(b.toString(),v)}else de(2);h.I=0,h.l&&h.l.pa(g),Uc(h),no(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function Uc(h){if(h.I=0,h.ja=[],h.l){const g=xl(h.h);(g.length!=0||h.i.length!=0)&&(Z(h.ja,g),Z(h.ja,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.oa()}}function zc(h,g,v){var b=v instanceof kn?Lt(v):new kn(v);if(b.g!="")g&&(b.g=g+"."+b.g),Br(b,b.u);else{var L=c.location;b=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const q=new kn(null);b&&Wt(q,b),g&&(q.g=g),L&&Br(q,L),v&&(q.h=v),b=q}return v=h.G,g=h.wa,v&&g&&rt(b,v,g),rt(b,"VER",h.ka),Js(h,b),b}function Bc(h,g,v){if(g&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Aa&&!h.ma?new ut(new zi({ab:v})):new ut(h.ma),g.Fa(h.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function jc(){}s=jc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Yr(){}Yr.prototype.g=function(h,g){return new vn(h,g)};function vn(h,g){Et.call(this),this.g=new Kr(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(h?h["X-WebChannel-Client-Profile"]=g.sa:h={"X-WebChannel-Client-Profile":g.sa}),this.g.U=h,(h=g&&g.Qb)&&!I(h)&&(this.g.u=h),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new lr(this)}S(vn,Et),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Ll(this.g)},vn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Ni(h),h=v);g.i.push(new kt(g.Ya++,h)),g.I==3&&qi(g)},vn.prototype.N=function(){this.g.l=null,delete this.j,Ll(this.g),delete this.g,vn.Z.N.call(this)};function qc(h){Kt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){e:{for(const v in g){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}S(qc,Kt);function Fc(){wn.call(this),this.status=1}S(Fc,wn);function lr(h){this.g=h}S(lr,jc),lr.prototype.ra=function(){Ct(this.g,"a")},lr.prototype.qa=function(h){Ct(this.g,new qc(h))},lr.prototype.pa=function(h){Ct(this.g,new Fc)},lr.prototype.oa=function(){Ct(this.g,"b")},Yr.prototype.createWebChannel=Yr.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,Xb=function(){return new Yr},Yb=function(){return zr()},Qb=It,qp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fs.NO_ERROR=0,Fs.TIMEOUT=8,Fs.HTTP_ERROR=6,af=Fs,Sl.COMPLETE="complete",Kb=Sl,Qa.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Mu=Qa,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,Gb=ut}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");let vl="12.8.0";function xx(s){vl=s}const Oa=new dg("@firebase/firestore");function qo(){return Oa.logLevel}function ee(s,...e){if(Oa.logLevel<=Ke.DEBUG){const t=e.map(Rg);Oa.debug(`Firestore (${vl}): ${s}`,...t)}}function bn(s,...e){if(Oa.logLevel<=Ke.ERROR){const t=e.map(Rg);Oa.error(`Firestore (${vl}): ${s}`,...t)}}function Ma(s,...e){if(Oa.logLevel<=Ke.WARN){const t=e.map(Rg);Oa.warn(`Firestore (${vl}): ${s}`,...t)}}function Rg(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function pe(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$b(s,r,t)}function $b(s,e,t){let r=`FIRESTORE (${vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bn(r),new Error(r)}function ve(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||$b(e,o,r)}function Ne(s,e){return s}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ds{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Jb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class Nx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Vx{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let u=new Ds;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ds,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ds)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new Jb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class Ox{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Mx{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Ox(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Px{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const r=u=>{u.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function kx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class Cg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=kx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%62))}return r}}function De(s,e){return s<e?-1:s>e?1:0}function Fp(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return Ip(o)===Ip(u)?De(o,u):Ip(o)?1:-1}return De(s.length,e.length)}const Lx=55296,Ux=57343;function Ip(s){const e=s.charCodeAt(0);return e>=Lx&&e<=Ux}function nl(s,e,t){return s.length===e.length&&s.every(((r,o)=>t(r,e[o])))}function Zb(s){return s+"\0"}const ST="__name__";class Xi{constructor(e,t,r){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=Xi.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return De(e.length,t.length)}static compareSegments(e,t){const r=Xi.isNumericId(e),o=Xi.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Xi.extractNumericId(e).compare(Xi.extractNumericId(t)):Fp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class nt extends Xi{construct(e,t,r){return new nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const zx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends Xi{construct(e,t,r){return new wt(e,t,r)}static isValidIdentifier(e){return zx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ST}static keyField(){return new wt([ST])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(t)}static emptyPath(){return new wt([])}}class oe{constructor(e){this.path=e}static fromPath(e){return new oe(nt.fromString(e))}static fromName(e){return new oe(nt.fromString(e).popFirst(5))}static empty(){return new oe(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new nt(e.slice()))}}function Wb(s,e,t){if(!t)throw new ce(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Bx(s,e,t,r){if(e===!0&&r===!0)throw new ce(J.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function AT(s){if(!oe.isDocumentKey(s))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function IT(s){if(oe.isDocumentKey(s))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function eS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function xg(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":pe(12329,{type:typeof s})}function Cr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xg(s);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Ft(s,e){const t={typeString:s};return e&&(t.value=e),t}function yc(s,e){if(!eS(s))throw new ce(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new ce(J.INVALID_ARGUMENT,t);return!0}const wT=-62135596800,RT=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*RT);return new ot(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wT)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/RT}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yc(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:Ft("string",ot._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new ot(0,0))}static max(){return new Se(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Wu=-1;class If{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Hp(s){return s.fields.find((e=>e.kind===2))}function _a(s){return s.fields.filter((e=>e.kind!==2))}If.UNKNOWN_ID=-1;class of{constructor(e,t){this.fieldPath=e,this.kind=t}}class ec{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ec(0,Kn.min())}}function jx(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(r===1e9?new ot(t+1,0):new ot(t,r));return new Kn(o,oe.empty(),e)}function tS(s){return new Kn(s.readTime,s.key,Wu)}class Kn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Kn(Se.min(),oe.empty(),Wu)}static max(){return new Kn(Se.max(),oe.empty(),Wu)}}function Dg(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(s.documentKey,e.documentKey),t!==0?t:De(s.largestBatchId,e.largestBatchId))}const nS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function qa(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==nS)throw s;ee("LocalStore","Unexpectedly lost primary lease")}class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new k(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof k?t:k.resolve(t)}catch(t){return k.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):k.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):k.reject(t)}static resolve(e){return new k(((t,r)=>{t(e)}))}static reject(e){return new k(((t,r)=>{r(e)}))}static waitFor(e){return new k(((t,r)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&t()}),(p=>r(p)))})),c=!0,u===o&&t()}))}static or(e){let t=k.resolve(!1);for(const r of e)t=t.next((o=>o?k.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,u)=>{r.push(t.call(this,o,u))})),this.waitFor(r)}static mapArray(e,t){return new k(((r,o)=>{const u=e.length,c=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;t(e[y]).next((E=>{c[y]=E,++m,m===u&&r(c)}),(E=>o(E)))}}))}static doWhile(e,t){return new k(((r,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):r()};u()}))}}const Hn="SimpleDb";class Kf{static open(e,t,r,o){try{return new Kf(t,e.transaction(o,r))}catch(u){throw new qu(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ds,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new qu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Ng(r.target.error);this.S.reject(new qu(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ee(Hn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Fx(t)}}class Ns{static delete(e){return ee(Hn,"Removing database:",e),Ea(X0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!rb())return!1;if(Ns.F())return!0;const e=Xt(),t=Ns.M(e),r=0<t&&t<10,o=rS(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Ns.M(Xt())===12.2&&bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ee(Hn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;t(c)},o.onblocked=()=>{r(new qu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new ce(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ce(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new qu(e,c))},o.onupgradeneeded=u=>{ee(Hn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{ee(Hn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const m=Kf.open(this.db,e,u?"readonly":"readwrite",r),p=o(m).next((y=>(m.C(),y))).catch((y=>(m.abort(y),k.reject(y)))).toPromise();return p.catch((()=>{})),await m.D,p}catch(m){const p=m,y=p.name!=="FirebaseError"&&c<3;if(ee(Hn,"Transaction failed with error:",p.message,"Retrying:",y),this.close(),!y)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function rS(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class qx{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Ea(this.U.delete())}}class qu extends ce{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ls(s){return s.name==="IndexedDbTransactionError"}class Fx{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ee(Hn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ee(Hn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ea(r)}add(e){return ee(Hn,"ADD",this.store.name,e,e),Ea(this.store.add(e))}get(e){return Ea(this.store.get(e)).next((t=>(t===void 0&&(t=null),ee(Hn,"GET",this.store.name,e,t),t)))}delete(e){return ee(Hn,"DELETE",this.store.name,e),Ea(this.store.delete(e))}count(){return ee(Hn,"COUNT",this.store.name),Ea(this.store.count())}H(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new k(((c,m)=>{u.onerror=p=>{m(p.target.error)},u.onsuccess=p=>{c(p.target.result)}}))}{const u=this.cursor(r),c=[];return this.J(u,((m,p)=>{c.push(p)})).next((()=>c))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new k(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}X(e,t){ee(Hn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.J(o,((u,c,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.J(o,t)}te(e){const t=this.cursor({});return new k(((r,o)=>{t.onerror=u=>{const c=Ng(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}J(e,t){const r=[];return new k(((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const p=new qx(m),y=t(m.primaryKey,m.value,p);if(y instanceof k){const E=y.catch((S=>(p.done(),k.reject(S))));r.push(E)}p.isDone?o():p.G===null?m.continue():m.continue(p.G)}})).next((()=>k.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ea(s){return new k(((e,t)=>{s.onsuccess=r=>{const o=r.target.result;e(o)},s.onerror=r=>{const o=Ng(r.target.error);t(o)}}))}let CT=!1;function Ng(s){const e=Ns.M(Xt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return CT||(CT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Fu="IndexBackfiller";class Hx{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ee(Fu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ee(Fu,`Documents written: ${t}`)}catch(t){Ls(t)?ee(Fu,"Ignoring IndexedDB error during index backfill: ",t):await qa(t)}await this.re(6e4)}))}}class Gx{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let o=t,u=!0;return k.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ee(Fu,`Processing collection: ${c}`),this.oe(e,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>t-o))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(o,u))).next((m=>(ee(Fu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((o,u)=>{const c=tS(u);Dg(c,r)>0&&(r=c)})),new Kn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class oi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}oi.ce=-1;const wa=-1;function Qf(s){return s==null}function tc(s){return s===0&&1/s==-1/0}function Kx(s){return typeof s=="number"&&Number.isInteger(s)&&!tc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const wf="";function _n(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=xT(e)),e=Qx(s.get(t),e);return xT(e)}function Qx(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case wf:t+="";break;default:t+=u}}return t}function xT(s){return s+wf+""}function $i(s){const e=s.length;if(ve(e>=2,64408,{path:s}),e===2)return ve(s.charAt(0)===wf&&s.charAt(1)==="",56145,{path:s}),nt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=s.indexOf(wf,u);switch((c<0||c>t)&&pe(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let p;o.length===0?p=m:(o+=m,p=o,o=""),r.push(p);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:pe(61167,{path:s})}u=c+2}return new nt(r)}const va="remoteDocuments",_c="owner",ko="owner",nc="mutationQueues",Yx="userId",Ti="mutations",DT="batchId",Ia="userMutationsIndex",NT=["userId","batchId"];function lf(s,e){return[s,_n(e)]}function sS(s,e,t){return[s,_n(e),t]}const Xx={},il="documentMutations",Rf="remoteDocumentsV14",$x=["prefixPath","collectionGroup","readTime","documentId"],uf="documentKeyIndex",Jx=["prefixPath","collectionGroup","documentId"],aS="collectionGroupIndex",Zx=["collectionGroup","readTime","prefixPath","documentId"],ic="remoteDocumentGlobal",Gp="remoteDocumentGlobalKey",rl="targets",oS="queryTargetsIndex",Wx=["canonicalId","targetId"],sl="targetDocuments",eD=["targetId","path"],Vg="documentTargetsIndex",tD=["path","targetId"],Cf="targetGlobalKey",Ra="targetGlobal",rc="collectionParents",nD=["collectionId","parent"],al="clientMetadata",iD="clientId",Yf="bundles",rD="bundleId",Xf="namedQueries",sD="name",Og="indexConfiguration",aD="indexId",Kp="collectionGroupIndex",oD="collectionGroup",Hu="indexState",lD=["indexId","uid"],lS="sequenceNumberIndex",uD=["uid","sequenceNumber"],Gu="indexEntries",cD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uS="documentKeyIndex",hD=["indexId","uid","orderedDocumentKey"],$f="documentOverlays",fD=["userId","collectionPath","documentId"],Qp="collectionPathOverlayIndex",dD=["userId","collectionPath","largestBatchId"],cS="collectionGroupOverlayIndex",mD=["userId","collectionGroup","largestBatchId"],Mg="globals",pD="name",hS=[nc,Ti,il,va,rl,_c,Ra,sl,al,ic,rc,Yf,Xf],gD=[...hS,$f],fS=[nc,Ti,il,Rf,rl,_c,Ra,sl,al,ic,rc,Yf,Xf,$f],dS=fS,Pg=[...dS,Og,Hu,Gu],yD=Pg,mS=[...Pg,Mg],_D=mS;class Yp extends iS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Jt(s,e){const t=Ne(s);return Ns.O(t.le,e)}function VT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Us(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function pS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class At{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??dn.RED,this.left=o??dn.EMPTY,this.right=u??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new dn(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return dn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,r,o,u){return this}insert(e,t,r){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class lt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OT(this.data.getIterator())}getIteratorFrom(e){return new OT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new lt(this.comparator);return t.data=e,t}}class OT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lo(s){return s.hasNext()?s.getNext():void 0}class Mn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new lt(wt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class gS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new gS("Invalid base64 string: "+u):u}})(e);return new Ht(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new Ht(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const vD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(s){if(ve(!!s,39018),typeof s=="string"){let e=0;const t=vD.exec(s);if(ve(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(s.seconds),nanos:St(s.nanos)}}function St(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Vr(s){return typeof s=="string"?Ht.fromBase64String(s):Ht.fromUint8Array(s)}const yS="server_timestamp",_S="__type__",vS="__previous_value__",ES="__local_write_time__";function kg(s){return(s?.mapValue?.fields||{})[_S]?.stringValue===yS}function Jf(s){const e=s.mapValue.fields[vS];return kg(e)?Jf(e):e}function sc(s){const e=Nr(s.mapValue.fields[ES].timestampValue);return new ot(e.seconds,e.nanos)}class ED{constructor(e,t,r,o,u,c,m,p,y,E,S){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E,this.apiKey=S}}const xf="(default)";class Pa{constructor(e,t){this.projectId=e,this.database=t||xf}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===xf}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}function TD(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(s.options.projectId,e)}const Lg="__type__",TS="__max__",Is={mapValue:{fields:{__type__:{stringValue:TS}}}},Ug="__vector__",ol="value",cf={nullValue:"NULL_VALUE"};function Os(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?kg(s)?4:bS(s)?9007199254740991:Zf(s)?10:11:pe(28295,{value:s})}function tr(s,e){if(s===e)return!0;const t=Os(s);if(t!==Os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return sc(s).isEqual(sc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=Nr(o.timestampValue),m=Nr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Vr(o.bytesValue).isEqual(Vr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return St(o.geoPointValue.latitude)===St(u.geoPointValue.latitude)&&St(o.geoPointValue.longitude)===St(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return St(o.integerValue)===St(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=St(o.doubleValue),m=St(u.doubleValue);return c===m?tc(c)===tc(m):isNaN(c)&&isNaN(m)}return!1})(s,e);case 9:return nl(s.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(VT(c)!==VT(m))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(m[p]===void 0||!tr(c[p],m[p])))return!1;return!0})(s,e);default:return pe(52216,{left:s})}}function ac(s,e){return(s.values||[]).find((t=>tr(t,e)))!==void 0}function Ms(s,e){if(s===e)return 0;const t=Os(s),r=Os(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(s.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=St(u.integerValue||u.doubleValue),p=St(c.integerValue||c.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(s,e);case 3:return MT(s.timestampValue,e.timestampValue);case 4:return MT(sc(s),sc(e));case 5:return Fp(s.stringValue,e.stringValue);case 6:return(function(u,c){const m=Vr(u),p=Vr(c);return m.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),p=c.split("/");for(let y=0;y<m.length&&y<p.length;y++){const E=De(m[y],p[y]);if(E!==0)return E}return De(m.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=De(St(u.latitude),St(c.latitude));return m!==0?m:De(St(u.longitude),St(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return PT(s.arrayValue,e.arrayValue);case 10:return(function(u,c){const m=u.fields||{},p=c.fields||{},y=m[ol]?.arrayValue,E=p[ol]?.arrayValue,S=De(y?.values?.length||0,E?.values?.length||0);return S!==0?S:PT(y,E)})(s.mapValue,e.mapValue);case 11:return(function(u,c){if(u===Is.mapValue&&c===Is.mapValue)return 0;if(u===Is.mapValue)return 1;if(c===Is.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=c.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let S=0;S<p.length&&S<E.length;++S){const w=Fp(p[S],E[S]);if(w!==0)return w;const j=Ms(m[p[S]],y[E[S]]);if(j!==0)return j}return De(p.length,E.length)})(s.mapValue,e.mapValue);default:throw pe(23264,{he:t})}}function MT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return De(s,e);const t=Nr(s),r=Nr(e),o=De(t.seconds,r.seconds);return o!==0?o:De(t.nanos,r.nanos)}function PT(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const u=Ms(t[o],r[o]);if(u)return u}return De(t.length,r.length)}function ll(s){return Xp(s)}function Xp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=Nr(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Vr(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return oe.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",o=!0;for(const u of t.values||[])o?o=!1:r+=",",r+=Xp(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Xp(t.fields[c])}`;return o+"}"})(s.mapValue):pe(61005,{value:s})}function hf(s){switch(Os(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jf(s);return e?16+hf(e):16;case 5:return 2*s.stringValue.length;case 6:return Vr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+hf(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Us(r.fields,((u,c)=>{o+=u.length+hf(c)})),o})(s.mapValue);default:throw pe(13486,{value:s})}}function zg(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function $p(s){return!!s&&"integerValue"in s}function oc(s){return!!s&&"arrayValue"in s}function kT(s){return!!s&&"nullValue"in s}function LT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ff(s){return!!s&&"mapValue"in s}function Zf(s){return(s?.mapValue?.fields||{})[Lg]?.stringValue===Ug}function Ku(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Us(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ku(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ku(s.arrayValue.values[t]);return e}return{...s}}function bS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===TS}const SS={mapValue:{fields:{[Lg]:{stringValue:Ug},[ol]:{arrayValue:{}}}}};function bD(s){return"nullValue"in s?cf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?zg(Pa.empty(),oe.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Zf(s)?SS:{mapValue:{}}:pe(35942,{value:s})}function SD(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?zg(Pa.empty(),oe.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?SS:"mapValue"in s?Zf(s)?{mapValue:{}}:Is:pe(61959,{value:s})}function UT(s,e){const t=Ms(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function zT(s,e){const t=Ms(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ku(t)}setAll(e){let t=wt.emptyPath(),r={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=Ku(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];ff(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Us(t,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new yn(Ku(this.value))}}function AS(s){const e=[];return Us(s.fields,((t,r)=>{const o=new wt([t]);if(ff(r)){const u=AS(r.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new Mn(e)}class Nt{constructor(e,t,r,o,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Nt(e,0,Se.min(),Se.min(),Se.min(),yn.empty(),0)}static newFoundDocument(e,t,r,o){return new Nt(e,1,t,Se.min(),r,o,0)}static newNoDocument(e,t){return new Nt(e,2,t,Se.min(),Se.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,Se.min(),Se.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ul{constructor(e,t){this.position=e,this.inclusive=t}}function BT(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],c=s.position[o];if(u.field.isKeyField()?r=oe.comparator(oe.fromName(c.referenceValue),t.key):r=Ms(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function jT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!tr(s.position[t],e.position[t]))return!1;return!0}class Df{constructor(e,t="asc"){this.field=e,this.dir=t}}function AD(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class IS{}class Ye extends IS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ID(e,t,r):t==="array-contains"?new CD(e,r):t==="in"?new NS(e,r):t==="not-in"?new xD(e,r):t==="array-contains-any"?new DD(e,r):new Ye(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new wD(e,r):new RD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ms(t,this.value)):t!==null&&Os(this.value)===Os(t)&&this.matchesComparison(Ms(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dt extends IS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new dt(e,t)}matches(e){return cl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cl(s){return s.op==="and"}function Jp(s){return s.op==="or"}function Bg(s){return wS(s)&&cl(s)}function wS(s){for(const e of s.filters)if(e instanceof dt)return!1;return!0}function Zp(s){if(s instanceof Ye)return s.field.canonicalString()+s.op.toString()+ll(s.value);if(Bg(s))return s.filters.map((e=>Zp(e))).join(",");{const e=s.filters.map((t=>Zp(t))).join(",");return`${s.op}(${e})`}}function RS(s,e){return s instanceof Ye?(function(r,o){return o instanceof Ye&&r.op===o.op&&r.field.isEqual(o.field)&&tr(r.value,o.value)})(s,e):s instanceof dt?(function(r,o){return o instanceof dt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&RS(c,o.filters[m])),!0):!1})(s,e):void pe(19439)}function CS(s,e){const t=s.filters.concat(e);return dt.create(t,s.op)}function xS(s){return s instanceof Ye?(function(t){return`${t.field.canonicalString()} ${t.op} ${ll(t.value)}`})(s):s instanceof dt?(function(t){return t.op.toString()+" {"+t.getFilters().map(xS).join(" ,")+"}"})(s):"Filter"}class ID extends Ye{constructor(e,t,r){super(e,t,r),this.key=oe.fromName(r.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class wD extends Ye{constructor(e,t){super(e,"in",t),this.keys=DS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class RD extends Ye{constructor(e,t){super(e,"not-in",t),this.keys=DS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function DS(s,e){return(e.arrayValue?.values||[]).map((t=>oe.fromName(t.referenceValue)))}class CD extends Ye{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return oc(t)&&ac(t.arrayValue,this.value)}}class NS extends Ye{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ac(this.value.arrayValue,t)}}class xD extends Ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ac(this.value.arrayValue,t)}}class DD extends Ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!oc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ac(this.value.arrayValue,r)))}}class ND{constructor(e,t=null,r=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function Wp(s,e=null,t=[],r=[],o=null,u=null,c=null){return new ND(s,e,t,r,o,u,c)}function ka(s){const e=Ne(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Zp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ll(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ll(r))).join(",")),e.Te=t}return e.Te}function vc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!AD(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!RS(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!jT(s.startAt,e.startAt)&&jT(s.endAt,e.endAt)}function Nf(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Vf(s,e){return s.filters.filter((t=>t instanceof Ye&&t.field.isEqual(e)))}function qT(s,e,t){let r=cf,o=!0;for(const u of Vf(s,e)){let c=cf,m=!0;switch(u.op){case"<":case"<=":c=bD(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=cf}UT({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];UT({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function FT(s,e,t){let r=Is,o=!0;for(const u of Vf(s,e)){let c=Is,m=!0;switch(u.op){case">=":case">":c=SD(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=Is}zT({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];zT({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}class Wf{constructor(e,t=null,r=[],o=[],u=null,c="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function VD(s,e,t,r,o,u,c,m){return new Wf(s,e,t,r,o,u,c,m)}function ed(s){return new Wf(s)}function HT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function OD(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function MD(s){return s.collectionGroup!==null}function Qu(s){const e=Ne(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new lt(wt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Df(u,r))})),t.has(wt.keyField().canonicalString())||e.Ie.push(new Df(wt.keyField(),r))}return e.Ie}function li(s){const e=Ne(s);return e.Ee||(e.Ee=PD(e,Qu(s))),e.Ee}function PD(s,e){if(s.limitType==="F")return Wp(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Df(o.field,u)}));const t=s.endAt?new ul(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new ul(s.startAt.position,s.startAt.inclusive):null;return Wp(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function eg(s,e,t){return new Wf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function td(s,e){return vc(li(s),li(e))&&s.limitType===e.limitType}function VS(s){return`${ka(li(s))}|lt:${s.limitType}`}function Fo(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>xS(o))).join(", ")}]`),Qf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>ll(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>ll(o))).join(",")),`Target(${r})`})(li(s))}; limitType=${s.limitType})`}function Ec(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):oe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of Qu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(c,m,p){const y=BT(c,m,p);return c.inclusive?y<=0:y<0})(r.startAt,Qu(r),o)||r.endAt&&!(function(c,m,p){const y=BT(c,m,p);return c.inclusive?y>=0:y>0})(r.endAt,Qu(r),o))})(s,e)}function kD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function OS(s){return(e,t)=>{let r=!1;for(const o of Qu(s)){const u=LD(o,e,t);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function LD(s,e,t){const r=s.field.isKeyField()?oe.comparator(e.key,t.key):(function(u,c,m){const p=c.data.field(u),y=m.data.field(u);return p!==null&&y!==null?Ms(p,y):pe(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:s.dir})}}class kr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,((t,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return pS(this.inner)}size(){return this.innerSize}}const UD=new At(oe.comparator);function Gn(){return UD}const MS=new At(oe.comparator);function Pu(...s){let e=MS;for(const t of s)e=e.insert(t.key,t);return e}function PS(s){let e=MS;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ji(){return Yu()}function kS(){return Yu()}function Yu(){return new kr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const zD=new At(oe.comparator),BD=new lt(oe.comparator);function ze(...s){let e=BD;for(const t of s)e=e.add(t);return e}const jD=new lt(De);function qD(){return jD}function jg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function LS(s){return{integerValue:""+s}}function FD(s,e){return Kx(e)?LS(e):jg(s,e)}class nd{constructor(){this._=void 0}}function HD(s,e,t){return s instanceof lc?(function(o,u){const c={fields:{[_S]:{stringValue:yS},[ES]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&kg(u)&&(u=Jf(u)),u&&(c.fields[vS]=u),{mapValue:c}})(t,e):s instanceof hl?zS(s,e):s instanceof fl?BS(s,e):(function(o,u){const c=US(o,u),m=GT(c)+GT(o.Ae);return $p(c)&&$p(o.Ae)?LS(m):jg(o.serializer,m)})(s,e)}function GD(s,e,t){return s instanceof hl?zS(s,e):s instanceof fl?BS(s,e):t}function US(s,e){return s instanceof uc?(function(r){return $p(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class lc extends nd{}class hl extends nd{constructor(e){super(),this.elements=e}}function zS(s,e){const t=jS(e);for(const r of s.elements)t.some((o=>tr(o,r)))||t.push(r);return{arrayValue:{values:t}}}class fl extends nd{constructor(e){super(),this.elements=e}}function BS(s,e){let t=jS(e);for(const r of s.elements)t=t.filter((o=>!tr(o,r)));return{arrayValue:{values:t}}}class uc extends nd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function GT(s){return St(s.integerValue||s.doubleValue)}function jS(s){return oc(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class KD{constructor(e,t){this.field=e,this.transform=t}}function QD(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof hl&&o instanceof hl||r instanceof fl&&o instanceof fl?nl(r.elements,o.elements,tr):r instanceof uc&&o instanceof uc?tr(r.Ae,o.Ae):r instanceof lc&&o instanceof lc})(s.transform,e.transform)}class YD{constructor(e,t){this.version=e,this.transformResults=t}}class Sn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class id{}function qS(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new rd(s.key,Sn.none()):new El(s.key,s.data,Sn.none());{const t=s.data,r=yn.empty();let o=new lt(wt.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new Lr(s.key,r,new Mn(o.toArray()),Sn.none())}}function XD(s,e,t){s instanceof El?(function(o,u,c){const m=o.value.clone(),p=QT(o.fieldTransforms,u,c.transformResults);m.setAll(p),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,e,t):s instanceof Lr?(function(o,u,c){if(!df(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=QT(o.fieldTransforms,u,c.transformResults),p=u.data;p.setAll(FS(o)),p.setAll(m),u.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(s,e,t):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Xu(s,e,t,r){return s instanceof El?(function(u,c,m,p){if(!df(u.precondition,c))return m;const y=u.value.clone(),E=YT(u.fieldTransforms,p,c);return y.setAll(E),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(s,e,t,r):s instanceof Lr?(function(u,c,m,p){if(!df(u.precondition,c))return m;const y=YT(u.fieldTransforms,p,c),E=c.data;return E.setAll(FS(u)),E.setAll(y),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(s,e,t,r):(function(u,c,m){return df(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,e,t)}function $D(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=US(r.transform,o||null);u!=null&&(t===null&&(t=yn.empty()),t.set(r.field,u))}return t||null}function KT(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&nl(r,o,((u,c)=>QD(u,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class El extends id{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Lr extends id{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function FS(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function QT(s,e,t){const r=new Map;ve(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let o=0;o<t.length;o++){const u=s[o],c=u.transform,m=e.data.field(u.field);r.set(u.field,GD(c,m,t[o]))}return r}function YT(s,e,t){const r=new Map;for(const o of s){const u=o.transform,c=t.data.field(o.field);r.set(o.field,HD(u,c,e))}return r}class rd extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HS extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qg{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&XD(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=kS();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const p=qS(c,m);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,((t,r)=>KT(t,r)))&&nl(this.baseMutations,e.baseMutations,((t,r)=>KT(t,r)))}}class Fg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return zD})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new Fg(e,t,r,o)}}class Hg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class JD{constructor(e,t){this.count=e,this.unchangedNames=t}}var qt,Xe;function ZD(s){switch(s){case J.OK:return pe(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return pe(15467,{code:s})}}function GS(s){if(s===void 0)return bn("GRPC error has no .code"),J.UNKNOWN;switch(s){case qt.OK:return J.OK;case qt.CANCELLED:return J.CANCELLED;case qt.UNKNOWN:return J.UNKNOWN;case qt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case qt.INTERNAL:return J.INTERNAL;case qt.UNAVAILABLE:return J.UNAVAILABLE;case qt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case qt.NOT_FOUND:return J.NOT_FOUND;case qt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case qt.ABORTED:return J.ABORTED;case qt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case qt.DATA_LOSS:return J.DATA_LOSS;default:return pe(39323,{code:s})}}(Xe=qt||(qt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function WD(){return new TextEncoder}const eN=new xs([4294967295,4294967295],0);function XT(s){const e=WD().encode(s),t=new Hb;return t.update(e),new Uint8Array(t.digest())}function $T(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new xs([t,r],0),new xs([o,u],0)]}class Gg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ku(`Invalid padding: ${t}`);if(r<0)throw new ku(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ku(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ku(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xs.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(xs.fromNumber(r)));return o.compare(eN)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=XT(e),[r,o]=$T(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new Gg(u,o,t);return r.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=XT(e),[r,o]=$T(t);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sd{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sd(Se.min(),o,new At(De),Gn(),ze())}}class Tc{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tc(r,t,ze(),ze(),ze())}}class mf{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=o}}class KS{constructor(e,t){this.targetId=e,this.Ce=t}}class QS{constructor(e,t,r=Ht.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class JT{constructor(){this.ve=0,this.Fe=ZT(),this.Me=Ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),r=ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:pe(38017,{changeType:u})}})),new Tc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=ZT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class tN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gn(),this.He=$h(),this.Je=$h(),this.Ze=new At(De)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(Nf(u))if(r===0){const c=new oe(u.path);this.et(t,c,Nt.newNoDocument(c,Se.min()))}else ve(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const m=this.ut(e),p=m?this.ct(m,e,c):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=t;let c,m;try{c=Vr(r).toUint8Array()}catch(p){if(p instanceof gS)return Ma("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Gg(c,o,u)}catch(p){return Ma(p instanceof ku?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Nf(m.target)){const p=new oe(m.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Nt.newNoDocument(p,e))}u.Be&&(t.set(c,u.ke()),u.Ke())}}));let r=ze();this.Je.forEach(((u,c)=>{let m=!0;c.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new sd(e,t,this.Ze,this.je,r);return this.je=Gn(),this.He=$h(),this.Je=$h(),this.Ze=new At(De),o}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new JT,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new lt(De),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new lt(De),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new JT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function $h(){return new At(oe.comparator)}function ZT(){return new At(oe.comparator)}const nN={asc:"ASCENDING",desc:"DESCENDING"},iN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rN={and:"AND",or:"OR"};class sN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tg(s,e){return s.useProto3Json||Qf(e)?e:{value:e}}function dl(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YS(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function aN(s,e){return dl(s,e.toTimestamp())}function An(s){return ve(!!s,49232),Se.fromTimestamp((function(t){const r=Nr(t);return new ot(r.seconds,r.nanos)})(s))}function Kg(s,e){return ng(s,e).canonicalString()}function ng(s,e){const t=(function(o){return new nt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function XS(s){const e=nt.fromString(s);return ve(r1(e),10190,{key:e.toString()}),e}function Of(s,e){return Kg(s.databaseId,e.path)}function Ca(s,e){const t=XS(e);if(t.get(1)!==s.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new oe(ZS(t))}function $S(s,e){return Kg(s.databaseId,e)}function JS(s){const e=XS(s);return e.length===4?nt.emptyPath():ZS(e)}function ig(s){return new nt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function ZS(s){return ve(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function WT(s,e,t){return{name:Of(s,e),fields:t.value.mapValue.fields}}function oN(s,e,t){const r=Ca(s,e.name),o=An(e.updateTime),u=e.createTime?An(e.createTime):Se.min(),c=new yn({mapValue:{fields:e.fields}}),m=Nt.newFoundDocument(r,o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function lN(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:pe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(ve(E===void 0||typeof E=="string",58123),Ht.fromBase64String(E||"")):(ve(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Ht.fromUint8Array(E||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(y){const E=y.code===void 0?J.UNKNOWN:GS(y.code);return new ce(E,y.message||"")})(c);t=new QS(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Ca(s,r.document.name),u=An(r.document.updateTime),c=r.document.createTime?An(r.document.createTime):Se.min(),m=new yn({mapValue:{fields:r.document.fields}}),p=Nt.newFoundDocument(o,u,c,m),y=r.targetIds||[],E=r.removedTargetIds||[];t=new mf(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Ca(s,r.document),u=r.readTime?An(r.readTime):Se.min(),c=Nt.newNoDocument(o,u),m=r.removedTargetIds||[];t=new mf([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Ca(s,r.document),u=r.removedTargetIds||[];t=new mf([],u,o,null)}else{if(!("filter"in e))return pe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new JD(o,u),m=r.targetId;t=new KS(m,c)}}return t}function Mf(s,e){let t;if(e instanceof El)t={update:WT(s,e.key,e.value)};else if(e instanceof rd)t={delete:Of(s,e.key)};else if(e instanceof Lr)t={update:WT(s,e.key,e.data),updateMask:mN(e.fieldMask)};else{if(!(e instanceof HS))return pe(16599,{dt:e.type});t={verify:Of(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof lc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof hl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof fl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof uc)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw pe(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:aN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:pe(27497)})(s,e.precondition)),t}function rg(s,e){const t=e.currentDocument?(function(u){return u.updateTime!==void 0?Sn.updateTime(An(u.updateTime)):u.exists!==void 0?Sn.exists(u.exists):Sn.none()})(e.currentDocument):Sn.none(),r=e.updateTransforms?e.updateTransforms.map((o=>(function(c,m){let p=null;if("setToServerValue"in m)ve(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),p=new lc;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];p=new hl(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];p=new fl(E)}else"increment"in m?p=new uc(c,m.increment):pe(16584,{proto:m});const y=wt.fromServerFormat(m.fieldPath);return new KD(y,p)})(s,o))):[];if(e.update){e.update.name;const o=Ca(s,e.update.name),u=new yn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const y=p.fieldPaths||[];return new Mn(y.map((E=>wt.fromServerFormat(E))))})(e.updateMask);return new Lr(o,u,c,t,r)}return new El(o,u,t,r)}if(e.delete){const o=Ca(s,e.delete);return new rd(o,t)}if(e.verify){const o=Ca(s,e.verify);return new HS(o,t)}return pe(1463,{proto:e})}function uN(s,e){return s&&s.length>0?(ve(e!==void 0,14353),s.map((t=>(function(o,u){let c=o.updateTime?An(o.updateTime):An(u);return c.isEqual(Se.min())&&(c=An(u)),new YD(c,o.transformResults||[])})(t,e)))):[]}function WS(s,e){return{documents:[$S(s,e.path)]}}function e1(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$S(s,o);const u=(function(y){if(y.length!==0)return i1(dt.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const c=(function(y){if(y.length!==0)return y.map((E=>(function(w){return{field:Ho(w.field),direction:hN(w.dir)}})(E)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=tg(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function t1(s){let e=JS(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ve(r===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=(function(S){const w=n1(S);return w instanceof dt&&Bg(w)?w.getFilters():[w]})(t.where));let c=[];t.orderBy&&(c=(function(S){return S.map((w=>(function(Z){return new Df(Go(Z.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(S){let w;return w=typeof S=="object"?S.value:S,Qf(w)?null:w})(t.limit));let p=null;t.startAt&&(p=(function(S){const w=!!S.before,j=S.values||[];return new ul(j,w)})(t.startAt));let y=null;return t.endAt&&(y=(function(S){const w=!S.before,j=S.values||[];return new ul(j,w)})(t.endAt)),VD(e,o,c,u,m,"F",p,y)}function cN(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function n1(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Go(t.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Go(t.unaryFilter.field);return Ye.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Go(t.unaryFilter.field);return Ye.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Go(t.unaryFilter.field);return Ye.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ye.create(Go(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return dt.create(t.compositeFilter.filters.map((r=>n1(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(t.compositeFilter.op))})(s):pe(30097,{filter:s})}function hN(s){return nN[s]}function fN(s){return iN[s]}function dN(s){return rN[s]}function Ho(s){return{fieldPath:s.canonicalString()}}function Go(s){return wt.fromServerFormat(s.fieldPath)}function i1(s){return s instanceof Ye?(function(t){if(t.op==="=="){if(LT(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NAN"}};if(kT(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(LT(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NOT_NAN"}};if(kT(t.value))return{unaryFilter:{field:Ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ho(t.field),op:fN(t.op),value:t.value}}})(s):s instanceof dt?(function(t){const r=t.getFilters().map((o=>i1(o)));return r.length===1?r[0]:{compositeFilter:{op:dN(t.op),filters:r}}})(s):pe(54877,{filter:s})}function mN(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function r1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function s1(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Rr{constructor(e,t,r,o,u=Se.min(),c=Se.min(),m=Ht.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class a1{constructor(e){this.yt=e}}function pN(s,e){let t;if(e.document)t=oN(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),o=Ua(e.noDocument.readTime);t=Nt.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const r=oe.fromSegments(e.unknownDocument.path),o=Ua(e.unknownDocument.version);t=Nt.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime((function(o){const u=new ot(o[0],o[1]);return Se.fromTimestamp(u)})(e.readTime)),t}function e0(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(u,c){return{name:Of(u,c.key),fields:c.data.value.mapValue.fields,updateTime:dl(u,c.version.toTimestamp()),createTime:dl(u,c.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:La(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:La(e.version)}}return r}function Pf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function La(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ua(s){const e=new ot(s.seconds,s.nanoseconds);return Se.fromTimestamp(e)}function Ta(s,e){const t=(e.baseMutations||[]).map((u=>rg(s.yt,u)));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map((u=>rg(s.yt,u))),o=ot.fromMillis(e.localWriteTimeMs);return new qg(e.batchId,o,t,r)}function Lu(s){const e=Ua(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Ua(s.lastLimboFreeSnapshotVersion):Se.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return ve(c===1,1966,{count:c}),li(ed(JS(u.documents[0])))})(s.query):(function(u){return li(t1(u))})(s.query),new Rr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Ht.fromBase64String(s.resumeToken))}function o1(s,e){const t=La(e.snapshotVersion),r=La(e.lastLimboFreeSnapshotVersion);let o;o=Nf(e.target)?WS(s.yt,e.target):e1(s.yt,e.target).ft;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ka(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function l1(s){const e=t1({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?eg(e,e.limit,"L"):e}function wp(s,e){return new Hg(e.largestBatchId,rg(s.yt,e.overlayMutation))}function t0(s,e){const t=e.path.lastSegment();return[s,_n(e.path.popLast()),t]}function n0(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:La(r.readTime),documentKey:_n(r.documentKey.path),largestBatchId:r.largestBatchId}}class gN{getBundleMetadata(e,t){return i0(e).get(t).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:Ua(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(e,t){return i0(e).put((function(o){return{bundleId:o.id,createTime:La(An(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return r0(e).get(t).next((r=>{if(r)return(function(u){return{name:u.name,query:l1(u.bundledQuery),readTime:Ua(u.readTime)}})(r)}))}saveNamedQuery(e,t){return r0(e).put((function(o){return{name:o.name,readTime:La(An(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function i0(s){return Jt(s,Yf)}function r0(s){return Jt(s,Xf)}class ad{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new ad(e,r)}getOverlay(e,t){return Au(e).get(t0(this.userId,t)).next((r=>r?wp(this.serializer,r):null))}getOverlays(e,t){const r=Ji();return k.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){const o=[];return r.forEach(((u,c)=>{const m=new Hg(t,c);o.push(this.bt(e,m))})),k.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach((c=>o.add(_n(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Au(e).X(Qp,m))})),k.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ji(),u=_n(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Au(e).H(Qp,c).next((m=>{for(const p of m){const y=wp(this.serializer,p);o.set(y.getKey(),y)}return o}))}getOverlaysForCollectionGroup(e,t,r,o){const u=Ji();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Au(e).ee({index:cS,range:m},((p,y,E)=>{const S=wp(this.serializer,y);u.size()<o||S.largestBatchId===c?(u.set(S.getKey(),S),c=S.largestBatchId):E.done()})).next((()=>u))}bt(e,t){return Au(e).put((function(o,u,c){const[m,p,y]=t0(u,c.mutation.key);return{userId:u,collectionPath:p,documentId:y,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Mf(o.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Au(s){return Jt(s,$f)}class yN{St(e){return Jt(e,Mg)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?Ht.fromUint8Array(r):Ht.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ba{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){const r=St(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),tc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Nr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Vr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?bS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Zf(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):pe(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const o of Object.keys(r))this.Ot(o,t),this.Ct(r[o],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const o=ol,u=r[o].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(St(u)),this.Ot(o,t),this.Ct(r[o],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const o of r)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ba.Wt=new ba;const Uo=255;function _N(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function s0(s){const e=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=_N(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(e/8)}class vN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const o=t.codePointAt(0);this.Ht(240|o>>>18),this.Ht(128|63&o>>>12),this.Ht(128|63&o>>>6),this.Ht(128|63&o)}}this.Jt()}Yt(e){const t=this.en(e),r=s0(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),r=s0(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(Uo),this.sn(255)}_n(){this.an(Uo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Uo?(this.sn(Uo),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Uo?(this.an(Uo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class EN{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class TN{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Iu{constructor(){this.cn=new vN,this.ascending=new EN(this.cn),this.descending=new TN(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class Sa{constructor(e,t,r,o){this.hn=e,this.Pn=t,this.Tn=r,this.In=o}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new Sa(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:pf(this.Tn),directionalValue:pf(this.In),orderedDocumentKey:pf(t),documentKey:r.path.toArray()}}An(e,t,r){const o=this.Rn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function _s(s,e){let t=s.hn-e.hn;return t!==0?t:(t=a0(s.Tn,e.Tn),t!==0?t:(t=a0(s.In,e.In),t!==0?t:oe.comparator(s.Pn,e.Pn)))}function a0(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function pf(s){return ib()?(function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r})(s):s}function o0(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(s)}class l0{constructor(e){this.Vn=new lt(((t,r)=>wt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Hp(e);if(t!==void 0&&!this.pn(t))return!1;const r=_a(e);let o=new Set,u=0,c=0;for(;u<r.length&&this.pn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.Vn.size>0){const m=this.Vn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const p=r[u];if(!this.yn(m,p)||!this.wn(this.dn[c++],p))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.dn.length||!this.wn(this.dn[c++],m))return!1}return!0}bn(){if(this.fn)return null;let e=new lt(wt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new of(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new of(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new of(r.field,r.dir==="asc"?0:1)));return new If(If.UNKNOWN_ID,this.collectionId,t,ec.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function u1(s){if(ve(s instanceof Ye||s instanceof dt,20012),s instanceof Ye){if(s instanceof NS){const t=s.value.arrayValue?.values?.map((r=>Ye.create(s.field,"==",r)))||[];return dt.create(t,"or")}return s}const e=s.filters.map((t=>u1(t)));return dt.create(e,s.op)}function bN(s){if(s.getFilters().length===0)return[];const e=og(u1(s));return ve(c1(e),7391),sg(e)||ag(e)?[e]:e.getFilters()}function sg(s){return s instanceof Ye}function ag(s){return s instanceof dt&&Bg(s)}function c1(s){return sg(s)||ag(s)||(function(t){if(t instanceof dt&&Jp(t)){for(const r of t.getFilters())if(!sg(r)&&!ag(r))return!1;return!0}return!1})(s)}function og(s){if(ve(s instanceof Ye||s instanceof dt,34018),s instanceof Ye)return s;if(s.filters.length===1)return og(s.filters[0]);const e=s.filters.map((r=>og(r)));let t=dt.create(e,s.op);return t=kf(t),c1(t)?t:(ve(t instanceof dt,64498),ve(cl(t),40251),ve(t.filters.length>1,57927),t.filters.reduce(((r,o)=>Qg(r,o))))}function Qg(s,e){let t;return ve(s instanceof Ye||s instanceof dt,38388),ve(e instanceof Ye||e instanceof dt,25473),t=s instanceof Ye?e instanceof Ye?(function(o,u){return dt.create([o,u],"and")})(s,e):u0(s,e):e instanceof Ye?u0(e,s):(function(o,u){if(ve(o.filters.length>0&&u.filters.length>0,48005),cl(o)&&cl(u))return CS(o,u.getFilters());const c=Jp(o)?o:u,m=Jp(o)?u:o,p=c.filters.map((y=>Qg(y,m)));return dt.create(p,"or")})(s,e),kf(t)}function u0(s,e){if(cl(e))return CS(e,s.getFilters());{const t=e.filters.map((r=>Qg(s,r)));return dt.create(t,"or")}}function kf(s){if(ve(s instanceof Ye||s instanceof dt,11850),s instanceof Ye)return s;const e=s.getFilters();if(e.length===1)return kf(e[0]);if(wS(s))return s;const t=e.map((o=>kf(o))),r=[];return t.forEach((o=>{o instanceof Ye?r.push(o):o instanceof dt&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:dt.create(r,s.op)}class SN{constructor(){this.Sn=new Yg}addToCollectionParentIndex(e,t){return this.Sn.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(Kn.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}}class Yg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new lt(nt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new lt(nt.comparator)).toArray()}}const c0="IndexedDbIndexManager",Jh=new Uint8Array(0);class AN{constructor(e,t){this.databaseId=t,this.Dn=new Yg,this.Cn=new kr((r=>ka(r)),((r,o)=>vc(r,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const u={collectionId:r,parent:_n(o)};return h0(e).put(u)}return k.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Zb(t),""],!1,!0);return h0(e).H(o).next((u=>{for(const c of u){if(c.collectionId!==t)break;r.push($i(c.parent))}return r}))}addFieldIndex(e,t){const r=wu(e),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete o.indexId;const u=r.add(o);if(t.indexState){const c=Bo(e);return u.next((m=>{c.put(n0(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return u.next()}deleteFieldIndex(e,t){const r=wu(e),o=Bo(e),u=zo(e);return r.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=wu(e),r=zo(e),o=Bo(e);return t.X().next((()=>r.X())).next((()=>o.X()))}createTargetIndexes(e,t){return k.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((o=>{if(o===0||o===1){const u=new l0(r).bn();if(u!=null)return this.addFieldIndex(e,u)}}))))}getDocumentsMatchingTarget(e,t){const r=zo(e);let o=!0;const u=new Map;return k.forEach(this.vn(t),(c=>this.Fn(e,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=ze();const m=[];return k.forEach(u,((p,y)=>{ee(c0,`Using index ${(function(le){return`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map((Le=>`${Le.fieldPath}:${Le.kind}`)).join(",")}`})(p)} to execute ${ka(t)}`);const E=(function(le,Le){const Oe=Hp(Le);if(Oe===void 0)return null;for(const Ie of Vf(le,Oe.fieldPath))switch(Ie.op){case"array-contains-any":return Ie.value.arrayValue.values||[];case"array-contains":return[Ie.value]}return null})(y,p),S=(function(le,Le){const Oe=new Map;for(const Ie of _a(Le))for(const R of Vf(le,Ie.fieldPath))switch(R.op){case"==":case"in":Oe.set(Ie.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return Oe.set(Ie.fieldPath.canonicalString(),R.value),Array.from(Oe.values())}return null})(y,p),w=(function(le,Le){const Oe=[];let Ie=!0;for(const R of _a(Le)){const A=R.kind===0?qT(le,R.fieldPath,le.startAt):FT(le,R.fieldPath,le.startAt);Oe.push(A.value),Ie&&(Ie=A.inclusive)}return new ul(Oe,Ie)})(y,p),j=(function(le,Le){const Oe=[];let Ie=!0;for(const R of _a(Le)){const A=R.kind===0?FT(le,R.fieldPath,le.endAt):qT(le,R.fieldPath,le.endAt);Oe.push(A.value),Ie&&(Ie=A.inclusive)}return new ul(Oe,Ie)})(y,p),Z=this.Mn(p,y,w),W=this.Mn(p,y,j),te=this.xn(p,y,S),ge=this.On(p.indexId,E,Z,w.inclusive,W,j.inclusive,te);return k.forEach(ge,(Ee=>r.Z(Ee,t.limit).next((le=>{le.forEach((Le=>{const Oe=oe.fromSegments(Le.documentKey);c.has(Oe)||(c=c.add(Oe),m.push(Oe))}))}))))})).next((()=>m))}return k.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=bN(dt.create(e.filters,"and")).map((r=>Wp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,o,u,c,m){const p=(t!=null?t.length:1)*Math.max(r.length,u.length),y=p/(t!=null?t.length:1),E=[];for(let S=0;S<p;++S){const w=t?this.Nn(t[S/y]):Jh,j=this.Bn(e,w,r[S%y],o),Z=this.Ln(e,w,u[S%y],c),W=m.map((te=>this.Bn(e,w,te,!0)));E.push(...this.createRange(j,Z,W))}return E}Bn(e,t,r,o){const u=new Sa(e,oe.empty(),t,r);return o?u:u.En()}Ln(e,t,r,o){const u=new Sa(e,oe.empty(),t,r);return o?u.En():u}Fn(e,t){const r=new l0(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((u=>{let c=null;for(const m of u)r.gn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(e,t){let r=2;const o=this.vn(t);return k.forEach(o,(u=>this.Fn(e,u).next((c=>{c?r!==0&&c.fields.length<(function(p){let y=new lt(wt.comparator),E=!1;for(const S of p.filters)for(const w of S.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?E=!0:y=y.add(w.field));for(const S of p.orderBy)S.field.isKeyField()||(y=y.add(S.field));return y.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&r===2?1:r))}kn(e,t){const r=new Iu;for(const o of _a(e)){const u=t.data.field(o.fieldPath);if(u==null)return null;const c=r.ln(o.kind);ba.Wt.Dt(u,c)}return r.un()}Nn(e){const t=new Iu;return ba.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Iu;return ba.Wt.Dt(zg(this.databaseId,t),r.ln((function(u){const c=_a(u);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let o=[];o.push(new Iu);let u=0;for(const c of _a(e)){const m=r[u++];for(const p of o)if(this.qn(t,c.fieldPath)&&oc(m))o=this.Un(o,c,m);else{const y=p.ln(c.kind);ba.Wt.Dt(m,y)}}return this.$n(o)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const p=new Iu;p.seed(m.un()),ba.Wt.Dt(c,p.ln(t.kind)),u.push(p)}return u}qn(e,t){return!!e.filters.find((r=>r instanceof Ye&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=wu(e),o=Bo(e);return(t?r.H(Kp,IDBKeyRange.bound(t,t)):r.H()).next((u=>{const c=[];return k.forEach(u,(m=>o.get([m.indexId,this.uid]).next((p=>{c.push((function(E,S){const w=S?new ec(S.sequenceNumber,new Kn(Ua(S.readTime),new oe($i(S.documentKey)),S.largestBatchId)):ec.empty(),j=E.fields.map((([Z,W])=>new of(wt.fromServerFormat(Z),W)));return new If(E.indexId,E.collectionGroup,j,w)})(m,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:De(r.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const o=wu(e),u=Bo(e);return this.Wn(e).next((c=>o.H(Kp,IDBKeyRange.bound(t,t)).next((m=>k.forEach(m,(p=>u.put(n0(p.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return k.forEach(t,((o,u)=>{const c=r.get(o.collectionGroup);return(c?k.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),k.forEach(m,(p=>this.Qn(e,o,p).next((y=>{const E=this.Gn(u,p);return y.isEqual(E)?k.resolve():this.zn(e,u,p,y,E)})))))))}))}jn(e,t,r,o){return zo(e).put(o.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,o){return zo(e).delete(o.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const o=zo(e);let u=new lt(_s);return o.ee({index:uS,range:IDBKeyRange.only([r.indexId,this.uid,pf(this.Kn(r,t))])},((c,m)=>{u=u.add(new Sa(r.indexId,t,o0(m.arrayValue),o0(m.directionalValue)))})).next((()=>u))}Gn(e,t){let r=new lt(_s);const o=this.kn(t,e);if(o==null)return r;const u=Hp(t);if(u!=null){const c=e.data.field(u.fieldPath);if(oc(c))for(const m of c.arrayValue.values||[])r=r.add(new Sa(t.indexId,e.key,this.Nn(m),o))}else r=r.add(new Sa(t.indexId,e.key,Jh,o));return r}zn(e,t,r,o,u){ee(c0,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,y,E,S,w){const j=p.getIterator(),Z=y.getIterator();let W=Lo(j),te=Lo(Z);for(;W||te;){let ge=!1,Ee=!1;if(W&&te){const le=E(W,te);le<0?Ee=!0:le>0&&(ge=!0)}else W!=null?Ee=!0:ge=!0;ge?(S(te),te=Lo(Z)):Ee?(w(W),W=Lo(j)):(W=Lo(j),te=Lo(Z))}})(o,u,_s,(m=>{c.push(this.jn(e,t,r,m))}),(m=>{c.push(this.Hn(e,t,r,m))})),k.waitFor(c)}Wn(e){let t=1;return Bo(e).ee({index:lS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,m)=>_s(c,m))).filter(((c,m,p)=>!m||_s(c,p[m-1])!==0));const o=[];o.push(e);for(const c of r){const m=_s(c,e),p=_s(c,t);if(m===0)o[0]=e.En();else if(m>0&&p<0)o.push(c),o.push(c.En());else if(p>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2){if(this.Jn(o[c],o[c+1]))return[];const m=o[c].An(this.uid,Jh,oe.empty()),p=o[c+1].An(this.uid,Jh,oe.empty());u.push(IDBKeyRange.bound(m,p))}return u}Jn(e,t){return _s(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(f0)}getMinOffset(e,t){return k.mapArray(this.vn(t),(r=>this.Fn(e,r).next((o=>o||pe(44426))))).next(f0)}}function h0(s){return Jt(s,rc)}function zo(s){return Jt(s,Gu)}function wu(s){return Jt(s,Og)}function Bo(s){return Jt(s,Hu)}function f0(s){ve(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Dg(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Kn(e.readTime,e.documentKey,t)}const d0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h1=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function f1(s,e,t){const r=s.store(Ti),o=s.store(il),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const p=r.ee({range:c},((E,S,w)=>(m++,w.delete())));u.push(p.next((()=>{ve(m===1,47070,{batchId:t.batchId})})));const y=[];for(const E of t.mutations){const S=sS(e,E.key.path,t.batchId);u.push(o.delete(S)),y.push(E.key)}return k.waitFor(u).next((()=>y))}function Lf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw pe(14731);e=s.noDocument}return JSON.stringify(e).length}gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(h1,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);class od{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Zn={}}static wt(e,t,r,o){ve(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new od(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vs(e).ee({index:Ia,range:r},((o,u,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,o){const u=Ko(e),c=vs(e);return c.add({}).next((m=>{ve(typeof m=="number",49019);const p=new qg(m,t,r,o),y=(function(j,Z,W){const te=W.baseMutations.map((Ee=>Mf(j.yt,Ee))),ge=W.mutations.map((Ee=>Mf(j.yt,Ee)));return{userId:Z,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:te,mutations:ge}})(this.serializer,this.userId,p),E=[];let S=new lt(((w,j)=>De(w.canonicalString(),j.canonicalString())));for(const w of o){const j=sS(this.userId,w.key.path,m);S=S.add(w.key.path.popLast()),E.push(c.put(y)),E.push(u.put(j,Xx))}return S.forEach((w=>{E.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Zn[m]=p.keys()})),k.waitFor(E).next((()=>p))}))}lookupMutationBatch(e,t){return vs(e).get(t).next((r=>r?(ve(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Ta(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?k.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const o=r.keys();return this.Zn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return vs(e).ee({index:Ia,range:o},((c,m,p)=>{m.userId===this.userId&&(ve(m.batchId>=r,47524,{Yn:r}),u=Ta(this.serializer,m)),p.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=wa;return vs(e).ee({index:Ia,range:t,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,wa],[this.userId,Number.POSITIVE_INFINITY]);return vs(e).H(Ia,t).next((r=>r.map((o=>Ta(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=lf(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Ko(e).ee({range:o},((c,m,p)=>{const[y,E,S]=c,w=$i(E);if(y===this.userId&&t.path.isEqual(w))return vs(e).get(S).next((j=>{if(!j)throw pe(61480,{er:c,batchId:S});ve(j.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:j.userId,batchId:S}),u.push(Ta(this.serializer,j))}));p.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new lt(De);const o=[];return t.forEach((u=>{const c=lf(this.userId,u.path),m=IDBKeyRange.lowerBound(c),p=Ko(e).ee({range:m},((y,E,S)=>{const[w,j,Z]=y,W=$i(j);w===this.userId&&u.path.isEqual(W)?r=r.add(Z):S.done()}));o.push(p)})),k.waitFor(o).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=lf(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new lt(De);return Ko(e).ee({range:c},((p,y,E)=>{const[S,w,j]=p,Z=$i(w);S===this.userId&&r.isPrefixOf(Z)?Z.length===o&&(m=m.add(j)):E.done()})).next((()=>this.tr(e,m)))}tr(e,t){const r=[],o=[];return t.forEach((u=>{o.push(vs(e).get(u).next((c=>{if(c===null)throw pe(35274,{batchId:u});ve(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(Ta(this.serializer,c))})))})),k.waitFor(o).next((()=>r))}removeMutationBatch(e,t){return f1(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),k.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return k.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Ko(e).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const p=$i(u[1]);o.push(p)}else m.done()})).next((()=>{ve(o.length===0,56720,{rr:o.map((u=>u.canonicalString()))})}))}))}containsKey(e,t){return d1(e,this.userId,t)}ir(e){return m1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:wa,lastStreamToken:""}))}}function d1(s,e,t){const r=lf(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Ko(s).ee({range:u,Y:!0},((m,p,y)=>{const[E,S,w]=m;E===e&&S===o&&(c=!0),y.done()})).next((()=>c))}function vs(s){return Jt(s,Ti)}function Ko(s){return Jt(s,il)}function m1(s){return Jt(s,nc)}class za{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new za(0)}static ar(){return new za(-1)}}class IN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new za(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Se.fromTimestamp(new ot(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.cr(e,o))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>jo(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(ve(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let o=0;const u=[];return jo(e).ee(((c,m)=>{const p=Lu(m);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,u.push(this.removeTargetData(e,p)))})).next((()=>k.waitFor(u))).next((()=>o))}forEachTarget(e,t){return jo(e).ee(((r,o)=>{const u=Lu(o);t(u)}))}ur(e){return m0(e).get(Cf).next((t=>(ve(t!==null,2888),t)))}cr(e,t){return m0(e).put(Cf,t)}lr(e,t){return jo(e).put(o1(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=ka(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return jo(e).ee({range:o,index:oS},((c,m,p)=>{const y=Lu(m);vc(t,y.target)&&(u=y,p.done())})).next((()=>u))}addMatchingKeys(e,t,r){const o=[],u=As(e);return t.forEach((c=>{const m=_n(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,c))})),k.waitFor(o)}removeMatchingKeys(e,t,r){const o=As(e);return k.forEach(t,(u=>{const c=_n(u.path);return k.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])}))}removeMatchingKeysForTargetId(e,t){const r=As(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=As(e);let u=ze();return o.ee({range:r,Y:!0},((c,m,p)=>{const y=$i(c[1]),E=new oe(y);u=u.add(E)})).next((()=>u))}containsKey(e,t){const r=_n(t.path),o=IDBKeyRange.bound([r],[Zb(r)],!1,!0);let u=0;return As(e).ee({index:Vg,Y:!0,range:o},(([c,m],p,y)=>{c!==0&&(u++,y.done())})).next((()=>u>0))}At(e,t){return jo(e).get(t).next((r=>r?Lu(r):null))}}function jo(s){return Jt(s,rl)}function m0(s){return Jt(s,Ra)}function As(s){return Jt(s,sl)}const p0="LruGarbageCollector",wN=1048576;function g0([s,e],[t,r]){const o=De(s,t);return o===0?De(e,r):o}class RN{constructor(e){this.Pr=e,this.buffer=new lt(g0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();g0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class p1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ee(p0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ls(t)?ee(p0,"Ignoring IndexedDB error during garbage collection: ",t):await qa(t)}await this.Ar(3e5)}))}}class CN{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return k.resolve(oi.ce);const r=new RN(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(d0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,o,u,c,m,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,c=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,m=Date.now(),this.removeTargets(e,r,t)))).next((S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(y=Date.now(),qo()<=Ke.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${S} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function g1(s,e){return new CN(s,e)}class xN{constructor(e,t){this.db=e,this.garbageCollector=g1(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,o)=>t(o)))}addReference(e,t,r){return Zh(e,r)}removeReference(e,t,r){return Zh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Zh(e,t)}wr(e,t){return(function(o,u){let c=!1;return m1(o).te((m=>d1(o,m,u).next((p=>(p&&(c=!0),k.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.yr(e,((c,m)=>{if(m<=t){const p=this.wr(e,c).next((y=>{if(!y)return u++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Se.min()),As(e).delete((function(S){return[0,_n(S.path)]})(c)))))}));o.push(p)}})).next((()=>k.waitFor(o))).next((()=>r.apply(e))).next((()=>u))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Zh(e,t)}yr(e,t){const r=As(e);let o,u=oi.ce;return r.ee({index:Vg},(([c,m],{path:p,sequenceNumber:y})=>{c===0?(u!==oi.ce&&t(new oe($i(o)),u),u=y,o=p):u=oi.ce})).next((()=>{u!==oi.ce&&t(new oe($i(o)),u)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zh(s,e){return As(s).put((function(r,o){return{targetId:0,path:_n(r.path),sequenceNumber:o}})(e,s.currentSequenceNumber))}class y1{constructor(){this.changes=new kr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pa(e).put(r)}removeEntry(e,t,r){return pa(e).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Pf(c),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=Nt.newInvalidDocument(t);return pa(e).ee({index:uf,range:IDBKeyRange.only(Ru(t))},((o,u)=>{r=this.Sr(t,u)})).next((()=>r))}Dr(e,t){let r={size:0,document:Nt.newInvalidDocument(t)};return pa(e).ee({index:uf,range:IDBKeyRange.only(Ru(t))},((o,u)=>{r={document:this.Sr(t,u),size:Lf(u)}})).next((()=>r))}getEntries(e,t){let r=Gn();return this.Cr(e,t,((o,u)=>{const c=this.Sr(o,u);r=r.insert(o,c)})).next((()=>r))}vr(e,t){let r=Gn(),o=new At(oe.comparator);return this.Cr(e,t,((u,c)=>{const m=this.Sr(u,c);r=r.insert(u,m),o=o.insert(u,Lf(c))})).next((()=>({documents:r,Fr:o})))}Cr(e,t,r){if(t.isEmpty())return k.resolve();let o=new lt(v0);t.forEach((p=>o=o.add(p)));const u=IDBKeyRange.bound(Ru(o.first()),Ru(o.last())),c=o.getIterator();let m=c.getNext();return pa(e).ee({index:uf,range:u},((p,y,E)=>{const S=oe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;m&&v0(m,S)<0;)r(m,null),m=c.getNext();m&&m.isEqual(S)&&(r(m,y),m=c.hasNext()?c.getNext():null),m?E.j(Ru(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,o,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),Pf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pa(e).H(IDBKeyRange.bound(m,p,!0)).next((y=>{u?.incrementDocumentReadCount(y.length);let E=Gn();for(const S of y){const w=this.Sr(oe.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);w.isFoundDocument()&&(Ec(t,w)||o.has(w.key))&&(E=E.insert(w.key,w))}return E}))}getAllFromCollectionGroup(e,t,r,o){let u=Gn();const c=_0(t,r),m=_0(t,Kn.max());return pa(e).ee({index:aS,range:IDBKeyRange.bound(c,m,!0)},((p,y,E)=>{const S=this.Sr(oe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);u=u.insert(S.key,S),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(e){return new NN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return y0(e).get(Gp).next((t=>(ve(!!t,20021),t)))}br(e,t){return y0(e).put(Gp,t)}Sr(e,t){if(t){const r=pN(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return Nt.newInvalidDocument(e)}}function _1(s){return new DN(s)}class NN extends y1{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new kr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(e){const t=[];let r=0,o=new lt(((u,c)=>De(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Or.get(u);if(t.push(this.Mr.removeEntry(e,u,m.readTime)),c.isValidDocument()){const p=e0(this.Mr.serializer,c);o=o.add(u.path.popLast());const y=Lf(p);r+=y-m.size,t.push(this.Mr.addEntry(e,u,p))}else if(r-=m.size,this.trackRemovals){const p=e0(this.Mr.serializer,c.convertToNoDocument(Se.min()));t.push(this.Mr.addEntry(e,u,p))}})),o.forEach((u=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,u))})),t.push(this.Mr.updateMetadata(e,r)),k.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:o})=>(o.forEach(((u,c)=>{this.Or.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function y0(s){return Jt(s,ic)}function pa(s){return Jt(s,Rf)}function Ru(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _0(s,e){const t=e.documentKey.path.toArray();return[s,Pf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function v0(s,e){const t=s.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=De(t[u],r[u]),o)return o;return o=De(t.length,r.length),o||(o=De(t[t.length-2],r[r.length-2]),o||De(t[t.length-1],r[r.length-1]))}class VN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class v1{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Xu(r.mutation,o,Mn.empty(),ot.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ze()){const o=Ji();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((u=>{let c=Pu();return u.forEach(((m,p)=>{c=c.insert(m,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Ji();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ze())))}populateOverlays(e,t,r){const o=[];return r.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,r,o){let u=Gn();const c=Yu(),m=(function(){return Yu()})();return t.forEach(((p,y)=>{const E=r.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Lr)?u=u.insert(y.key,y):E!==void 0?(c.set(y.key,E.mutation.getFieldMask()),Xu(E.mutation,y,E.mutation.getFieldMask(),ot.now())):c.set(y.key,Mn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,E)=>c.set(y,E))),t.forEach(((y,E)=>m.set(y,new VN(E,c.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=Yu();let o=new At(((c,m)=>c-m)),u=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let E=r.get(p)||Mn.empty();E=m.applyToLocalView(y,E),r.set(p,E);const S=(o.get(m.batchId)||ze()).add(p);o=o.insert(m.batchId,S)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,E=p.value,S=kS();E.forEach((w=>{if(!u.has(w)){const j=qS(t.get(w),r.get(w));j!==null&&S.set(w,j),u=u.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,S))}return k.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return OD(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):MD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):k.resolve(Ji());let m=Wu,p=u;return c.next((y=>k.forEach(y,((E,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(E)?k.resolve():this.remoteDocumentCache.getEntry(e,E).next((w=>{p=p.insert(E,w)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,ze()))).next((E=>({batchId:m,changes:PS(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next((r=>{let o=Pu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const u=t.collectionGroup;let c=Pu();return this.indexManager.getCollectionParents(e,u).next((m=>k.forEach(m,(p=>{const y=(function(S,w){return new Wf(w,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((E=>{E.forEach(((S,w)=>{c=c.insert(S,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,o)))).next((c=>{u.forEach(((p,y)=>{const E=y.getKey();c.get(E)===null&&(c=c.insert(E,Nt.newInvalidDocument(E)))}));let m=Pu();return c.forEach(((p,y)=>{const E=u.get(p);E!==void 0&&Xu(E.mutation,y,Mn.empty(),ot.now()),Ec(t,y)&&(m=m.insert(p,y))})),m}))}}class ON{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return k.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:An(o.createTime)}})(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:l1(o.bundledQuery),readTime:An(o.readTime)}})(t)),k.resolve()}}class MN{constructor(){this.overlays=new At(oe.comparator),this.Lr=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ji();return k.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,u)=>{this.bt(e,t,u)})),k.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){const o=Ji(),u=t.length+1,c=new oe(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>r&&o.set(p.getKey(),p)}return k.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new At(((y,E)=>y-E));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=u.get(y.largestBatchId);E===null&&(E=Ji(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=Ji(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,E)=>m.set(y,E))),!(m.size()>=o)););return k.resolve(m)}bt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Hg(t,r));let u=this.Lr.get(t);u===void 0&&(u=ze(),this.Lr.set(t,u)),this.Lr.set(t,u.add(r.key))}}class PN{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}}class Xg{constructor(){this.kr=new lt(tn.Kr),this.qr=new lt(tn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new tn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new tn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new oe(new nt([])),r=new tn(t,e),o=new tn(t,e+1),u=[];return this.qr.forEachInRange([r,o],(c=>{this.Wr(c),u.push(c.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new oe(new nt([])),r=new tn(t,e),o=new tn(t,e+1);let u=ze();return this.qr.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const t=new tn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return oe.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||oe.comparator(e.key,t.key)}}class kN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new lt(tn.Kr)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new qg(u,t,r,o);this.mutationQueue.push(c);for(const m of o)this.Jr=this.Jr.add(new tn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return k.resolve(c)}lookupMutationBatch(e,t){return k.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),u=o<0?0:o;return k.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?wa:this.Yn-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new tn(t,0),o=new tn(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([r,o],(c=>{const m=this.Zr(c.Hr);u.push(m)})),k.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new lt(De);return t.forEach((o=>{const u=new tn(o,0),c=new tn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,c],(m=>{r=r.add(m.Hr)}))})),k.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;oe.isDocumentKey(u)||(u=u.child(""));const c=new tn(new oe(u),0);let m=new lt(De);return this.Jr.forEachWhile((p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Hr)),!0)}),c),k.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ve(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return k.forEach(t.mutations,(o=>{const u=new tn(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new tn(t,0),o=this.Jr.firstAfterOrEqual(r);return k.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class LN{constructor(e){this.ti=e,this.docs=(function(){return new At(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let r=Gn();return t.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Nt.newInvalidDocument(o))})),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Gn();const c=t.path,m=new oe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||Dg(tS(E),r)<=0||(o.has(E.key)||Ec(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return k.resolve(u)}getAllFromCollectionGroup(e,t,r,o){pe(9500)}ni(e,t){return k.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new UN(this)}getSize(e){return k.resolve(this.size)}}class UN extends y1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),k.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class zN{constructor(e){this.persistence=e,this.ri=new kr((t=>ka(t)),vc),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.ii=0,this.si=new Xg,this.targetCount=0,this.oi=za._r()}forEachTarget(e,t){return this.ri.forEach(((r,o)=>t(o))),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),k.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new za(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.lr(t),k.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.ri.forEach(((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.ri.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),k.waitFor(u).next((()=>o))}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),k.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),k.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.si.containsKey(t))}}class $g{constructor(e,t){this._i={},this.overlays={},this.ai=new oi(0),this.ui=!1,this.ui=!0,this.ci=new PN,this.referenceDelegate=e(this),this.li=new zN(this),this.indexManager=new SN,this.remoteDocumentCache=(function(o){return new LN(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new a1(t),this.Pi=new ON(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new kN(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);const o=new BN(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,t){return k.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class BN extends iS{constructor(e){super(),this.currentSequenceNumber=e}}class ld{constructor(e){this.persistence=e,this.Ri=new Xg,this.Ai=null}static Vi(e){return new ld(e)}get di(){if(this.Ai)return this.Ai;throw pe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),k.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.di,(r=>{const o=oe.fromPath(r);return this.mi(e,o).next((u=>{u||t.removeEntry(o,Se.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return k.or([()=>k.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Uf{constructor(e,t){this.persistence=e,this.fi=new kr((r=>_n(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=g1(this,t)}static Vi(e,t){return new Uf(e,t)}Ti(){}Ii(e){return k.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return k.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((u=>u?k.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(c=>this.wr(e,c,t).next((m=>{m||(r++,u.removeEntry(c,Se.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),k.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),k.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hf(e.data.value)),t}wr(e,t,r){return k.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return k.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class jN{constructor(e){this.serializer=e}k(e,t,r,o){const u=new Kf("createOrUpgrade",t);r<1&&o>=1&&((function(p){p.createObjectStore(_c)})(e),(function(p){p.createObjectStore(nc,{keyPath:Yx}),p.createObjectStore(Ti,{keyPath:DT,autoIncrement:!0}).createIndex(Ia,NT,{unique:!0}),p.createObjectStore(il)})(e),E0(e),(function(p){p.createObjectStore(va)})(e));let c=k.resolve();return r<3&&o>=3&&(r!==0&&((function(p){p.deleteObjectStore(sl),p.deleteObjectStore(rl),p.deleteObjectStore(Ra)})(e),E0(e)),c=c.next((()=>(function(p){const y=p.store(Ra),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return y.put(Cf,E)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(p,y){return y.store(Ti).H().next((S=>{p.deleteObjectStore(Ti),p.createObjectStore(Ti,{keyPath:DT,autoIncrement:!0}).createIndex(Ia,NT,{unique:!0});const w=y.store(Ti),j=S.map((Z=>w.put(Z)));return k.waitFor(j)}))})(e,u)))),c=c.next((()=>{(function(p){p.createObjectStore(al,{keyPath:iD})})(e)}))),r<5&&o>=5&&(c=c.next((()=>this.gi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(p){p.createObjectStore(ic)})(e),this.pi(u))))),r<7&&o>=7&&(c=c.next((()=>this.yi(u)))),r<8&&o>=8&&(c=c.next((()=>this.wi(e,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&o>=10&&(c=c.next((()=>this.bi(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(Yf,{keyPath:rD})})(e),(function(p){p.createObjectStore(Xf,{keyPath:sD})})(e)}))),r<12&&o>=12&&(c=c.next((()=>{(function(p){const y=p.createObjectStore($f,{keyPath:fD});y.createIndex(Qp,dD,{unique:!1}),y.createIndex(cS,mD,{unique:!1})})(e)}))),r<13&&o>=13&&(c=c.next((()=>(function(p){const y=p.createObjectStore(Rf,{keyPath:$x});y.createIndex(uf,Jx),y.createIndex(aS,Zx)})(e))).next((()=>this.Si(e,u))).next((()=>e.deleteObjectStore(va)))),r<14&&o>=14&&(c=c.next((()=>this.Di(e,u)))),r<15&&o>=15&&(c=c.next((()=>(function(p){p.createObjectStore(Og,{keyPath:aD,autoIncrement:!0}).createIndex(Kp,oD,{unique:!1}),p.createObjectStore(Hu,{keyPath:lD}).createIndex(lS,uD,{unique:!1}),p.createObjectStore(Gu,{keyPath:cD}).createIndex(uS,hD,{unique:!1})})(e)))),r<16&&o>=16&&(c=c.next((()=>{t.objectStore(Hu).clear()})).next((()=>{t.objectStore(Gu).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(Mg,{keyPath:pD})})(e)}))),r<18&&o>=18&&ib()&&(c=c.next((()=>{t.objectStore(Hu).clear()})).next((()=>{t.objectStore(Gu).clear()}))),c}pi(e){let t=0;return e.store(va).ee(((r,o)=>{t+=Lf(o)})).next((()=>{const r={byteSize:t};return e.store(ic).put(Gp,r)}))}gi(e){const t=e.store(nc),r=e.store(Ti);return t.H().next((o=>k.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,wa],[u.userId,u.lastAcknowledgedBatchId]);return r.H(Ia,c).next((m=>k.forEach(m,(p=>{ve(p.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const y=Ta(this.serializer,p);return f1(e,u.userId,y).next((()=>{}))}))))}))))}yi(e){const t=e.store(sl),r=e.store(va);return e.store(Ra).get(Cf).next((o=>{const u=[];return r.ee(((c,m)=>{const p=new nt(c),y=(function(S){return[0,_n(S)]})(p);u.push(t.get(y).next((E=>E?k.resolve():(S=>t.put({targetId:0,path:_n(S),sequenceNumber:o.highestListenSequenceNumber}))(p))))})).next((()=>k.waitFor(u)))}))}wi(e,t){e.createObjectStore(rc,{keyPath:nD});const r=t.store(rc),o=new Yg,u=c=>{if(o.add(c)){const m=c.lastSegment(),p=c.popLast();return r.put({collectionId:m,parent:_n(p)})}};return t.store(va).ee({Y:!0},((c,m)=>{const p=new nt(c);return u(p.popLast())})).next((()=>t.store(il).ee({Y:!0},(([c,m,p],y)=>{const E=$i(m);return u(E.popLast())}))))}bi(e){const t=e.store(rl);return t.ee(((r,o)=>{const u=Lu(o),c=o1(this.serializer,u);return t.put(c)}))}Si(e,t){const r=t.store(va),o=[];return r.ee(((u,c)=>{const m=t.store(Rf),p=(function(S){return S.document?new oe(nt.fromString(S.document.name).popFirst(5)):S.noDocument?oe.fromSegments(S.noDocument.path):S.unknownDocument?oe.fromSegments(S.unknownDocument.path):pe(36783)})(c).path.toArray(),y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(y))})).next((()=>k.waitFor(o)))}Di(e,t){const r=t.store(Ti),o=_1(this.serializer),u=new $g(ld.Vi,this.serializer.yt);return r.H().next((c=>{const m=new Map;return c.forEach((p=>{let y=m.get(p.userId)??ze();Ta(this.serializer,p).keys().forEach((E=>y=y.add(E))),m.set(p.userId,y)})),k.forEach(m,((p,y)=>{const E=new fn(y),S=ad.wt(this.serializer,E),w=u.getIndexManager(E),j=od.wt(E,this.serializer,w,u.referenceDelegate);return new v1(o,j,S,w).recalculateAndSaveOverlaysForDocumentKeys(new Yp(t,oi.ce),p).next()}))}))}}function E0(s){s.createObjectStore(sl,{keyPath:eD}).createIndex(Vg,tD,{unique:!0}),s.createObjectStore(rl,{keyPath:"targetId"}).createIndex(oS,Wx,{unique:!0}),s.createObjectStore(Ra)}const Es="IndexedDbPersistence",Rp=18e5,Cp=5e3,xp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qN="main";class Jg{constructor(e,t,r,o,u,c,m,p,y,E,S=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=u,this.window=c,this.document=m,this.Fi=y,this.Mi=E,this.xi=S,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=w=>Promise.resolve(),!Jg.v())throw new ce(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xN(this,o),this.Ki=t+qN,this.serializer=new a1(p),this.qi=new Ns(this.Ki,this.xi,new jN(this.serializer)),this.ci=new yN,this.li=new IN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_1(this.serializer),this.Pi=new gN,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,E===!1&&bn(Es,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(J.FAILED_PRECONDITION,xp);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new oi(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Wh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Ls(e))return ee(Es,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee(Es,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Cu(e).get(ko).next((t=>k.resolve(this.Xi(t))))}Yi(e){return Wh(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Rp)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Jt(t,al);return r.H().next((o=>{const u=this.ns(o,Rp),c=o.filter((m=>u.indexOf(m)===-1));return k.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?k.resolve(!0):Cu(e).get(ko).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Cp)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ce(J.FAILED_PRECONDITION,xp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wh(e).H().next((r=>this.ns(r,Cp).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ee(Es,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[_c,al],(e=>{const t=new Yp(e,oi.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Wh(e).H().next((t=>this.ns(t,Rp).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return od.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AN(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return ad.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){ee(Es,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",u=(function(p){return p===18?_D:p===17?mS:p===16?yD:p===15?Pg:p===14?dS:p===13?fS:p===12?gD:p===11?hS:void pe(60245)})(this.xi);let c;return this.qi.runTransaction(e,o,u,(m=>(c=new Yp(m,this.ai?this.ai.next():oi.ce),t==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ce(J.FAILED_PRECONDITION,nS);return r(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Ps(e){return Cu(e).get(ko).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Cp)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(J.FAILED_PRECONDITION,xp)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cu(e).put(ko,t)}static v(){return Ns.v()}Ji(e){const t=Cu(e);return t.get(ko).next((r=>this.Xi(r)?(ee(Es,"Releasing primary lease."),t.delete(ko)):k.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(bn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;nb()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return ee(Es,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return bn(Es,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){bn("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cu(s){return Jt(s,_c)}function Wh(s){return Jt(s,al)}function FN(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class Zg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=o}static Es(e,t){let r=ze(),o=ze();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Zg(e,t.fromCache,r,o)}}class HN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class E1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return nb()?8:rS(Xt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const u={result:null};return this.gs(e,t).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ps(e,t,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new HN;return this.ys(e,t,c).next((m=>{if(u.result=m,this.As)return this.ws(e,t,c,m.size)}))})).next((()=>u.result))}ws(e,t,r,o){return r.documentReadCount<this.Vs?(qo()<=Ke.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),k.resolve()):(qo()<=Ke.DEBUG&&ee("QueryEngine","Query:",Fo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(qo()<=Ke.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(t))):k.resolve())}gs(e,t){if(HT(t))return k.resolve(null);let r=li(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=eg(t,null,"F"),r=li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const c=ze(...u);return this.fs.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,r).next((p=>{const y=this.bs(t,m);return this.Ss(t,y,c,p.readTime)?this.gs(e,eg(t,null,"F")):this.Ds(e,y,t,p)}))))})))))}ps(e,t,r,o){return HT(t)||o.isEqual(Se.min())?k.resolve(null):this.fs.getDocuments(e,r).next((u=>{const c=this.bs(t,u);return this.Ss(t,c,r,o)?k.resolve(null):(qo()<=Ke.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fo(t)),this.Ds(e,c,t,jx(o,Wu)).next((m=>m)))}))}bs(e,t){let r=new lt(OS(e));return t.forEach(((o,u)=>{Ec(e,u)&&(r=r.add(u))})),r}Ss(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,t,r){return qo()<=Ke.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.fs.getDocumentsMatchingQuery(e,t,Kn.min(),r)}Ds(e,t,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((u=>(t.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const Wg="LocalStore",GN=3e8;class KN{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new At(De),this.Fs=new kr((u=>ka(u)),vc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function T1(s,e,t,r){return new KN(s,e,t,r)}async function b1(s,e){const t=Ne(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let p=ze();for(const y of o){c.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next((y=>({Ns:y,removedBatchIds:c,addedBatchIds:m})))}))}))}function QN(s,e){const t=Ne(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,E){const S=y.batch,w=S.keys();let j=k.resolve();return w.forEach((Z=>{j=j.next((()=>E.getEntry(p,Z))).next((W=>{const te=y.docVersions.get(Z);ve(te!==null,48541),W.version.compareTo(te)<0&&(S.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),E.addEntry(W)))}))})),j.next((()=>m.mutationQueue.removeMutationBatch(p,S)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let p=ze();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function S1(s){const e=Ne(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function YN(s,e){const t=Ne(s),r=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const m=[];e.targetChanges.forEach(((E,S)=>{const w=o.get(S);if(!w)return;m.push(t.li.removeMatchingKeys(u,E.removedDocuments,S).next((()=>t.li.addMatchingKeys(u,E.addedDocuments,S))));let j=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?j=j.withResumeToken(Ht.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):E.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(E.resumeToken,r)),o=o.insert(S,j),(function(W,te,ge){return W.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=GN?!0:ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0})(w,j,E)&&m.push(t.li.updateTargetData(u,j))}));let p=Gn(),y=ze();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(XN(u,c,e.documentUpdates).next((E=>{p=E.Bs,y=E.Ls}))),!r.isEqual(Se.min())){const E=t.li.getLastRemoteSnapshotVersion(u).next((S=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return k.waitFor(m).next((()=>c.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(t.vs=o,u)))}function XN(s,e,t){let r=ze(),o=ze();return t.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let c=Gn();return t.forEach(((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(m,p.readTime),c=c.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(m,p)):ee(Wg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{Bs:c,Ls:o}}))}function $N(s,e){const t=Ne(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=wa),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function JN(s,e){const t=Ne(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.li.getTargetData(r,e).next((u=>u?(o=u,k.resolve(o)):t.li.allocateTargetId(r).next((c=>(o=new Rr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function lg(s,e,t){const r=Ne(s),o=r.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ls(c))throw c;ee(Wg,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function T0(s,e,t){const r=Ne(s);let o=Se.min(),u=ze();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,E){const S=Ne(p),w=S.Fs.get(E);return w!==void 0?k.resolve(S.vs.get(w)):S.li.getTargetData(y,E)})(r,c,li(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,m.targetId).next((p=>{u=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?o:Se.min(),t?u:ze()))).next((m=>(ZN(r,kD(e),m),{documents:m,ks:u})))))}function ZN(s,e,t){let r=s.Ms.get(e)||Se.min();t.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Ms.set(e,r)}class b0{constructor(){this.activeTargetIds=qD()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A1{constructor(){this.vo=new b0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new b0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WN{Mo(e){}shutdown(){}}const S0="ConnectivityMonitor";class A0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ee(S0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ee(S0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ef=null;function ug(){return ef===null?ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():ef++,"0x"+ef.toString(16)}const Dp="RestConnection",eV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class tV{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===xf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,u){const c=ug(),m=this.Qo(e,t.toUriEncodedString());ee(Dp,`Sending RPC '${e}' ${c}:`,m,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,o,u);const{host:y}=new URL(m),E=pl(y);return this.zo(e,m,p,r,E).then((S=>(ee(Dp,`Received RPC '${e}' ${c}: `,S),S)),(S=>{throw Ma(Dp,`RPC '${e}' ${c} failed with error: `,S,"url: ",m,"request:",r),S}))}jo(e,t,r,o,u,c){return this.Wo(e,t,r,o,u)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}Qo(e,t){const r=eV[e];let o=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class nV{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const pn="WebChannelConnection",xu=(s,e,t)=>{s.listen(e,(r=>{try{t(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Jo extends tV{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Jo.c_){const e=Yb();xu(e,Qb.STAT_EVENT,(t=>{t.stat===qp.PROXY?ee(pn,"STAT_EVENT: detected buffering proxy"):t.stat===qp.NOPROXY&&ee(pn,"STAT_EVENT: detected no buffering proxy")})),Jo.c_=!0}}zo(e,t,r,o,u){const c=ug();return new Promise(((m,p)=>{const y=new Gb;y.setWithCredentials(!0),y.listenOnce(Kb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case af.NO_ERROR:const S=y.getResponseJson();ee(pn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(S)),m(S);break;case af.TIMEOUT:ee(pn,`RPC '${e}' ${c} timed out`),p(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case af.HTTP_ERROR:const w=y.getStatus();if(ee(pn,`RPC '${e}' ${c} failed with status:`,w,"response text:",y.getResponseText()),w>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const Z=j?.error;if(Z&&Z.status&&Z.message){const W=(function(ge){const Ee=ge.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Ee)>=0?Ee:J.UNKNOWN})(Z.status);p(new ce(W,Z.message))}else p(new ce(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ce(J.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ee(pn,`RPC '${e}' ${c} completed.`)}}));const E=JSON.stringify(o);ee(pn,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",E,r,15)}))}T_(e,t,r){const o=ug(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=u.join("");ee(pn,`Creating RPC '${e}' stream ${o}: ${y}`,m);const E=c.createWebChannel(y,m);this.I_(E);let S=!1,w=!1;const j=new nV({Ho:Z=>{w?ee(pn,`Not sending because RPC '${e}' stream ${o} is closed:`,Z):(S||(ee(pn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ee(pn,`RPC '${e}' stream ${o} sending:`,Z),E.send(Z))},Jo:()=>E.close()});return xu(E,Mu.EventType.OPEN,(()=>{w||(ee(pn,`RPC '${e}' stream ${o} transport opened.`),j.i_())})),xu(E,Mu.EventType.CLOSE,(()=>{w||(w=!0,ee(pn,`RPC '${e}' stream ${o} transport closed`),j.o_(),this.E_(E))})),xu(E,Mu.EventType.ERROR,(Z=>{w||(w=!0,Ma(pn,`RPC '${e}' stream ${o} transport errored. Name:`,Z.name,"Message:",Z.message),j.o_(new ce(J.UNAVAILABLE,"The operation could not be completed")))})),xu(E,Mu.EventType.MESSAGE,(Z=>{if(!w){const W=Z.data[0];ve(!!W,16349);const te=W,ge=te?.error||te[0]?.error;if(ge){ee(pn,`RPC '${e}' stream ${o} received error:`,ge);const Ee=ge.status;let le=(function(Ie){const R=qt[Ie];if(R!==void 0)return GS(R)})(Ee),Le=ge.message;le===void 0&&(le=J.INTERNAL,Le="Unknown error status: "+Ee+" with message "+ge.message),w=!0,j.o_(new ce(le,Le)),E.close()}else ee(pn,`RPC '${e}' stream ${o} received:`,W),j.__(W)}})),Jo.u_(),setTimeout((()=>{j.s_()}),0),j}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Xb()}}function iV(s){return new Jo(s)}function rV(){return typeof window<"u"?window:null}function gf(){return typeof document<"u"?document:null}function ud(s){return new sN(s,!0)}Jo.c_=!1;class I1{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const I0="PersistentStream";class w1{constructor(e,t,r,o,u,c,m,p){this.Ci=e,this.b_=r,this.S_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new I1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(bn(t.toString()),bn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new ce(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ee(I0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ee(I0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sV extends w1{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=lN(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Se.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?An(c.readTime):Se.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=ig(this.serializer),t.addTarget=(function(u,c){let m;const p=c.target;if(m=Nf(p)?{documents:WS(u,p)}:{query:e1(u,p).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=YS(u,c.resumeToken);const y=tg(u,c.expectedCount);y!==null&&(m.expectedCount=y)}else if(c.snapshotVersion.compareTo(Se.min())>0){m.readTime=dl(u,c.snapshotVersion.toTimestamp());const y=tg(u,c.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const r=cN(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=ig(this.serializer),t.removeTarget=e,this.K_(t)}}class aV extends w1{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=uN(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=ig(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Mf(this.serializer,r)))};this.K_(t)}}class oV{}class lV extends oV{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Wo(e,ng(t,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(J.UNKNOWN,u.toString())}))}jo(e,t,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.jo(e,ng(t,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function uV(s,e,t,r){return new lV(s,e,t,r)}class cV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bn(t),this.aa=!1):ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ba="RemoteStore";class hV{constructor(e,t,r,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{Fa(this)&&(ee(Ba,"Restarting streams for network reachability change."),await(async function(p){const y=Ne(p);y.Ea.add(4),await bc(y),y.Va.set("Unknown"),y.Ea.delete(4),await cd(y)})(this))}))})),this.Va=new cV(r,o)}}async function cd(s){if(Fa(s))for(const e of s.Ra)await e(!0)}async function bc(s){for(const e of s.Ra)await e(!1)}function R1(s,e){const t=Ne(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),iy(t)?ny(t):Tl(t).O_()&&ty(t,e))}function ey(s,e){const t=Ne(s),r=Tl(t);t.Ia.delete(e),r.O_()&&C1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fa(t)&&t.Va.set("Unknown"))}function ty(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Tl(s).Z_(e)}function C1(s,e){s.da.$e(e),Tl(s).X_(e)}function ny(s){s.da=new tN({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Tl(s).start(),s.Va.ua()}function iy(s){return Fa(s)&&!Tl(s).x_()&&s.Ia.size>0}function Fa(s){return Ne(s).Ea.size===0}function x1(s){s.da=void 0}async function fV(s){s.Va.set("Online")}async function dV(s){s.Ia.forEach(((e,t)=>{ty(s,e)}))}async function mV(s,e){x1(s),iy(s)?(s.Va.ha(e),ny(s)):s.Va.set("Unknown")}async function pV(s,e,t){if(s.Va.set("Online"),e instanceof QS&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.da.removeTarget(m))})(s,e)}catch(r){ee(Ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zf(s,r)}else if(e instanceof mf?s.da.Xe(e):e instanceof KS?s.da.st(e):s.da.tt(e),!t.isEqual(Se.min()))try{const r=await S1(s.localStore);t.compareTo(r)>=0&&await(function(u,c){const m=u.da.Tt(c);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(p.resumeToken,c))}})),m.targetMismatches.forEach(((p,y)=>{const E=u.Ia.get(p);if(!E)return;u.Ia.set(p,E.withResumeToken(Ht.EMPTY_BYTE_STRING,E.snapshotVersion)),C1(u,p);const S=new Rr(E.target,p,y,E.sequenceNumber);ty(u,S)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){ee(Ba,"Failed to raise snapshot:",r),await zf(s,r)}}async function zf(s,e,t){if(!Ls(e))throw e;s.Ea.add(1),await bc(s),s.Va.set("Offline"),t||(t=()=>S1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ee(Ba,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await cd(s)}))}function D1(s,e){return e().catch((t=>zf(s,t,e)))}async function Sc(s){const e=Ne(s),t=Ps(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wa;for(;gV(e);)try{const o=await $N(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,yV(e,o)}catch(o){await zf(e,o)}N1(e)&&V1(e)}function gV(s){return Fa(s)&&s.Ta.length<10}function yV(s,e){s.Ta.push(e);const t=Ps(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function N1(s){return Fa(s)&&!Ps(s).x_()&&s.Ta.length>0}function V1(s){Ps(s).start()}async function _V(s){Ps(s).ra()}async function vV(s){const e=Ps(s);for(const t of s.Ta)e.ea(t.mutations)}async function EV(s,e,t){const r=s.Ta.shift(),o=Fg.from(r,e,t);await D1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Sc(s)}async function TV(s,e){e&&Ps(s).Y_&&await(async function(r,o){if((function(c){return ZD(c)&&c!==J.ABORTED})(o.code)){const u=r.Ta.shift();Ps(r).B_(),await D1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Sc(r)}})(s,e),N1(s)&&V1(s)}async function w0(s,e){const t=Ne(s);t.asyncQueue.verifyOperationInProgress(),ee(Ba,"RemoteStore received new credentials");const r=Fa(t);t.Ea.add(3),await bc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await cd(t)}async function bV(s,e){const t=Ne(s);e?(t.Ea.delete(2),await cd(t)):e||(t.Ea.add(2),await bc(t),t.Va.set("Unknown"))}function Tl(s){return s.ma||(s.ma=(function(t,r,o){const u=Ne(t);return u.sa(),new sV(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:fV.bind(null,s),Yo:dV.bind(null,s),t_:mV.bind(null,s),J_:pV.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),iy(s)?ny(s):s.Va.set("Unknown")):(await s.ma.stop(),x1(s))}))),s.ma}function Ps(s){return s.fa||(s.fa=(function(t,r,o){const u=Ne(t);return u.sa(),new aV(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:_V.bind(null,s),t_:TV.bind(null,s),ta:vV.bind(null,s),na:EV.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Sc(s)):(await s.fa.stop(),s.Ta.length>0&&(ee(Ba,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class ry{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,m=new ry(e,t,c,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(s,e){if(bn("AsyncQueue",`${e}: ${s}`),Ls(s))return new ce(J.UNAVAILABLE,`${e}: ${s}`);throw s}class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||oe.comparator(t.key,r.key):(t,r)=>oe.comparator(t.key,r.key),this.keyedMap=Pu(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class R0{constructor(){this.ga=new At(oe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):pe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ml{constructor(e,t,r,o,u,c,m,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,o,u){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new ml(e,t,Zo.emptySet(t),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class SV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class AV{constructor(){this.queries=C0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Ne(t),u=o.queries;o.queries=C0(),u.forEach(((c,m)=>{for(const p of m.ba)p.onError(r)}))})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function C0(){return new kr((s=>VS(s)),td)}async function IV(s,e){const t=Ne(s);let r=3;const o=e.query;let u=t.queries.get(o);u?!u.Sa()&&e.Da()&&(r=2):(u=new SV,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=sy(c,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&ay(t)}async function wV(s,e){const t=Ne(s),r=e.query;let o=3;const u=t.queries.get(r);if(u){const c=u.ba.indexOf(e);c>=0&&(u.ba.splice(c,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function RV(s,e){const t=Ne(s);let r=!1;for(const o of e){const u=o.query,c=t.queries.get(u);if(c){for(const m of c.ba)m.Fa(o)&&(r=!0);c.wa=o}}r&&ay(t)}function CV(s,e,t){const r=Ne(s),o=r.queries.get(e);if(o)for(const u of o.ba)u.onError(t);r.queries.delete(e)}function ay(s){s.Ca.forEach((e=>{e.next()}))}var cg,x0;(x0=cg||(cg={})).Ma="default",x0.Cache="cache";class xV{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cg.Cache}}class O1{constructor(e){this.key=e}}class M1{constructor(e){this.key=e}}class DV{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ze(),this.mutatedKeys=ze(),this.eu=OS(e),this.tu=new Zo(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new R0,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,S)=>{const w=o.get(E),j=Ec(this.query,S)?S:null,Z=!!w&&this.mutatedKeys.has(w.key),W=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let te=!1;w&&j?w.data.isEqual(j.data)?Z!==W&&(r.track({type:3,doc:j}),te=!0):this.su(w,j)||(r.track({type:2,doc:j}),te=!0,(p&&this.eu(j,p)>0||y&&this.eu(j,y)<0)&&(m=!0)):!w&&j?(r.track({type:0,doc:j}),te=!0):w&&!j&&(r.track({type:1,doc:w}),te=!0,(p||y)&&(m=!0)),te&&(j?(c=c.add(j),u=W?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Ss:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((E,S)=>(function(j,Z){const W=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Vt:te})}};return W(j)-W(Z)})(E.type,S.type)||this.eu(E.doc,S.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],p=this.Ya.size===0&&this.current&&!o?1:0,y=p!==this.Xa;return this.Xa=p,c.length!==0||y?{snapshot:new ml(this.query,e.tu,u,c,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new R0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new M1(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new O1(r))})),t}cu(e){this.Za=e.ks,this.Ya=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const oy="SyncEngine";class NV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class VV{constructor(e){this.key=e,this.hu=!1}}class OV{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new kr((m=>VS(m)),td),this.Iu=new Map,this.Eu=new Set,this.Ru=new At(oe.comparator),this.Au=new Map,this.Vu=new Xg,this.du={},this.mu=new Map,this.fu=za.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MV(s,e,t=!0){const r=B1(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await P1(r,e,t,!0),o}async function PV(s,e){const t=B1(s);await P1(t,e,!0,!1)}async function P1(s,e,t,r){const o=await JN(s.localStore,li(e)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,t);let m;return r&&(m=await kV(s,e,u,c==="current",o.resumeToken)),s.isPrimaryClient&&t&&R1(s.remoteStore,o),m}async function kV(s,e,t,r,o){s.pu=(S,w,j)=>(async function(W,te,ge,Ee){let le=te.view.ru(ge);le.Ss&&(le=await T0(W.localStore,te.query,!1).then((({documents:R})=>te.view.ru(R,le))));const Le=Ee&&Ee.targetChanges.get(te.targetId),Oe=Ee&&Ee.targetMismatches.get(te.targetId)!=null,Ie=te.view.applyChanges(le,W.isPrimaryClient,Le,Oe);return N0(W,te.targetId,Ie.au),Ie.snapshot})(s,S,w,j);const u=await T0(s.localStore,e,!0),c=new DV(e,u.ks),m=c.ru(u.documents),p=Tc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),y=c.applyChanges(m,s.isPrimaryClient,p);N0(s,t,y.au);const E=new NV(e,t,c);return s.Tu.set(e,E),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function LV(s,e,t){const r=Ne(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!td(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await lg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&ey(r.remoteStore,o.targetId),hg(r,o.targetId)})).catch(qa)):(hg(r,o.targetId),await lg(r.localStore,o.targetId,!0))}async function UV(s,e){const t=Ne(s),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ey(t.remoteStore,r.targetId))}async function zV(s,e,t){const r=j1(s);try{const o=await(function(c,m){const p=Ne(c),y=ot.now(),E=m.reduce(((j,Z)=>j.add(Z.key)),ze());let S,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let Z=Gn(),W=ze();return p.xs.getEntries(j,E).next((te=>{Z=te,Z.forEach(((ge,Ee)=>{Ee.isValidDocument()||(W=W.add(ge))}))})).next((()=>p.localDocuments.getOverlayedDocuments(j,Z))).next((te=>{S=te;const ge=[];for(const Ee of m){const le=$D(Ee,S.get(Ee.key).overlayedDocument);le!=null&&ge.push(new Lr(Ee.key,le,AS(le.value.mapValue),Sn.exists(!0)))}return p.mutationQueue.addMutationBatch(j,y,ge,m)})).next((te=>{w=te;const ge=te.applyToLocalDocumentSet(S,W);return p.documentOverlayCache.saveOverlays(j,te.batchId,ge)}))})).then((()=>({batchId:w.batchId,changes:PS(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,p){let y=c.du[c.currentUser.toKey()];y||(y=new At(De)),y=y.insert(m,p),c.du[c.currentUser.toKey()]=y})(r,o.batchId,t),await Ac(r,o.changes),await Sc(r.remoteStore)}catch(o){const u=sy(o,"Failed to persist write");t.reject(u)}}async function k1(s,e){const t=Ne(s);try{const r=await YN(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=t.Au.get(u);c&&(ve(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?ve(c.hu,14607):o.removedDocuments.size>0&&(ve(c.hu,42227),c.hu=!1))})),await Ac(t,r,e)}catch(r){await qa(r)}}function D0(s,e,t){const r=Ne(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const p=Ne(c);p.onlineState=m;let y=!1;p.queries.forEach(((E,S)=>{for(const w of S.ba)w.va(m)&&(y=!0)})),y&&ay(p)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BV(s,e,t){const r=Ne(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),u=o&&o.key;if(u){let c=new At(oe.comparator);c=c.insert(u,Nt.newNoDocument(u,Se.min()));const m=ze().add(u),p=new sd(Se.min(),new Map,new At(De),c,m);await k1(r,p),r.Ru=r.Ru.remove(u),r.Au.delete(e),ly(r)}else await lg(r.localStore,e,!1).then((()=>hg(r,e,t))).catch(qa)}async function jV(s,e){const t=Ne(s),r=e.batch.batchId;try{const o=await QN(t.localStore,e);U1(t,r,null),L1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ac(t,o)}catch(o){await qa(o)}}async function qV(s,e,t){const r=Ne(s);try{const o=await(function(c,m){const p=Ne(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return p.mutationQueue.lookupMutationBatch(y,m).next((S=>(ve(S!==null,37113),E=S.keys(),p.mutationQueue.removeMutationBatch(y,S)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>p.localDocuments.getDocuments(y,E)))}))})(r.localStore,e);U1(r,e,t),L1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ac(r,o)}catch(o){await qa(o)}}function L1(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function U1(s,e,t){const r=Ne(s);let o=r.du[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function hg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||z1(s,r)}))}function z1(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(ey(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),ly(s))}function N0(s,e,t){for(const r of t)r instanceof O1?(s.Vu.addReference(r.key,e),FV(s,r)):r instanceof M1?(ee(oy,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||z1(s,r.key)):pe(19791,{wu:r})}function FV(s,e){const t=e.key,r=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(r)||(ee(oy,"New document in limbo: "+t),s.Eu.add(r),ly(s))}function ly(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new oe(nt.fromString(e)),r=s.fu.next();s.Au.set(r,new VV(t)),s.Ru=s.Ru.insert(t,r),R1(s.remoteStore,new Rr(li(ed(t.path)),r,"TargetPurposeLimboResolution",oi.ce))}}async function Ac(s,e,t){const r=Ne(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,p)=>{c.push(r.pu(p,e,t).then((y=>{if((y||t)&&r.isPrimaryClient){const E=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Zg.Es(p.targetId,y);u.push(E)}})))})),await Promise.all(c),r.Pu.J_(o),await(async function(p,y){const E=Ne(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>k.forEach(y,(w=>k.forEach(w.Ts,(j=>E.persistence.referenceDelegate.addReference(S,w.targetId,j))).next((()=>k.forEach(w.Is,(j=>E.persistence.referenceDelegate.removeReference(S,w.targetId,j)))))))))}catch(S){if(!Ls(S))throw S;ee(Wg,"Failed to update sequence numbers: "+S)}for(const S of y){const w=S.targetId;if(!S.fromCache){const j=E.vs.get(w),Z=j.snapshotVersion,W=j.withLastLimboFreeSnapshotVersion(Z);E.vs=E.vs.insert(w,W)}}})(r.localStore,u))}async function HV(s,e){const t=Ne(s);if(!t.currentUser.isEqual(e)){ee(oy,"User change. New user:",e.toKey());const r=await b1(t.localStore,e);t.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new ce(J.CANCELLED,c))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ac(t,r.Ns)}}function GV(s,e){const t=Ne(s),r=t.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let o=ze();const u=t.Iu.get(e);if(!u)return o;for(const c of u){const m=t.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function B1(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=k1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BV.bind(null,e),e.Pu.J_=RV.bind(null,e.eventManager),e.Pu.yu=CV.bind(null,e.eventManager),e}function j1(s){const e=Ne(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qV.bind(null,e),e}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ud(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return T1(this.persistence,new E1,e.initialUser,this.serializer)}Cu(e){return new $g(ld.Vi,this.serializer)}Du(e){return new A1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class KV extends cc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ve(this.persistence.referenceDelegate instanceof Uf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new p1(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new $g((r=>Uf.Vi(r,t)),this.serializer)}}class QV extends cc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await j1(this.xu.syncEngine),await Sc(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return T1(this.persistence,new E1,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new p1(r,e.asyncQueue,t)}Mu(e,t){const r=new Gx(t,this.persistence);return new Hx(e.asyncQueue,r)}Cu(e){const t=FN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new Jg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rV(),gf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new A1}}class Bf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>D0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HV.bind(null,this.syncEngine),await bV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new AV})()}createDatastore(e){const t=ud(e.databaseInfo.databaseId),r=iV(e.databaseInfo);return uV(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,u,c,m){return new hV(r,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>D0(this.syncEngine,t,0)),(function(){return A0.v()?new A0:new WN})())}createSyncEngine(e,t){return(function(o,u,c,m,p,y,E){const S=new OV(o,u,c,m,p,y);return E&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ne(t);ee(Ba,"RemoteStore shutting down."),r.Ea.add(5),await bc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bf.provider={build:()=>new Bf};class YV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ks="FirestoreClient";class XV{constructor(e,t,r,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=o,this.user=fn.UNAUTHENTICATED,this.clientId=Cg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{ee(ks,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ee(ks,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=sy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Np(s,e){s.asyncQueue.verifyOperationInProgress(),ee(ks,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await b1(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function V0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await $V(s);ee(ks,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>w0(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>w0(e.remoteStore,o))),s._onlineComponents=e}async function $V(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ee(ks,"Using user provided OfflineComponentProvider");try{await Np(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ma("Error using user provided cache. Falling back to memory cache: "+t),await Np(s,new cc)}}else ee(ks,"Using default OfflineComponentProvider"),await Np(s,new KV(void 0));return s._offlineComponents}async function q1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ee(ks,"Using user provided OnlineComponentProvider"),await V0(s,s._uninitializedComponentsProvider._online)):(ee(ks,"Using default OnlineComponentProvider"),await V0(s,new Bf))),s._onlineComponents}function JV(s){return q1(s).then((e=>e.syncEngine))}async function O0(s){const e=await q1(s),t=e.eventManager;return t.onListen=MV.bind(null,e.syncEngine),t.onUnlisten=LV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UV.bind(null,e.syncEngine),t}function ZV(s,e,t,r){const o=new YV(r),u=new xV(e,o,t);return s.asyncQueue.enqueueAndForget((async()=>IV(await O0(s),u))),()=>{o.Nu(),s.asyncQueue.enqueueAndForget((async()=>wV(await O0(s),u)))}}function WV(s,e){const t=new Ds;return s.asyncQueue.enqueueAndForget((async()=>zV(await JV(s),e,t))),t.promise}function F1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const eO="ComponentProvider",M0=new Map;function tO(s,e,t,r,o){return new ED(s,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,F1(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}const H1="firestore.googleapis.com",P0=!0;class k0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=H1,this.ssl=P0}else this.host=e.host,this.ssl=e.ssl??P0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=h1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wN)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hd{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Dx;switch(r.type){case"firstParty":return new Mx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=M0.get(t);r&&(ee(eO,"Removing Datastore"),M0.delete(t),r.terminate())})(this),Promise.resolve()}}function nO(s,e,t,r={}){s=Cr(s,hd);const o=pl(e),u=s._getSettings(),c={...u,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(W0(`https://${m}`),eb("Firestore",!0)),u.host!==H1&&u.host!==m&&Ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:r};if(!Da(p,c)&&(s._setSettings(p),r.mockUserToken)){let y,E;if(typeof r.mockUserToken=="string")y=r.mockUserToken,E=fn.MOCK_USER;else{y=kw(r.mockUserToken,s._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new fn(S)}s._authCredentials=new Nx(new Jb(y,E))}}class fd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fd(this.firestore,e,this._query)}}class Yt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}toJSON(){return{type:Yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(yc(t,Yt._jsonSchema))return new Yt(e,r||null,new oe(nt.fromString(t.referencePath)))}}Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:Ft("string",Yt._jsonSchemaVersion),referencePath:Ft("string")};class Vs extends fd{constructor(e,t,r){super(e,t,ed(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new oe(e))}withConverter(e){return new Vs(this.firestore,e,this._path)}}function ga(s,e,...t){if(s=$t(s),Wb("collection","path",e),s instanceof hd){const r=nt.fromString(e,...t);return IT(r),new Vs(s,null,r)}{if(!(s instanceof Yt||s instanceof Vs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(nt.fromString(e,...t));return IT(r),new Vs(s.firestore,null,r)}}function Uu(s,e,...t){if(s=$t(s),arguments.length===1&&(e=Cg.newId()),Wb("doc","path",e),s instanceof hd){const r=nt.fromString(e,...t);return AT(r),new Yt(s,null,new oe(r))}{if(!(s instanceof Yt||s instanceof Vs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(nt.fromString(e,...t));return AT(r),new Yt(s.firestore,s instanceof Vs?s.converter:null,new oe(r))}}const L0="AsyncQueue";class U0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new I1(this,"async_queue_retry"),this._c=()=>{const r=gf();r&&ee(L0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=gf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ds;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ls(e))throw e;ee(L0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,bn("INTERNAL UNHANDLED ERROR: ",z0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=ry.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&pe(47125,{Pc:z0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function z0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class ja extends hd{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new U0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U0(e),this._firestoreClient=void 0,await e}}}function B0(s,e){const t=typeof s=="object"?s:gg(),r=typeof s=="string"?s:xf,o=pg(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=Mw("firestore");u&&nO(o,...u)}return o}function G1(s){if(s._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||K1(s),s._firestoreClient}function K1(s){const e=s._freezeSettings(),t=tO(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new XV(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}function iO(s,e){Ma("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return rO(s,Bf.provider,{build:r=>new QV(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function rO(s,e,t){if((s=Cr(s,ja))._firestoreClient||s._terminated)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ce(J.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},K1(s)}class ai{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ai(Ht.fromBase64String(e))}catch(t){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ai(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ai._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yc(e,ai._jsonSchema))return ai.fromBase64String(e.bytes)}}ai._jsonSchemaVersion="firestore/bytes/1.0",ai._jsonSchema={type:Ft("string",ai._jsonSchemaVersion),bytes:Ft("string")};class uy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cy{constructor(e){this._methodName=e}}class Wi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wi._jsonSchemaVersion}}static fromJSON(e){if(yc(e,Wi._jsonSchema))return new Wi(e.latitude,e.longitude)}}Wi._jsonSchemaVersion="firestore/geoPoint/1.0",Wi._jsonSchema={type:Ft("string",Wi._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};class Ii{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yc(e,Ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ii(e.vectorValues);throw new ce(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ii._jsonSchemaVersion="firestore/vectorValue/1.0",Ii._jsonSchema={type:Ft("string",Ii._jsonSchemaVersion),vectorValues:Ft("object")};const sO=/^__.*__$/;class aO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new El(e,this.data,t,this.fieldTransforms)}}class Q1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Y1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{dataSource:s})}}class hy{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new hy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return jf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Y1(this.dataSource)&&sO.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class oO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ud(e)}createContext(e,t,r,o=!1){return new hy({dataSource:e,methodName:t,targetDoc:r,path:wt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function X1(s){const e=s._freezeSettings(),t=ud(s._databaseId);return new oO(s._databaseId,!!e.ignoreUndefinedProperties,t)}function lO(s,e,t,r,o,u={}){const c=s.createContext(u.merge||u.mergeFields?2:0,e,t,o);fy("Data must be an object, but it was:",c,r);const m=$1(r,c);let p,y;if(u.merge)p=new Mn(c.fieldMask),y=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const S of u.mergeFields){const w=hc(e,S,t);if(!c.contains(w))throw new ce(J.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);W1(E,w)||E.push(w)}p=new Mn(E),y=c.fieldTransforms.filter((S=>p.covers(S.field)))}else p=null,y=c.fieldTransforms;return new aO(new yn(m),p,y)}class dd extends cy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dd}}function uO(s,e,t,r){const o=s.createContext(1,e,t);fy("Data must be an object, but it was:",o,r);const u=[],c=yn.empty();Us(r,((p,y)=>{const E=Z1(e,p,t);y=$t(y);const S=o.childContextForFieldPath(E);if(y instanceof dd)u.push(E);else{const w=md(y,S);w!=null&&(u.push(E),c.set(E,w))}}));const m=new Mn(u);return new Q1(c,m,o.fieldTransforms)}function cO(s,e,t,r,o,u){const c=s.createContext(1,e,t),m=[hc(e,r,t)],p=[o];if(u.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(hc(e,u[w])),p.push(u[w+1]);const y=[],E=yn.empty();for(let w=m.length-1;w>=0;--w)if(!W1(y,m[w])){const j=m[w];let Z=p[w];Z=$t(Z);const W=c.childContextForFieldPath(j);if(Z instanceof dd)y.push(j);else{const te=md(Z,W);te!=null&&(y.push(j),E.set(j,te))}}const S=new Mn(y);return new Q1(E,S,c.fieldTransforms)}function md(s,e){if(J1(s=$t(s)))return fy("Unsupported field value:",e,s),$1(s,e);if(s instanceof cy)return(function(r,o){if(!Y1(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let p=md(m,o.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),c++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=$t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FD(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ot.fromDate(r);return{timestampValue:dl(o.serializer,u)}}if(r instanceof ot){const u=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dl(o.serializer,u)}}if(r instanceof Wi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ai)return{bytesValue:YS(o.serializer,r._byteString)};if(r instanceof Yt){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Kg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ii)return(function(c,m){const p=c instanceof Ii?c.toArray():c;return{mapValue:{fields:{[Lg]:{stringValue:Ug},[ol]:{arrayValue:{values:p.map((E=>{if(typeof E!="number")throw m.createError("VectorValues must only contain numeric values.");return jg(m.serializer,E)}))}}}}}})(r,o);if(s1(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${xg(r)}`)})(s,e)}function $1(s,e){const t={};return pS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(s,((r,o)=>{const u=md(o,e.childContextForField(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function J1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ot||s instanceof Wi||s instanceof ai||s instanceof Yt||s instanceof cy||s instanceof Ii||s1(s))}function fy(s,e,t){if(!J1(t)||!eS(t)){const r=xg(t);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function hc(s,e,t){if((e=$t(e))instanceof uy)return e._internalPath;if(typeof e=="string")return Z1(s,e);throw jf("Field path arguments must be of type string or ",s,!1,void 0,t)}const hO=new RegExp("[~\\*/\\[\\]]");function Z1(s,e,t){if(e.search(hO)>=0)throw jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new uy(...e.split("."))._internalPath}catch{throw jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function jf(s,e,t,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||c)&&(p+=" (found",u&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new ce(J.INVALID_ARGUMENT,m+s+p)}function W1(s,e){return s.some((t=>t.isEqual(e)))}class fO{convertValue(e,t="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Us(e,((o,u)=>{r[o]=this.convertValue(u,t)})),r}convertVectorValue(e){const t=e.fields?.[ol].arrayValue?.values?.map((r=>St(r.doubleValue)));return new Ii(t)}convertGeoPoint(e){return new Wi(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const t=Nr(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nt.fromString(e);ve(r1(r),9688,{name:e});const o=new Pa(r.get(1),r.get(3)),u=new oe(r.popFirst(5));return o.isEqual(t)||bn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class eA extends fO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ai(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,t)}}const j0="@firebase/firestore",q0="4.10.0";function F0(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class tA{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(hc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dO extends tA{data(){return super.data()}}function mO(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function pO(s,e,t){let r;return r=s?s.toFirestore(e):e,r}class zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xa extends tA{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xa._jsonSchemaVersion="firestore/documentSnapshot/1.0",xa._jsonSchema={type:Ft("string",xa._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class yf extends xa{data(e={}){return super.data(e)}}class Wo{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new zu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new yf(this._firestore,this._userDataWriter,r.key,r,new zu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const p=new yf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new yf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return m.type!==0&&(y=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:gO(m.type),doc:p,oldIndex:y,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:s})}}Wo._jsonSchemaVersion="firestore/querySnapshot/1.0",Wo._jsonSchema={type:Ft("string",Wo._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};function Vp(s,e,t,...r){s=Cr(s,Yt);const o=Cr(s.firestore,ja),u=X1(o);let c;return c=typeof(e=$t(e))=="string"||e instanceof uy?cO(u,"updateDoc",s._key,e,t,r):uO(u,"updateDoc",s._key,e),dy(o,[c.toMutation(s._key,Sn.exists(!0))])}function yO(s){return dy(Cr(s.firestore,ja),[new rd(s._key,Sn.none())])}function Du(s,e){const t=Cr(s.firestore,ja),r=Uu(s),o=pO(s.converter,e),u=X1(s.firestore);return dy(t,[lO(u,"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then((()=>r))}function H0(s,...e){s=$t(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||F0(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(F0(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let u,c,m;if(s instanceof Yt)c=Cr(s.firestore,ja),m=ed(s._key.path),u={next:y=>{e[r]&&e[r](_O(c,s,y))},error:e[r+1],complete:e[r+2]};else{const y=Cr(s,fd);c=Cr(y.firestore,ja),m=y._query;const E=new eA(c);u={next:S=>{e[r]&&e[r](new Wo(c,E,y,S))},error:e[r+1],complete:e[r+2]},mO(s._query)}const p=G1(c);return ZV(p,m,o,u)}function dy(s,e){const t=G1(s);return WV(t,e)}function _O(s,e,t){const r=t.docs.get(e._key),o=new eA(s);return new xa(s,o,e._key,r,new zu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){xx(gl),el(new Na("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new ja(new Vx(r.getProvider("auth-internal")),new Px(c,r.getProvider("app-check-internal")),TD(c,o),c);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Cs(j0,q0,e),Cs(j0,q0,"esm2020")})();const vO=()=>{let s,e,t,r,o=null,u=!1;try{let c;if(typeof __firebase_config<"u")if(typeof __firebase_config=="string")try{c=JSON.parse(__firebase_config)}catch{console.warn("Failed to parse __firebase_config")}else c=__firebase_config;c||(c={apiKey:"AIzaSyCLATlr-23t3HYoH0euBtZ7IG4IM5DLVPM",authDomain:"recipe-matcher-3e89d.firebaseapp.com",projectId:"recipe-matcher-3e89d",storageBucket:"recipe-matcher-3e89d.firebasestorage.app",messagingSenderId:"414903191846",appId:"1:414903191846:web:b0652a25fd957b2f42d9e7",measurementId:"G-0CLB5VSR5F"}),$R().length?(s=gg(),t=B0(s)):(s=ob(c),t=B0(s),iO(t).catch(()=>{})),e=Rx(s),r=new Ar}catch(c){console.error("Critical Init Error:",c),o=c.message,u=!0}return{app:s,auth:e,db:t,googleProvider:r,initError:o,isDummyConfig:u}},gt=vO(),Ei=typeof __app_id<"u"?__app_id:"recipe-matcher-v2",Qo={Meats:["Ground Beef","Beef Ribeye","Beef Brisket","Chuck Roast","Beef Stew Meat","Flank Steak","Pork Shoulder","Pork Chop","Pork Belly","Bacon","Pancetta","Prosciutto","Ham","Sausage","Bratwurst","Frankfurter","Chorizo","Italian Sausage","Pepperoni","Ground Pork","Chicken Breast","Chicken Thigh","Chicken Wing","Whole Turkey","Duck","Shrimp","Salmon","Cod","Tuna","Anchovy","Clam","Squid","Crab","Tofu","Lamb","Liver","Sirloin Steak","Pork"],Produce:["Onion","Red Onion","Garlic","Ginger","Scallion","Shallot","Lemongrass","Celery","Carrot","Bell Pepper","Jalapeo","Poblano","Serrano Pepper","Birds Eye Chili","Roma Tomato","Tomatillo","Russet Potato","Cabbage","Bok Choy","Broccoli","Cauliflower","Corn","Button Mushroom","Shiitake Mushroom","Eggplant","Zucchini","Cucumber","Spinach","Kale","Green Bean","Snow Pea","Asparagus","Radish","Bean Sprout","Avocado","Lime","Lemon","Apple","Mango","Pineapple","Coconut","Tamarind","Fresh Basil","Thai Basil","Holy Basil","Cilantro","Parsley","Dill","Chives","Mint","Green Pea","Portabella Mushroom","Mushrooms","Potatoes","Red Pepper"],Pantry:["Dried Ancho Chili","Dried Red Chili","Jasmine Rice","White Rice","Brown Rice","Arborio Rice","Sticky Rice","Gnocchi","Pasta","Egg Noodle","Rice Noodle","Glass Noodle","Corn Tortilla","Flour Tortilla","White Bread","Rye Bread","Breadcrumbs","Cornmeal","Masa Harina","Oats","All-Purpose Flour","Cornstarch","Potato Starch","Baking Powder","Baking Soda","Yeast","Chicken Stock","Beef Stock","Chicken Broth","Canned San Marzano Tomato","Tomato Paste","Tomato Sauce","Coconut Milk","Coconut Cream","Pickle","Sauerkraut","Capers","Black Olive","Peanut Butter","Roasted Peanut","Walnut","Pine Nut","Almond","Vegetable Oil","Canola Oil","Olive Oil","Lard","Sesame Oil","Peanut Oil","Coconut Oil","White Vinegar","Apple Cider Vinegar","Balsamic Vinegar","Red Wine Vinegar","Rice Vinegar","Rice Wine Vinegar","Black Vinegar","Honey","Maple Syrup","Sugar","Brown Sugar","Palm Sugar","Semi-sweet Chocolate","Cocoa Powder","Vanilla Extract","Powdered Sugar","Gelatin","Chicken Bouillon","Lasagna Sheet","Taco Shell","Tortilla Chip","Sesame Seed","Dried Cranberry","Almond Flour","Molasses","Agave Nectar","Cream of Chicken Soup","Cream of Mushroom Soup","Pimentos","Beef Bouillon","Noodles","Diced Tomatoes","Spaghetti","Rice","Long Grain Rice"],Dairy:["Whole Milk","Heavy Cream","Sour Cream","Yogurt","Buttermilk","Condensed Milk","Evaporated Milk","Cheddar Cheese","Low Moisture Mozzarella","Fresh Mozzarella","Parmesan Cheese","Ricotta Cheese","Provolone Cheese","Monterey Jack Cheese","Queso Fresco","Cotija Cheese","Oaxaca Cheese","Swiss Cheese","Cream Cheese","Gouda Cheese","Butter","Egg","Milk"],Sauces:["Soy Sauce","Dark Soy Sauce","Oyster Sauce","Fish Sauce","Hoisin Sauce","Chili Garlic Sauce","Sriracha","Worcestershire Sauce","Ketchup","Yellow Mustard","Dijon Mustard","Mayonnaise","BBQ Sauce","Hot Sauce","Salsa","Mole Paste","Red Curry Paste","Green Curry Paste","Shrimp Paste","Tamarind Paste","Broad Bean Paste","Miso","Sweet Chili Sauce","Plum Sauce","Black Bean Sauce","Ranch Dressing","Blue Cheese Dressing","Caesar Dressing","Horseradish","Enchilada Sauce"],Seasonings:["Salt","Black Pepper","White Pepper","Cumin","Chili Powder","Sweet Paprika","Smoked Paprika","Cayenne Pepper","Red Pepper Flake","Mexican Oregano","Dried Oregano","Dried Basil","Thyme","Rosemary","Sage","Bay Leaf","Cinnamon","Nutmeg","Clove","Allspice","Caraway Seed","Fennel Seed","Ground Coriander","Turmeric","Star Anise","Sichuan Peppercorn","Five Spice Powder","Garlic Powder","Onion Powder","MSG","Curry Powder","Italian Seasoning","Taco Seasoning","Saffron","Pepper"],Other:["Red Wine","White Wine","Shaoxing Wine","Beer","Sherry","Water"]},EO=Object.keys(Qo),TO=s=>s?String(s).toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"",bO=s=>{try{return JSON.parse(s)}catch{try{const t=s.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(t)}catch{const r=s.match(/\{[\s\S]*\}/);if(r)try{return JSON.parse(r[0])}catch{throw new Error("Found JSON-like block but failed to parse.")}throw new Error("Invalid JSON format from AI.")}}},Nu=({value:s,onChange:e,className:t,placeholder:r})=>{const o=xe.useRef(null);return xe.useEffect(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=`${o.current.scrollHeight}px`)},[s]),H.jsx("textarea",{ref:o,className:t,value:s,onChange:e,placeholder:r,rows:1,style:{overflow:"hidden"}})},SO=()=>{const[s,e]=xe.useState(null),[t,r]=xe.useState(!0),[o,u]=xe.useState("recipes"),[c,m]=xe.useState(null),[p,y]=xe.useState(null),[E,S]=xe.useState(()=>localStorage.getItem("rm_theme_v143")||"dark"),[w,j]=xe.useState(()=>localStorage.getItem("rm_color_theme")||"orange"),[Z,W]=xe.useState([]),te=xe.useRef(!1),[ge,Ee]=xe.useState(""),[le,Le]=xe.useState("Meats"),[Oe,Ie]=xe.useState(""),[R,A]=xe.useState(null),[x,O]=xe.useState(""),[N,P]=xe.useState(null),[I,it]=xe.useState({name:"",ingredients:"",instructions:""}),[yt,G]=xe.useState(null),[se,_e]=xe.useState(!1),[Be,Ze]=xe.useState("login"),[D,X]=xe.useState({email:"",password:"",name:""}),[ae,ue]=xe.useState(""),[we,Ce]=xe.useState(!1),[Fe,Rt]=xe.useState(!1),[mt,Qn]=xe.useState(!1),[wi,Ri]=xe.useState({current:0,total:0}),[Gt,rn]=xe.useState({name:"",ings:"",inst:"",source:""}),[Ci,xi]=xe.useState(""),Ur=xe.useRef(null);xe.useEffect(()=>{console.log("App Mounted - v2.9.0");const K=document.documentElement;K.className||(K.className="dark")},[]);const Me=K=>{const ie=new Date().toLocaleTimeString();W(re=>[`[${ie}] ${K}`,...re].slice(0,30))},Et=xe.useMemo(()=>{const K=p||[],ie=new Set,re=new Map;return K.forEach(de=>{const Te=(de.name||"").toLowerCase(),he=de.status==="have"||de.status===void 0&&de.available===!0;re.set(Te,he?"have":"dont_have"),he&&ie.add(Te)}),Object.keys(Qo).forEach(de=>{Qo[de].forEach(Te=>{const he=Te.toLowerCase();re.has(he)||ie.add(he)})}),ie},[p]),Ct=(K,ie)=>{const re=String(K).toLowerCase();for(let de of ie)if(re.includes(de))return!0;return!1},Di=xe.useMemo(()=>(c||[]).map(ie=>{const re=String(ie.ingredients||"").split(`
`).filter(Te=>Te.trim().length>0);if(re.length===0)return{...ie,percent:0};const de=re.reduce((Te,he)=>Te+(Ct(he,Et)?1:0),0);return{...ie,percent:Math.round(de/re.length*100)}}).filter(ie=>(ie.name||"").toLowerCase().includes(Oe.toLowerCase())).sort((ie,re)=>(re.percent||0)-(ie.percent||0)),[c,Et,Oe]);xe.useEffect(()=>{const ie={orange:{primary:"#fb923c",dark:"#ea580c",tint:"rgba(251, 146, 60, 0.1)"},blue:{primary:"#38bdf8",dark:"#0284c7",tint:"rgba(56, 189, 248, 0.1)"}}[w],re=document.createElement("style");return re.innerHTML=`
      * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

      :root {
        --primary: ${ie.primary};
        --primary-dark: ${ie.dark};
        --bg: transparent;
        --card: rgba(255, 255, 255, 0.95);
        --text: #1e293b;
        --muted: #64748b;
        --border: #e2e8f0;
        --header: rgba(255, 255, 255, 0.98);
        --input-bg: #f8fafc;
      }
      .dark {
        --primary: ${ie.primary};
        --primary-dark: ${ie.dark};
        --bg: transparent;
        --card: rgba(30, 41, 59, 0.95);
        --text: #f1f5f9;
        --muted: #94a3b8;
        --border: #334155;
        --header: rgba(15, 23, 42, 0.98);
        --input-bg: rgba(255,255,255,0.05);
      }

      /* UTILITY CLASSES */
      .text-primary { color: var(--primary); }

      html, body {
        margin: 0; padding: 0; min-height: 100%;
        background: var(--bg); color: var(--text);
        transition: color 0.2s ease; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        -webkit-text-size-adjust: 100%;
      }
      .fixed-background { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: -10; background-color: #f8fafc; background-image: url('https://images.unsplash.com/photo-1495195134817-aeb325a55b65?q=80&w=1776&auto=format&fit=crop'); background-size: cover; background-position: center; background-attachment: fixed; }
      .fixed-background::after { content: ''; position: absolute; inset: 0; background: rgba(255,255,255,0.7); }
      .dark .fixed-background { background-color: #0f172a; }
      .dark .fixed-background::after { background: rgba(15, 23, 42, 0.85); }

      .app-container { width: 100%; min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding-bottom: 80px; position: relative; overflow-x: hidden; }
      @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      .animate-spin { animation: spin 1s linear infinite; }

      /* Header Styles */
      .header { width: 100%; position: sticky; top: 0; background: var(--header); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); z-index: 100; display: flex; justify-content: center; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
      .header-content {
        width: 95%; max-width: 1000px; padding: 12px 0;
        display: flex; flex-wrap: wrap; align-items: center; gap: 12px;
      }
      .logo {
        display: flex; align-items: center; gap: 8px; color: var(--primary);
        flex: 1 0 auto; margin-right: auto;
      }
      .header-actions {
        flex: 0 0 auto;
        display: flex; flex-direction: row; flex-wrap: nowrap; align-items: center; gap: 8px;
      }
      .tabs {
        display: flex; background: transparent; padding: 0; gap: 8px;
        order: 3; width: 100%; overflow-x: auto; margin-top: 4px;
        justify-content: flex-start;
        -webkit-overflow-scrolling: touch; scrollbar-width: none;
      }
      .tab-btn {
        padding: 8px 16px; border: 1px solid transparent; border-radius: 99px; cursor: pointer;
        font-weight: 600; font-size: 13px; color: var(--muted); background: transparent;
        transition: 0.2s; white-space: nowrap; flex: 0 0 auto;
      }
      .tab-btn.active { background: var(--input-bg); color: var(--text); border-color: var(--border); }

      .main-content { width: 95%; max-width: 800px; margin: 0 auto; padding: 24px 0; position: relative; z-index: 1; }
      .card { background: var(--card); border-radius: 16px; border: 1px solid var(--border); padding: 24px; margin-bottom: 24px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }

      /* Inputs */
      .input-field, .textarea-field {
        width: 100%; padding: 12px 16px; border-radius: 8px; border: 1px solid var(--border);
        background: var(--input-bg); color: var(--text); outline: none;
        transition: 0.2s; font-family: inherit; font-size: 15px;
      }
      .input-field:focus, .textarea-field:focus { border-color: var(--primary); ring: 2px solid var(--primary); }

      /* Buttons */
      .btn-action {
        background: var(--primary); color: white; border: none;
        padding: 12px 24px; border-radius: 8px; cursor: pointer;
        font-weight: 600; display: flex; align-items: center; gap: 8px;
        transition: 0.2s; justify-content: center; font-size: 14px;
      }
      .btn-action:hover { opacity: 0.9; transform: translateY(-1px); }
      .btn-action:disabled { opacity: 0.5; cursor: not-allowed; }
      .btn-sm { padding: 8px 16px; font-size: 12px; height: auto; }

      /* Modal */
      .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 16px; }
      .modal-card {
        background: var(--header);
        width: 100%; max-width: 360px;
        border-radius: 16px; padding: 32px;
        position: relative; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
        border: 1px solid var(--border);
      }

      /* Independent Modal Styles (No conflicts) */
      .modal-input {
        width: 100%;
        padding: 8px 12px; /* Decreased internal padding */
        font-size: 14px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: var(--input-bg);
        color: var(--text);
        outline: none;
        transition: 0.2s;
      }
      .modal-input:focus { border-color: var(--primary); background: var(--card); }

      .modal-btn {
        width: 100%;
        background: var(--primary); color: white; border: none;
        padding: 10px; /* Decreased internal padding */
        border-radius: 8px; cursor: pointer;
        font-weight: 600; display: flex; align-items: center; justify-content: center;
        gap: 8px; transition: 0.2s; font-size: 14px;
      }
      .modal-btn:hover { opacity: 0.9; }

      .auth-badge { display: flex; align-items: center; gap: 8px; padding: 6px 12px; background: var(--input-bg); border: 1px solid var(--border); border-radius: 99px; cursor: pointer; transition: 0.2s; }
      .auth-badge:hover { background: var(--border); }

      .recipe-item { cursor: pointer; border-bottom: 1px solid var(--border); padding: 24px 0; }
      .match-tag { font-size: 12px; font-weight: 700; padding: 4px 8px; border-radius: 4px; background: rgba(34, 197, 94, 0.1); color: #22c55e; }

      .pantry-subtabs { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 12px; margin-bottom: 16px; scrollbar-width: none; -webkit-overflow-scrolling: touch; }
      .pantry-subtab { padding: 6px 12px; border-radius: 6px; font-size: 13px; font-weight: 500; cursor: pointer; white-space: nowrap; border: 1px solid var(--border); background: var(--bg); color: var(--muted); transition: 0.2s; }
      .pantry-subtab.active { background: var(--primary); color: white; border-color: var(--primary); }

      /* Columns */
      .columns-container { display: grid; grid-template-columns: 1fr; gap: 16px; }
      .column {
        background: var(--input-bg); border-radius: 12px; padding: 16px;
        border: 1px solid var(--border);
        display: flex; flex-wrap: wrap; gap: 8px; align-content: flex-start;
      }
      .column-header {
        font-size: 11px; font-weight: 700; text-transform: uppercase; color: var(--muted);
        text-align: center; margin-bottom: 12px; letter-spacing: 0.05em; width: 100%;
      }

      .ingredient-bubble {
        font-size: 13px; padding: 6px 12px;
        background: var(--card); border: 1px solid var(--border); border-radius: 99px;
        cursor: pointer; color: var(--text);
        font-weight: 500; text-align: center; transition: 0.2s;
        position: relative; user-select: none; margin: 0;
      }
      .ingredient-bubble:hover { border-color: var(--primary); color: var(--primary); }
      .ingredient-bubble.custom { background: ${ie.tint}; border-color: transparent; color: var(--primary-dark); }

      .delete-btn {
        position: absolute; top: -6px; right: -6px;
        background: #ef4444; color: white; border-radius: 50%;
        width: 18px; height: 18px;
        display: flex; align-items: center; justify-content: center;
        font-size: 10px; cursor: pointer;
        box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        z-index: 10;
      }

      .modal-actions { display: flex; gap: 12px; margin-top: 16px; width: 100%; }
      .modal-btn-action { flex: 1; border: none; padding: 10px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px; }
      .bg-red { background: #ef4444; color: white; }
      .bg-gray { background: #64748b; color: white; }

      .whitespace-pre-wrap { white-space: pre-wrap; word-wrap: break-word; }
      /* Auto-expanding logic is handled by component now */

      .bubble-input {
        font-size: 13px; padding: 6px 12px; border-radius: 99px;
        border: 1px solid var(--border); background: var(--input-bg);
        outline: none; width: 160px; color: var(--text); transition: 0.2s; height: 32px;
      }
      .bubble-input:focus { border-color: var(--primary); background: var(--card); }
      .bubble-btn { width: 32px; height: 32px; padding: 0; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: var(--primary); color: white; border: none; cursor: pointer; }

      .pantry-add-container { display: flex; justify-content: center; margin-top: 16px; width: 100%; }
      .pantry-add-form { display: flex; align-items: center; gap: 8px; }
      .user-avatar { width: 24px; height: 24px; border-radius: 50%; object-fit: cover; }

      .color-toggle {
        width: 20px; height: 20px; border-radius: 50%; cursor: pointer; border: 1px solid var(--border);
        background: linear-gradient(135deg, #fb923c 50%, #38bdf8 50%);
      }
      .theme-toggle {
        padding: 6px; border-radius: 50%; background: transparent; border: none;
        cursor: pointer; color: var(--muted); display: flex; align-items: center; justify-content: center;
      }
      .theme-toggle:hover { color: var(--text); background: var(--input-bg); }

      /* New Import Styles */
      .import-option {
        background: var(--input-bg); border: 1px solid var(--border);
        border-radius: 12px; padding: 20px; text-align: center;
        transition: 0.2s; cursor: pointer;
      }
      .import-option:hover { border-color: var(--primary); transform: translateY(-2px); }
      .hidden-file-input { display: none; }

      /* Small Delete Icon Button Style */
      .btn-icon-sm {
        width: 32px; height: 32px;
        padding: 0;
        display: flex; align-items: center; justify-content: center;
        border-radius: 8px; border: none; cursor: pointer;
      }

      @media (min-width: 640px) {
        .columns-container { grid-template-columns: 1fr 1fr 1fr; }
        .header-content { flex-wrap: nowrap; padding: 16px 0; }
        .header-actions { margin-left: auto; }
        .logo { font-size: 24px; flex: 0 0 auto; margin-right: 0; }
        .tabs { order: 0; width: auto; margin-top: 0; justify-content: center; }
        .column { min-height: 300px; display: block; }
        .ingredient-bubble { display: inline-block; margin-right: 6px; margin-bottom: 6px; }
        .pantry-add-container { justify-content: flex-end; }
      }
      `,document.head.appendChild(re),()=>document.head.removeChild(re)},[E,w]),xe.useEffect(()=>{localStorage.setItem("rm_theme_v143",E),document.documentElement.className=E},[E]),xe.useEffect(()=>{localStorage.setItem("rm_color_theme",w)},[w]),xe.useEffect(()=>{let K=!0;const ie=setTimeout(()=>{K&&t&&r(!1)},3500),re=async()=>{if(!gt.initError&&gt.isDummyConfig){e({uid:"offline-guest",isAnonymous:!0,displayName:"Guest"}),r(!1);return}};if(gt.initError)r(!1);else if(re(),!gt.isDummyConfig){const de=p2(gt.auth,async Te=>{if(K)if(Te)e(Te),Me(`Session OK: ${Te.uid.substring(0,5)}`);else if(te.current)r(!1);else{te.current=!0;try{typeof __initial_auth_token<"u"&&__initial_auth_token?await l2(gt.auth,__initial_auth_token):await i2(gt.auth)}catch{r(!1)}}});return()=>{K=!1,de(),clearTimeout(ie)}}},[]),xe.useEffect(()=>{if(!s||gt.initError)return;const K=s.uid,ie=ga(gt.db,"artifacts",Ei,"users",K,"recipes"),re=ga(gt.db,"artifacts",Ei,"users",K,"pantry");Me(`Syncing ${K.substring(0,5)}...`);const de=H0(ie,he=>{const me=he.docs.map(We=>({id:We.id,...We.data()}));m(me),Me(`Fetched ${me.length} recipes`)},he=>{Me(`R-Error: ${he.code}`),m([])}),Te=H0(re,he=>{const me=he.docs.map(We=>({id:We.id,...We.data()}));y(me),Me(`Fetched ${me.length} items`)},he=>{Me(`P-Error: ${he.code}`),y([])});return()=>{de(),Te()}},[s?.uid]),xe.useEffect(()=>{s&&c!==null&&p!==null&&r(!1)},[s,c,p]);const bl=(K,ie)=>K.dataTransfer.setData("text/plain",ie),Ha=K=>K.preventDefault(),sn=async(K,ie)=>{K.preventDefault();const re=K.dataTransfer.getData("text/plain");if(!re||!s)return;const de=(p||[]).find(he=>he.name.toLowerCase()===re.toLowerCase()),Te=s.uid;try{de?await Vp(Uu(gt.db,"artifacts",Ei,"users",Te,"pantry",de.id),{status:ie}):await Du(ga(gt.db,"artifacts",Ei,"users",Te,"pantry"),{name:re,category:le,status:ie,available:ie==="have"}),Me(`Updated: ${re}`)}catch(he){Me(`DB Error: ${he.message}`)}},ir=async K=>{K.preventDefault();const ie=x.trim();if(!ie||!s)return;const re=ie.toLowerCase();let de=!1,Te="";if(Object.keys(Qo).forEach(me=>{Qo[me].some(We=>We.toLowerCase()===re)&&(de=!0,Te=me)}),de){alert(`"${ie}" is already a standard ingredient in the "${Te}" category.`);return}if((p||[]).find(me=>me.name.toLowerCase()===re)){alert(`"${ie}" is already in your pantry.`);return}O("");try{await Du(ga(gt.db,"artifacts",Ei,"users",s.uid,"pantry"),{name:TO(ie),category:le,status:"have",available:!0}),Me(`Added: ${ie}`)}catch(me){Me(`Error: ${me.message}`)}},zs=(K,ie)=>{K.stopPropagation(),G({id:ie.id,name:ie.name,collection:"pantry"})},Bs=async()=>{if(!yt||!s)return;const{id:K,collection:ie}=yt;G(null);try{await yO(Uu(gt.db,"artifacts",Ei,"users",s.uid,ie,K)),Me("Item deleted.")}catch(re){Me(`Delete Error: ${re.message}`)}},Ni=async(K,ie)=>{if(!s)return;const re=["have","dont_have","seldom"],de=(re.indexOf(ie)+1)%re.length,Te=re[de],he=(p||[]).find(We=>We.name.toLowerCase()===K.toLowerCase()),me=s.uid;try{he?await Vp(Uu(gt.db,"artifacts",Ei,"users",me,"pantry",he.id),{status:Te}):await Du(ga(gt.db,"artifacts",Ei,"users",me,"pantry"),{name:K,category:le,status:Te,available:Te==="have"}),Me(`${K} -> ${Te}`)}catch(We){Me(`Move Error: ${We.message}`)}},js=(K,ie)=>{const re=Qo[le]||[],de=re.filter(me=>{const We=(p||[]).find(an=>an.name.toLowerCase()===me.toLowerCase()),rr=We?.status;return We?rr===K:K==="have"}).map(me=>({name:me,isCustom:!1})),Te=(p||[]).filter(me=>me.category!==le||re.some(an=>an.toLowerCase()===me.name.toLowerCase())?!1:(me.status||"have")===K).map(me=>({name:me.name,isCustom:!0,id:me.id})),he=[...de,...Te].sort((me,We)=>me.name.localeCompare(We.name));return H.jsxs("div",{className:"column",onDragOver:Ha,onDrop:me=>sn(me,K),children:[H.jsx("div",{className:"column-header",children:ie}),he.map(me=>H.jsxs("div",{className:`ingredient-bubble ${me.isCustom?"custom":""}`,draggable:!0,onDragStart:We=>bl(We,me.name),onClick:()=>Ni(me.name,K),children:[me.name,me.isCustom&&H.jsx("div",{className:"delete-btn",onClick:We=>zs(We,me),children:H.jsx(yp,{size:10})})]},me.name))]})},Ga=K=>{P(K.id),it({name:K.name,ingredients:K.ingredients,instructions:K.instructions})},Ka=async()=>{if(!(!N||!s))try{await Vp(Uu(gt.db,"artifacts",Ei,"users",s.uid,"recipes",N),{name:I.name,ingredients:I.ingredients,instructions:I.instructions}),P(null),Me("Recipe updated.")}catch{Me("Update failed.")}},Qa=()=>{if(!Ci.trim())return;Me("Parsing text locally...");const K=Ci.split(`
`).map(he=>he.trim()).filter(he=>he.length>0);if(K.length<2){Me("Not enough text found.");return}const ie=K[0],re=[],de=[];let Te=!1;for(let he=1;he<K.length;he++){const me=K[he];if(me.match(/(instruction|step|method|direction)/i)){Te=!0;continue}if(me.match(/(ingredient|items|need)/i)){Te=!1;continue}Te?de.push(me):re.push(me)}rn({name:ie,ings:re.join(`
`),inst:de.join(`
`),source:"Manual Text Import"}),xi(""),Me("Text parsed successfully.")},In=async K=>{Me("Sending image to secure backend..."),Me(`Image Size: ${(K.length*.75/1024).toFixed(2)} KB`);const ie='Extract the recipe from this image. Return valid JSON with these keys: "name" (string), "ingredients" (single string with newlines), "instructions" (single string with newlines). If no recipe is found, return null.';try{let re;if(ge?(Me("Using TEST KEY (Client-Side)..."),re=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${ge}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:ie},{inlineData:{mimeType:"image/jpeg",data:K}}]}]})})):re=await fetch("/api/gemini",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:ie,base64Data:K})}),!re.ok){const he=re.status;let me=re.statusText;try{const We=await re.clone().json();We.error&&(me=typeof We.error=="object"?JSON.stringify(We.error):We.error)}catch{try{const an=(await re.text()).replace(/<[^>]*>?/gm,"").substring(0,100);me=an.length>0?an:me}catch{}}return Me(`Backend Error [${he}]: ${me}`),!ge&&(he===404||he===405)&&alert(`Backend Not Found! 

Since you are in Preview Mode, you must enter a 'Test API Key' below to make this work.`),null}const de=await re.json();if(de?.error)return Me(`API Error: ${de.error.message}`),null;const Te=de?.candidates?.[0]?.content?.parts?.[0]?.text;if(Te){Me("Received text from AI. Parsing...");try{const he=bO(Te);return{name:typeof he.name=="string"?he.name:"Scanned Recipe",ingredients:Array.isArray(he.ingredients)?he.ingredients.join(`
`):typeof he.ingredients=="string"?he.ingredients:"",instructions:Array.isArray(he.instructions)?he.instructions.join(`
`):typeof he.instructions=="string"?he.instructions:""}}catch(he){return Me("JSON Parse Error: "+he.message),null}}return Me("No text returned from AI."),null}catch(re){return Me("Network/Server Error: "+re.message),null}},Kt=async K=>{const ie=Array.from(K.target.files);if(ie.length)if(ie.length===1){const re=new FileReader;re.onloadend=async()=>{Qn(!0);try{const de=await In(re.result.split(",")[1]);de&&(rn({name:de.name,ings:de.ingredients,inst:de.instructions,source:"AI Photo Scan"}),Me("Photo analysis complete!"))}catch{Me("Error analyzing photo.")}finally{Qn(!1)}},re.readAsDataURL(ie[0])}else{Ri({current:0,total:ie.length}),Qn(!0);for(let re=0;re<ie.length;re++){Ri({current:re+1,total:ie.length});try{const de=await new Promise(he=>{const me=new FileReader;me.onloadend=()=>he(me.result.split(",")[1]),me.readAsDataURL(ie[re])}),Te=await In(de);Te&&(await Du(ga(gt.db,"artifacts",Ei,"users",s.uid,"recipes"),{name:Te.name,ingredients:Te.ingredients,instructions:Te.instructions,source:"AI Batch Scan",createdAt:Date.now()}),Me(`Imported: ${Te.name}`))}catch(de){Me(`Batch Error (File ${re+1}): ${de.message}`)}}Qn(!1),Ri({current:0,total:0}),Me("Batch import complete."),setTimeout(()=>u("recipes"),1e3)}},wn=async()=>{if(!Gt.name||!s)return;Rt(!0);const K={name:Gt.name,ingredients:Gt.ings,instructions:Gt.inst,source:Gt.source,createdAt:Date.now()};try{Me(`Saving to users/${s.uid}/recipes`),await Du(ga(gt.db,"artifacts",Ei,"users",s.uid,"recipes"),K),rn({name:"",ings:"",inst:"",source:""}),setScrapeUrl(""),u("recipes"),Me("Recipe Saved.")}catch(ie){Me(`Save Error: ${ie.message}`)}Rt(!1)},It=async()=>{if(Ce(!0),gt.isDummyConfig){Ce(!1);return}try{await k2(gt.auth,gt.googleProvider),_e(!1)}catch(K){ue(K.message)}finally{Ce(!1)}},Ya=async K=>{if(K.preventDefault(),Ce(!0),gt.isDummyConfig){Ce(!1);return}try{if(Be==="signup"){const ie=await u2(gt.auth,D.email,D.password);await f2(ie.user,{displayName:D.name})}else await c2(gt.auth,D.email,D.password);_e(!1)}catch(ie){ue(ie.message)}finally{Ce(!1)}},zr=async()=>{try{gt.isDummyConfig||await g2(gt.auth),window.location.reload()}catch(K){Me(K.message)}};return t?H.jsx("div",{className:"app-container dark",style:{justifyContent:"center",display:"flex",alignItems:"center"},children:H.jsx(gp,{className:"animate-spin text-orange-500 mx-auto mb-4",size:56})}):H.jsxs("div",{className:`app-container ${E}`,children:[H.jsx("div",{className:"fixed-background"}),yt&&H.jsx("div",{className:"modal-overlay",onClick:()=>G(null),children:H.jsxs("div",{className:"modal-card",onClick:K=>K.stopPropagation(),children:[H.jsxs("h2",{className:"text-lg font-bold mb-2",children:["Delete ",yt.collection==="recipes"?"Recipe":"Ingredient","?"]}),H.jsxs("p",{className:"text-sm text-muted mb-6",children:['Permanently remove "',String(yt.name),'"?']}),H.jsxs("div",{className:"modal-actions",children:[H.jsx("button",{className:"modal-btn-action bg-red",onClick:Bs,children:"Delete"}),H.jsx("button",{className:"modal-btn-action bg-gray",onClick:()=>G(null),children:"Cancel"})]})]})}),se&&H.jsx("div",{className:"modal-overlay",onClick:()=>_e(!1),children:H.jsxs("div",{className:"modal-card",onClick:K=>K.stopPropagation(),children:[H.jsx("button",{className:"absolute top-4 right-4 p-1 rounded-full hover:bg-slate-100 transition-colors text-muted",onClick:()=>_e(!1),children:H.jsx(yp,{size:18})}),H.jsxs("div",{className:"text-center mb-6",children:[H.jsx("h2",{className:"text-xl font-bold text-primary tracking-tight",children:"WELCOME"}),H.jsx("p",{className:"text-sm text-muted mt-1",children:"Sign in to sync your pantry"})]}),H.jsxs("form",{onSubmit:Ya,className:"w-full flex flex-col gap-5",children:[Be==="signup"&&H.jsx("input",{className:"modal-input",placeholder:"Name",required:!0,value:D.name,onChange:K=>X({...D,name:K.target.value})}),H.jsx("input",{className:"modal-input",type:"email",placeholder:"Email",required:!0,value:D.email,onChange:K=>X({...D,email:K.target.value})}),H.jsx("input",{className:"modal-input",type:"password",placeholder:"Password",required:!0,value:D.password,onChange:K=>X({...D,password:K.target.value})}),H.jsx("button",{className:"modal-btn mt-4",type:"submit",disabled:we,children:we?H.jsx(gp,{className:"animate-spin",size:16}):Be==="login"?"Log In":"Sign Up"})]}),H.jsxs("div",{className:"w-full flex items-center gap-3 my-4",children:[H.jsx("div",{className:"h-px bg-border flex-1"}),H.jsx("span",{className:"text-[10px] text-muted font-bold uppercase",children:"Or"}),H.jsx("div",{className:"h-px bg-border flex-1"})]}),H.jsx("button",{className:"modal-btn",style:{background:"var(--bg)",color:"var(--text)",border:"1px solid var(--border)"},onClick:It,children:"Google Sign In"}),H.jsx("div",{className:"mt-4 text-center",children:H.jsx("button",{className:"text-sm text-muted hover:text-primary font-medium",onClick:()=>Ze(K=>K==="login"?"signup":"login"),children:Be==="login"?"New? Create an account":"Have an account? Log in"})})]})}),H.jsx("header",{className:"header",children:H.jsxs("div",{className:"header-content",children:[H.jsx("div",{className:"logo",children:H.jsx(YI,{size:28,strokeWidth:2.5})}),H.jsx("nav",{className:"tabs",children:["recipes","pantry","import","logs"].map(K=>H.jsx("button",{onClick:()=>u(K),className:`tab-btn ${o===K?"active":""}`,children:K},K))}),H.jsxs("div",{className:"header-actions flex items-center gap-2",children:[H.jsx("button",{className:"color-toggle",onClick:()=>j(K=>K==="orange"?"blue":"orange")}),H.jsx("button",{className:"theme-toggle",onClick:()=>S(K=>K==="light"?"dark":"light"),children:E==="light"?H.jsx(ow,{size:20}):H.jsx(vw,{size:20})}),H.jsxs("div",{className:"auth-badge",onClick:()=>!s||s.isAnonymous?_e(!0):zr(),children:[!s||s.isAnonymous||!s.photoURL?H.jsx(Iw,{size:18}):H.jsx("img",{src:s.photoURL,className:"user-avatar",alt:"User"}),H.jsx("span",{className:"text-xs font-bold",children:!s||s.isAnonymous?"Sign In":s.displayName||"Member"})]})]})]})}),H.jsxs("main",{className:"main-content",children:[o==="pantry"&&H.jsxs("div",{className:"card",children:[H.jsx("div",{className:"pantry-subtabs",children:EO.map(K=>H.jsx("button",{onClick:()=>Le(K),className:`pantry-subtab ${le===K?"active":""}`,children:K},K))}),H.jsxs("div",{className:"columns-container",children:[js("have","Have"),js("dont_have","Don't Have"),js("seldom","Seldom Stocked")]}),H.jsx("div",{className:"text-[10px] text-muted text-center mt-4 mb-2",children:"Drag to move items."}),H.jsx("div",{className:"pantry-add-container",children:H.jsxs("form",{onSubmit:ir,className:"pantry-add-form",children:[H.jsx("input",{className:"bubble-input",placeholder:`+ Add ${le.toLowerCase()}`,value:x,onChange:K=>O(K.target.value)}),H.jsx("button",{type:"submit",className:"bubble-btn",children:H.jsx(hw,{size:12})})]})})]}),o==="recipes"&&H.jsxs("div",{className:"card",children:[H.jsxs("div",{className:"text-center mb-8",children:[H.jsx("h1",{className:"text-3xl font-black text-primary tracking-tight",children:"RECIPE MATCH"}),H.jsx("p",{className:"text-xs text-muted font-mono",children:"v2.9.0"})]}),H.jsxs("div",{className:"flex gap-4 mb-6",children:[H.jsx(yw,{size:20,className:"text-muted"}),H.jsx("input",{className:"input-field",style:{border:"none",background:"none",padding:0},placeholder:"Search recipes...",value:Oe,onChange:K=>Ie(K.target.value)})]}),H.jsx("div",{className:"divide-y divide-border/50",children:(Di||[]).map(K=>{const ie=N===K.id;return H.jsx("div",{className:"recipe-item",children:ie?H.jsxs("div",{className:"space-y-3 p-2",children:[H.jsx("input",{className:"input-field",value:I.name,onChange:re=>it({...I,name:re.target.value})}),H.jsx(Nu,{className:"textarea-field",value:I.ingredients,onChange:re=>it({...I,ingredients:re.target.value}),placeholder:"Ingredients"}),H.jsx(Nu,{className:"textarea-field",value:I.instructions,onChange:re=>it({...I,instructions:re.target.value}),placeholder:"Instructions"}),H.jsxs("div",{className:"flex gap-2",children:[H.jsx("button",{className:"btn-action btn-sm bg-green-600",onClick:Ka,children:"Save"}),H.jsx("button",{className:"btn-action btn-sm bg-slate-500",onClick:()=>P(null),children:"Cancel"}),H.jsx("button",{className:"btn-icon-sm bg-red-500 ml-auto",onClick:()=>G({id:K.id,name:K.name,collection:"recipes"}),children:H.jsx(Sw,{size:16,color:"white"})})]})]}):H.jsxs("div",{onClick:()=>A(R===K.id?null:K.id),children:[H.jsxs("div",{className:"flex justify-between font-bold items-center",children:[H.jsxs("div",{className:"flex gap-3 items-center",children:[H.jsx("span",{children:K.name}),R===K.id&&H.jsx("button",{onClick:re=>{re.stopPropagation(),Ga(K)},className:"p-1 bg-slate-100 rounded hover:bg-orange-100 text-slate-400 hover:text-orange-500",children:H.jsx(uw,{size:14})})]}),H.jsxs("div",{className:"match-tag",children:[K.percent,"%"]})]}),R===K.id&&H.jsxs("div",{className:"mt-4 text-sm text-muted bg-slate-50 dark:bg-slate-900/40 p-6 rounded-xl border border-border",children:[H.jsxs("div",{className:"mb-4",children:[H.jsx("strong",{className:"text-primary block mb-2",children:"Ingredients:"}),H.jsx("div",{className:"space-y-1",children:(K.ingredients||"").split(`
`).map((re,de)=>{const Te=re.trim();if(!Te)return null;const he=Ct(Te,Et);return H.jsxs("div",{className:"flex items-start gap-2",children:[he?H.jsx($I,{size:14,className:"text-green-500 mt-0.5 shrink-0"}):H.jsx(yp,{size:14,className:"text-red-500 mt-0.5 shrink-0"}),H.jsx("span",{className:he?"text-slate-700 dark:text-slate-200":"text-slate-400",children:Te})]},de)})})]}),H.jsxs("div",{children:[H.jsx("strong",{className:"text-primary block mb-2",children:"Instructions:"}),H.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:K.instructions||"No instructions provided."})]})]})]})},K.id)})})]}),o==="import"&&H.jsxs("div",{className:"space-y-4",children:[H.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[H.jsxs("div",{className:"import-option",onClick:()=>Ur.current?.click(),children:[H.jsx("input",{type:"file",ref:Ur,className:"hidden-file-input",accept:"image/*",multiple:!0,onChange:Kt}),mt?H.jsx(gp,{className:"animate-spin mx-auto mb-2 text-primary",size:24}):H.jsx(nw,{className:"mx-auto mb-2 text-primary",size:24}),H.jsx("div",{className:"text-sm font-bold",children:"Scan Photos"}),H.jsx("div",{className:"text-[10px] text-muted",children:mt&&wi.total>0?`Processing ${wi.current}/${wi.total}`:"Batch Import Support"})]}),H.jsxs("div",{className:"import-option opacity-50 cursor-not-allowed",title:"Requires Vercel Backend",children:[H.jsx(rw,{className:"mx-auto mb-2 text-muted",size:24}),H.jsx("div",{className:"text-sm font-bold text-muted",children:"Import URL"}),H.jsx("div",{className:"text-[10px] text-muted",children:"Requires Vercel Backend"})]})]}),H.jsxs("div",{className:"card bg-slate-100 dark:bg-slate-800/50 p-4",children:[H.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[H.jsx(ew,{size:14,className:"text-muted"}),H.jsx("span",{className:"text-xs font-bold text-muted uppercase",children:"Test API Key (Preview Mode)"})]}),H.jsx("input",{className:"input-field text-xs py-2",placeholder:"Paste Gemini API Key here to test without Vercel deployment...",value:ge,onChange:K=>Ee(K.target.value),type:"password"})]}),H.jsxs("div",{className:"card bg-slate-100 dark:bg-slate-800/50",children:[H.jsxs("div",{className:"font-black text-[10px] uppercase mb-4 text-primary flex items-center gap-2",children:[H.jsx(Tw,{size:14})," Text Parser"]}),H.jsxs("div",{className:"space-y-3",children:[H.jsx(Nu,{className:"textarea-field auto-expand-textarea",placeholder:"Paste full text here...",value:Ci,onChange:K=>xi(K.target.value)}),H.jsxs("button",{className:"btn-action w-full bg-slate-500 btn-sm",onClick:Qa,disabled:!Ci.trim(),children:[H.jsx(ZI,{size:16})," Parse Text"]})]})]}),H.jsxs("div",{className:"card",children:[H.jsx("div",{className:"font-black text-[10px] uppercase mb-4 text-muted",children:"Creative Studio"}),H.jsxs("div",{className:"space-y-4",children:[H.jsx("input",{className:"input-field",placeholder:"Name",value:Gt.name,onChange:K=>rn({...Gt,name:K.target.value})}),H.jsx(Nu,{className:"textarea-field",placeholder:"Ingredients",value:Gt.ings,onChange:K=>rn({...Gt,ings:K.target.value})}),H.jsx(Nu,{className:"textarea-field",placeholder:"Instructions",value:Gt.inst,onChange:K=>rn({...Gt,inst:K.target.value})}),H.jsxs("button",{className:"btn-action w-full btn-sm",onClick:wn,disabled:Fe||!Gt.name,children:[H.jsx(pw,{size:20})," Save"]})]})]})]}),o==="logs"&&H.jsx("div",{className:"space-y-4",children:H.jsxs("div",{className:"card text-[11px] font-mono",children:[H.jsxs("div",{className:"flex justify-between items-center mb-4",children:[H.jsx("div",{className:"font-black text-xs text-primary uppercase",children:"Forensic Trace"}),H.jsx("button",{onClick:()=>window.location.reload(),children:H.jsx(dw,{size:12})})]}),Z.map((K,ie)=>H.jsx("div",{className:"py-1 border-b border-border/20",children:K},ie))]})})]})]})};jI.createRoot(document.getElementById("root")).render(H.jsx(xe.StrictMode,{children:H.jsx(SO,{})}));
